(this.webpackJsonpundefined=this.webpackJsonpundefined||[]).push([[0],{110:function(e,t,n){},113:function(e,t,n){},114:function(e,t,n){},192:function(e,t,n){},193:function(e,t,n){},194:function(e,t,n){},195:function(e,t,n){"use strict";n.r(t);var s=n(12),r=n(1),a=n.n(r),i=n(25),c=n.n(i),o=n(8),l=n(7),u=n(13),h=n(9),d=n.n(h),p="RECEIVE_CURRENT_USER",j="RECEIVE_USER",b="RECEIVE_CURRENT_USER_DATA",m="LOGOUT_CURRENT_USER",v="RECEIVE_SESSION_ERRORS",f="REMOVE_SESSION_ERRORS",O=function(e){return{type:p,currentUser:e}},x=function(e){return{type:v,errors:e}},g=function(e){return{type:f}},C=function(e){return function(t){return function(e){return d.a.post("http://localhost:5000/api/v1/users",{data:{user:e}})}(e).then((function(e){return t(O(e))}),(function(e){return t(x(e.responseJSON||{err:e}))}))}},y=function(e){return function(t){return function(e){return d.a.patch("http://localhost:5000/api/v1/users/".concat(e.get("user[id]")),{data:e,contentType:!1,processData:!1})}(e).then((function(e){return t(O(e))}),(function(e){return t(x(e.responseJSON||{err:e}))}))}},N=function(e){return function(t){return function(e){return d.a.post("http://localhost:5000/api/v1/session",{data:{user:e}})}(e).then((function(e){return t(O(e))}),(function(e){return t(x(e.responseJSON||{err:e}))}))}},S=function(){return function(e){return d.a.get("http://localhost:5000/api/v1/users/data").then((function(e){return e.data})).then((function(t){return e({type:b,currentUserData:t})}))}},k=function(){return function(e){return d.a.delete("http://localhost:5000/api/v1/session").then((function(t){return e({type:m})}))}},w=n(26),M=(n(110),n(0)),E=function(e){var t=Object(r.useState)(""),n=Object(w.a)(t,2),s=n[0],a=n[1],i=Object(r.useState)(""),c=Object(w.a)(i,2),o=c[0],u=c[1];return Object(r.useEffect)((function(){document.body.style.overflow="hidden"})),Object(M.jsx)("div",{className:"login-body",style:{backgroundColor:"darkgrey"},children:Object(M.jsx)("form",{action:"",className:"login-form",onSubmit:function(t){t.preventDefault(),e.login({email:s,password:o}).then((function(){return e.history.push("/channels/@me")}))},children:Object(M.jsxs)("div",{className:"login-form-inner",children:[Object(M.jsx)("h3",{className:"form-header",children:"Welcome back!"}),Object(M.jsx)("h4",{className:"login-form-subtitle",children:"We're so excited to see you again!"}),Object(M.jsxs)("div",{className:"form-input",children:[Object(M.jsxs)("div",{className:"email-container",children:[Object(M.jsxs)("div",{className:"session-error-wrapper",children:[Object(M.jsx)("h5",{className:"email-label ".concat(e.errors[0]?"session-error-label":""),children:"EMAIL"}),Object(M.jsx)("span",{className:"session-errors",children:e.errors[0]?"- ".concat(e.errors[0]):""})]}),Object(M.jsx)("input",{type:"text",value:s,onChange:function(e){return a(e.target.value)},className:e.errors[0]?"session-error":"session-input"})]}),Object(M.jsxs)("div",{children:[Object(M.jsx)("h5",{className:"password-label ".concat(e.errors[0]?"session-error-label":""),children:"PASSWORD"}),Object(M.jsx)("input",{type:"password",value:o,onChange:function(e){return u(e.target.value)},id:"password-container",className:e.errors[0]?"session-error":"session-input"})]}),Object(M.jsx)("div",{className:"forgot-password-container"}),Object(M.jsx)("button",{id:"session-submit",children:"Login"}),Object(M.jsxs)("div",{className:"need-account",children:[Object(M.jsx)("span",{children:"Need an account?"}),Object(M.jsx)(l.b,{to:"/register",onClick:function(){return e.removeErrors()},children:"Register"})]})]})]})})})},I=Object(o.b)((function(e){return{errors:e.errors.session}}),(function(e){return console.log("dispatch:",e),{removeErrors:function(){return e(g())},login:function(t){return e(N(t))}}}))(E);var L=function(e){var t=Object(r.useState)(""),n=Object(w.a)(t,2),s=n[0],a=n[1],i=Object(r.useState)(""),c=Object(w.a)(i,2),o=c[0],u=c[1],h=Object(r.useState)(""),d=Object(w.a)(h,2),p=d[0],j=d[1];Object(r.useEffect)((function(){document.body.style="overflow: hidden;"}));var b=e.errors.find((function(e){return e.includes("Email")})),m=e.errors.find((function(e){return e.includes("Username")})),v=e.errors.find((function(e){return e.includes("Password")}));return Object(M.jsx)("div",{className:"login-body",style:{backgroundColor:"darkgrey"},children:Object(M.jsx)("form",{action:"",className:"login-form",onSubmit:function(t){t.preventDefault(),e.signup({email:p,username:s,password:o}).then((function(){return e.history.push("/channels/@me")}))},children:Object(M.jsxs)("div",{className:"login-form-inner",children:[Object(M.jsx)("h3",{className:"form-header",children:"Create an account"}),Object(M.jsxs)("div",{className:"form-input",children:[Object(M.jsxs)("div",{className:"email-container",children:[Object(M.jsxs)("div",{className:"session-error-wrapper",children:[Object(M.jsx)("h5",{className:"email-label ".concat(b?"session-error-label":""),children:"EMAIL"}),Object(M.jsx)("span",{className:"session-errors",children:b?"-  ".concat(b):""})]}),Object(M.jsx)("input",{type:"email",value:p,onChange:function(e){return j(e.target.value)},className:b?"session-error":"session-input"})]}),Object(M.jsxs)("div",{children:[Object(M.jsxs)("div",{className:"session-error-wrapper",children:[Object(M.jsx)("h5",{className:"email-label ".concat(m?"session-error-label":""),children:"USERNAME"}),Object(M.jsx)("span",{className:"session-errors",children:m?"-  ".concat(m):""})]}),Object(M.jsx)("input",{type:"text",value:s,onChange:function(e){return a(e.target.value)},className:m?"session-error":"session-input"})]}),Object(M.jsxs)("div",{children:[Object(M.jsxs)("div",{className:"session-error-wrapper",children:[Object(M.jsx)("h5",{className:"email-label ".concat(v?"session-error-label":""),children:"PASSWORD"}),Object(M.jsx)("span",{className:"session-errors",children:v?"-  ".concat(v):""})]}),Object(M.jsx)("input",{type:"password",value:o,onChange:function(e){return u(e.target.value)},className:v?"session-error":"session-input",id:"password-container"})]}),Object(M.jsx)("div",{className:"forgot-password-container"}),Object(M.jsx)("button",{id:"session-submit",children:"Register"}),Object(M.jsxs)("div",{className:"need-account",children:[Object(M.jsx)("span",{children:"Already have an account?"}),Object(M.jsx)(l.b,{to:"/login",onClick:function(){return e.removeErrors()},children:"Login"})]})]})]})})})},R=Object(o.b)((function(e){return{errors:e.errors.session}}),(function(e){return console.log("dispatch:",e),{signup:function(t){return e(C(t))},removeErrors:function(){return e(g())}}}))(L),U=n(2),_=n(3),D=n(6),T=n(5),A=n(4),V=(n(113),function(e){Object(T.a)(n,e);var t=Object(A.a)(n);function n(e){var s;return Object(U.a)(this,n),(s=t.call(this,e)).handleLogin=s.handleLogin.bind(Object(D.a)(s)),s}return Object(_.a)(n,[{key:"componentDidMount",value:function(){document.body.style.overflow="visible"}},{key:"handleLogin",value:function(){var e=this;this.props.login().then((function(){return e.props.history.push("/channels/@me")}))}},{key:"render",value:function(){return Object(M.jsxs)("div",{className:"splash-body",children:[Object(M.jsx)("header",{className:"splash-header",children:Object(M.jsxs)("nav",{className:"splash-nav",children:[Object(M.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/a/a7/React-icon.svg",className:"discorLogo",alt:""}),Object(M.jsx)("ul",{className:"rightNav",children:Object(M.jsx)(l.b,{to:"/login",className:"openButton",children:this.props.currentUserId?"Open":"Login"})})]})}),Object(M.jsxs)("section",{className:"splash-main",children:[Object(M.jsxs)("div",{className:"content ",children:[Object(M.jsx)("h1",{children:"It's time to ditch Discord."}),Object(M.jsx)("p",{children:"All-in-one voice and text chat for gamers that's free, open-source, secure, and works on both your desktop and phone. Stop paying for TeamSpeak servers and hassling with Skype, and worrying about Discords privacy policies and questionable staff actions. Simplify your life."}),Object(M.jsx)("div",{className:"buttons",children:Object(M.jsx)("a",{href:"https://www.github.com/xero-lib",target:"_blank",className:"open-rift-top",children:"Developers GitHub"})})]}),Object(M.jsxs)("div",{className:"images",children:[Object(M.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/dot.svg",alt:"",className:"pic dot1"}),Object(M.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/dot.svg",alt:"",className:"pic dot2"}),Object(M.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/dot.svg",alt:"",className:"pic dot3"}),Object(M.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/dot.svg",alt:"",className:"pic dot4"}),Object(M.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/x.svg",alt:"",className:"pic x1"}),Object(M.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/x.svg",alt:"",className:"pic x2"}),Object(M.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/circle.svg",alt:"",className:"pic circle1"}),Object(M.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/circle.svg",alt:"",className:"pic circle2"}),Object(M.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/triangle.svg",alt:"",className:"pic triangle1"}),Object(M.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/triangle.svg",alt:"",className:"pic triangle2"}),Object(M.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/square.svg",alt:"",className:"pic square2"}),Object(M.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/square.svg",alt:"",className:"pic square1"}),Object(M.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/floppy.svg",alt:"",className:"pic floppy"}),Object(M.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/bomb.svg",alt:"",className:"pic bomb"}),Object(M.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/question.svg",alt:"",className:"pic question"}),Object(M.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/speaker.svg",alt:"",className:"pic speaker"}),Object(M.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/flask.svg",alt:"",className:"pic flask"}),Object(M.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/computer.svg",alt:"",className:"pic computer"}),Object(M.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/laptop.svg",alt:"",className:"pic laptop"}),Object(M.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/controller.svg",alt:"",className:"pic controller"}),Object(M.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/iphone.svg",alt:"",className:"pic iphone"}),Object(M.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/android.svg",alt:"",className:"pic android"}),Object(M.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/coin.svg",alt:"",className:"pic coin1"}),Object(M.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/coin.svg",alt:"",className:"pic coin2"}),Object(M.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/headphones.svg",alt:"",className:"pic headphones"})]})]}),Object(M.jsxs)("footer",{className:"splash-footer",children:[Object(M.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/underline.svg",alt:"",className:"underline"}),Object(M.jsxs)("div",{className:"footer-content",children:[Object(M.jsxs)("div",{children:[Object(M.jsx)("h2",{children:"Ready to try Rift? It's free!"}),Object(M.jsx)("h3",{children:"JOIN OVER 0 PLAYERS TODAY"})]}),Object(M.jsx)(l.b,{to:"/register",className:"open-discors-bottom",children:this.props.currentUserId?"Open Discors":"Sign Up Now"})]})]})]})}}]),n}(a.a.Component)),z=V,q=Object(o.b)((function(e){return{currentUserId:e.session.id}}),(function(e){return{login:function(){return e(N({username:"hodor",password:"hodorhodor"}))}}}))(z),F=n(51),B=function(e){return{loggedIn:Boolean(e.session.id)}},P=Object(u.g)(Object(o.b)(B)((function(e){var t=e.component,n=e.path,s=e.loggedIn,r=e.exact;return Object(M.jsx)(u.b,{path:n,exact:r,render:function(e){return s?Object(M.jsx)(u.a,{to:"/channels/@me"}):Object(M.jsx)(t,Object(F.a)({},e))}})}))),J=Object(u.g)(Object(o.b)(B)((function(e){var t=e.component,n=e.path,s=e.loggedIn,r=e.exact;return Object(M.jsx)(u.b,{path:n,exact:r,render:function(e){return s?Object(M.jsx)(t,Object(F.a)({},e)):Object(M.jsx)(u.a,{to:"/"})}})}))),H=(n(23),n(114),n(39)),Z=function(e){Object(T.a)(n,e);var t=Object(A.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(_.a)(n,[{key:"render",value:function(){return Object(M.jsx)(H.a,{trigger:this.props.component,position:this.props.position,on:"hover",overlayStyle:{width:"auto",backgroundColor:"black"},arrowStyle:{backgroundColor:"black",zIndex:4},contentStyle:{zIndex:4,width:"auto",whiteSpace:"nowrap",fontFamily:"main3",borderRadius:5,color:"#fff",backgroundColor:"black",border:"none",fontSize:"14px",display:"flex",padding:"8px 10px",pointerEvents:"none"},children:Object(M.jsx)("div",{children:this.props.text})})}}]),n}(a.a.Component),W=Z,G=function(e){Object(T.a)(n,e);var t=Object(A.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(_.a)(n,[{key:"render",value:function(){return Object(M.jsx)(W,{component:Object(M.jsx)(l.c,{to:"/channels/".concat(this.props.server.id,"/").concat(this.props.server.root_channel),className:"home-icon server",activeClassName:"serverSelected",style:this.props.server.icon_url?{backgroundImage:"url(".concat(this.props.server.icon_url,")"),backgroundSize:"100%"}:{backgroundSize:"180%"},onKeyDown:function(e){return e.preventDefault()},children:Object(M.jsx)("div",{className:"server-active-icon"})}),position:"right center",text:this.props.server.name})}}]),n}(a.a.Component),Y=G,X=n(20),K=n.n(X),Q=function(e){Object(T.a)(n,e);var t=Object(A.a)(n);function n(e){var s;return Object(U.a)(this,n),(s=t.call(this,e)).state={name:"",avatarFile:null,avatarUrl:null},s.handleSubmit=s.handleSubmit.bind(Object(D.a)(s)),s.handleRedirect=s.handleRedirect.bind(Object(D.a)(s)),s.handleFile=s.handleFile.bind(Object(D.a)(s)),s.handleRemove=s.handleRemove.bind(Object(D.a)(s)),s.update=s.update.bind(Object(D.a)(s)),s}return Object(_.a)(n,[{key:"componentDidMount",value:function(){this.nameInput.focus()}},{key:"update",value:function(e){this.setState({name:e.currentTarget.value})}},{key:"handleRedirect",value:function(e){this.props.closeModal(),this.props.history.push("/channels/".concat(e.server.id,"/").concat(e.server.root_channel))}},{key:"handleFile",value:function(e){var t=this,n=e.currentTarget.files[0],s=new FileReader;s.onloadend=function(){t.setState({avatarFile:n,avatarUrl:s.result})},n&&s.readAsDataURL(n)}},{key:"handleRemove",value:function(e){this.setState({avatarFile:null,avatarUrl:null})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=new FormData;t.append("server[name]",this.state.name),this.state.avatarFile&&t.append("server[icon]",this.state.avatarFile),this.props.createServer(t).then(this.handleRedirect)}},{key:"render",value:function(){var e=this;return Object(M.jsxs)("form",{className:"create-server-form",onSubmit:this.handleSubmit,children:[Object(M.jsxs)("div",{className:"create-server-form-top",children:[Object(M.jsx)("h5",{children:"CREATE YOUR SERVER"}),Object(M.jsx)("p",{children:"By creating a server you will have access to free text chat to use amongst your friends."}),Object(M.jsxs)("div",{className:"create-server-input-container",children:[Object(M.jsxs)("div",{className:"create-server-form-input",children:[Object(M.jsxs)("label",{id:this.props.errors[0]?"server-errors":"",children:["SERVER NAME",Object(M.jsx)("span",{children:this.props.errors[0]?"  -  ".concat(this.props.errors[0]):""})]}),Object(M.jsx)("input",{type:"text",placeholder:"Enter a server name",onChange:this.update,ref:function(t){e.nameInput=t}})]}),Object(M.jsxs)("div",{className:"avatar-container",id:"icon-container",children:[Object(M.jsxs)("div",{className:"avatar-wrapper",id:"icon-wrapper",style:this.state.avatarUrl?{backgroundImage:"url(".concat(this.state.avatarUrl,")")}:{backgourndColor:"#7289da"},children:[Object(M.jsx)("p",{children:"CHANGE \n ICON"}),Object(M.jsx)("input",{type:"file",onChange:this.handleFile,onKeyDown:function(e){return e.preventDefault()},multipleaccept:".jpg,.jpeg,.png,.gif"}),Object(M.jsx)("div",{className:"add-file-icon"})]}),this.state.avatarUrl?Object(M.jsx)("button",{className:"remove-avatar-button",type:"button",onClick:this.handleRemove,children:"REMOVE"}):null]})]})]}),Object(M.jsx)("div",{className:"create-server-form-bottom",children:Object(M.jsx)("button",{children:"Create"})})]})}}]),n}(a.a.Component),$=Object(u.g)(Q),ee=function(e){Object(T.a)(n,e);var t=Object(A.a)(n);function n(e){var s;return Object(U.a)(this,n),(s=t.call(this,e)).state={name:""},s.handleSubmit=s.handleSubmit.bind(Object(D.a)(s)),s.handleRedirect=s.handleRedirect.bind(Object(D.a)(s)),s.update=s.update.bind(Object(D.a)(s)),s}return Object(_.a)(n,[{key:"componentDidMount",value:function(){this.nameInput.focus()}},{key:"update",value:function(e){this.setState({name:e.currentTarget.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.joinServer(this.state,this.props.currentUserId).then(this.handleRedirect)}},{key:"handleRedirect",value:function(e){this.props.closeModal(),this.props.history.push("/channels/".concat(e.server.id,"/").concat(e.server.root_channel))}},{key:"render",value:function(){var e=this;return Object(M.jsxs)("form",{className:"create-server-form",onSubmit:this.handleSubmit,children:[Object(M.jsxs)("div",{className:"create-server-form-top",children:[Object(M.jsx)("h5",{id:"join-server-header",children:"JOIN A SERVER"}),Object(M.jsx)("p",{id:"join-server-message",children:"Enter a server name below to join an existing server."}),Object(M.jsxs)("div",{className:"create-server-form-input",children:[Object(M.jsxs)("label",{id:this.props.errors[0]?"server-errors":"",children:["SERVER NAME",Object(M.jsx)("span",{children:this.props.errors[0]?"  -  ".concat(this.props.errors[0]):""})]}),Object(M.jsx)("input",{id:"join-server-text-input",type:"text",placeholder:"Enter a server name",onChange:this.update,ref:function(t){e.nameInput=t}})]})]}),Object(M.jsx)("div",{className:"create-server-form-bottom",style:{marginTop:"105px"},children:Object(M.jsx)("button",{id:"join-server-button",children:"Join"})})]})}}]),n}(a.a.Component),te=Object(u.g)(ee),ne=function(e){Object(T.a)(n,e);var t=Object(A.a)(n);function n(e){var s;return Object(U.a)(this,n),(s=t.call(this,e)).state={classText:"dm-notification"},s}return Object(_.a)(n,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){return e.setState({classText:"dm-notification right"})}),200)}},{key:"render",value:function(){return Object(M.jsx)(W,{component:Object(M.jsx)(l.b,{to:"/channels/@me/".concat(this.props.notification.channelId),className:"home-icon ".concat(this.state.classText),id:"dm-notification-".concat(this.props.notification.channelId),style:{backgroundImage:"url(".concat(this.props.user.image_url,")"),backgroundSize:"100%"},onKeyDown:function(e){return e.preventDefault()},children:Object(M.jsx)("div",{className:"dm-notification-badge",children:this.props.notification.count})}),position:"right center",text:this.props.user.username})}}]),n}(a.a.Component),se=ne,re="RECEIVE_SERVERS",ae="RECEIVE_USERS",ie="RECEIVE_SERVER",ce="RECEIVE_SERVER_ERRORS",oe="REMOVE_SERVER_ERRORS",le="REMOVE_SERVER",ue=function(e){return{type:ae,users:e}},he=function(e,t){return{type:ie,server:e,userId:t}},de=function(e,t){return{type:le,serverId:e,userId:t}},pe=function(e){return{type:ce,errors:e}},je=function(){return function(e){return d.a.get("http://localhost:5000/api/v1/guilds").then((function(t){return e(function(e){return{type:re,servers:e}}(t))}))}},be=function(e){return function(t){return function(e){return d.a.get("http://localhost:5000/api/v1/guilds/".concat(e,"/members"))}(e).then((function(e){var n=e.users;e.requests;return t(ue(n))}))}},me=function(e){return function(t){return function(e){return d.a.post("http://localhost:5000/api/v1/guilds",{data:e,contentType:!1,processData:!1})}(e).then((function(e){return t(he(e,e.admin_id))}),(function(e){return t(pe(e.responseJSON))}))}},ve=function(e,t){return function(n){return(s=e,d.a.delete("http://localhost:5000/api/v1/guilds/".concat(s))).then((function(){return n(de(e,t))}));var s}},fe=function(e,t){return function(n){return function(e){return d.a.post("http://localhost:5000/api/v1/guilds/join",{data:{server:e}})}(e).then((function(e){return n(he(e,t))}),(function(e){return n(pe(e.responseJSON))}))}},Oe=function(e){Object(T.a)(n,e);var t=Object(A.a)(n);function n(e){var s;return Object(U.a)(this,n),(s=t.call(this,e)).handleSubmit=s.handleSubmit.bind(Object(D.a)(s)),s.handleRedirect=s.handleRedirect.bind(Object(D.a)(s)),s}return Object(_.a)(n,[{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.joinServer({name:this.props.server.name},this.props.currentUserId).then(this.handleRedirect)}},{key:"handleRedirect",value:function(e){this.props.closeModal(),this.props.history.push("/channels/".concat(e.server.id,"/").concat(e.server.root_channel))}},{key:"render",value:function(){return Object(M.jsxs)("button",{type:"button",className:"channel",id:"search-server-item",onClick:this.handleSubmit,children:[Object(M.jsx)("div",{className:"server-member-img",style:this.props.server.icon_url?{backgroundImage:"url(".concat(this.props.server.icon_url,")"),backgroundSize:"100%",marginLeft:0}:{backgroundSize:"100%",marginLeft:0}}),Object(M.jsx)("div",{className:"channel-name",children:this.props.server.name})]})}}]),n}(a.a.Component),xe=Object(u.g)(Oe),ge=function(e){Object(T.a)(n,e);var t=Object(A.a)(n);function n(e){var s;return Object(U.a)(this,n),(s=t.call(this,e)).state={name:"",servers:[]},s.searchInput=a.a.createRef(),s.update=s.update.bind(Object(D.a)(s)),s}return Object(_.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchServers(),this.searchInput.current.focus()}},{key:"update",value:function(e){var t,n=e.currentTarget.value;t=n?this.props.servers.filter((function(e){return e.name.match(new RegExp("^.*".concat(n,".*$"),"i"))})):[],this.setState({name:n,servers:t})}},{key:"render",value:function(){var e,t=this;return e=0===this.state.servers.length&&this.state.name?Object(M.jsx)("div",{className:"server-search-empty",children:'No servers match "'.concat(this.state.name,'"')}):0!==this.state.servers.length||this.state.name?this.state.servers.map((function(e,n){return Object(M.jsx)(xe,{server:e,closeModal:t.props.closeModal,joinServer:t.props.joinServer,currentUserId:t.props.currentUserId},n)})):Object(M.jsx)("div",{className:"server-search-pic"}),Object(M.jsxs)("section",{className:"create-channel-form",onSubmit:this.handleSubmit,children:[Object(M.jsxs)("header",{children:[Object(M.jsx)("h4",{style:{marginBottom:"6px"},children:"Server Discovery"}),Object(M.jsx)("input",{type:"text",placeholder:'Try searching for a server like "westeros"',value:this.state.name,onChange:this.update,className:"session-input",ref:this.searchInput,id:"search-input",autoComplete:"off"})]}),Object(M.jsx)("main",{className:"search-results",children:Object(M.jsx)("ul",{children:e})}),Object(M.jsx)("div",{className:"create-channel-form-bottom",id:"search-bottom",children:Object(M.jsx)("button",{type:"button",className:"create-channel-cancel",onClick:this.props.closeModal,children:"Cancel"})})]})}}]),n}(a.a.Component),Ce=Object(o.b)((function(e){var t=e.session.id;return{servers:Object.values(e.entities.servers),currentUserId:t}}),(function(e){return{joinServer:function(t,n){return e(fe(t,n))},fetchServers:function(t,n){return e(je())}}}))(ge),ye=function(e){Object(T.a)(n,e);var t=Object(A.a)(n);function n(e){var s;return Object(U.a)(this,n),(s=t.call(this,e)).state={showModal:!1,showSearchModal:!1,content:""},s.handleOpenModal=s.handleOpenModal.bind(Object(D.a)(s)),s.handleCloseModal=s.handleCloseModal.bind(Object(D.a)(s)),s.handleOpenSearchModal=s.handleOpenSearchModal.bind(Object(D.a)(s)),s.handleCloseSearchModal=s.handleCloseSearchModal.bind(Object(D.a)(s)),s}return Object(_.a)(n,[{key:"handleOpenModal",value:function(){this.setState({showModal:!0})}},{key:"handleCloseModal",value:function(){var e=this;this.setState({showModal:!1}),setTimeout((function(){return e.setState({content:""})}),150),this.props.removeServerErrors()}},{key:"handleOpenSearchModal",value:function(){this.setState({showSearchModal:!0})}},{key:"handleCloseSearchModal",value:function(){this.setState({showSearchModal:!1})}},{key:"updateContent",value:function(e){this.setState({content:e})}},{key:"render",value:function(){var e,t,n=this,s=this.props.dmNotifications.map((function(e,t){return Object(M.jsx)(se,{notification:e,user:n.props.users[t]},t)})),r=null===(e=this.props.servers)||void 0===e?void 0:e.map((function(e,t){return Object(M.jsx)(Y,{server:e},t)}));return K.a.setAppElement("#root"),t="create"===this.state.content?Object(M.jsx)($,{createServer:this.props.createServer,closeModal:this.handleCloseModal,errors:this.props.errors}):"join"===this.state.content?Object(M.jsx)(te,{joinServer:this.props.joinServer,closeModal:this.handleCloseModal,errors:this.props.errors,currentUserId:this.props.currentUser.id}):Object(M.jsxs)("div",{className:"server-modal-content-wrapper",children:[Object(M.jsxs)("div",{className:"server-modal-content",children:[Object(M.jsx)("h3",{className:"create-server-header",children:"OH, ANOTHER SERVER HUH?"}),Object(M.jsxs)("div",{className:"modal-create-join",children:[Object(M.jsxs)("div",{className:"modal-create-server",onClick:function(){return n.updateContent("create")},children:[Object(M.jsx)("h4",{children:"CREATE"}),Object(M.jsx)("p",{children:"Create a new server and invite your friends. It's free!"}),Object(M.jsx)("div",{}),Object(M.jsx)("button",{className:"modal-create-button",children:"Create a server"})]}),Object(M.jsxs)("div",{className:"modal-join-server",onClick:function(){return n.updateContent("join")},children:[Object(M.jsx)("h4",{children:"JOIN"}),Object(M.jsx)("p",{children:"Enter a server name and join your friends server."}),Object(M.jsx)("div",{}),Object(M.jsx)("button",{className:"modal-join-button",children:"Join a server"})]})]})]}),Object(M.jsx)("div",{className:"or",children:"or"})]}),Object(M.jsxs)("div",{className:"side-bar",children:[Object(M.jsx)(W,{component:Object(M.jsx)(l.c,{to:"/channels/@me",className:"home-icon",activeClassName:"serverSelected",children:Object(M.jsx)("div",{className:"server-active-icon"})}),position:"right center",text:"Home"}),Object(M.jsx)("div",{className:"friends-online",children:"".concat(this.props.onlineCount," Online")}),s,Object(M.jsx)("div",{className:"separator"}),Object(M.jsxs)("div",{className:"side-scroll-container",children:[r,Object(M.jsx)("button",{className:"create-server",type:"button",onClick:this.handleOpenModal,children:Object(M.jsx)("span",{children:"+"})}),Object(M.jsx)(W,{component:Object(M.jsx)("button",{className:"create-server",type:"button",onClick:this.handleOpenSearchModal,children:Object(M.jsx)("svg",{className:"server-search",width:"24",height:"24",viewBox:"0 0 18 18",children:Object(M.jsx)("g",{fill:"none",fillRule:"evenodd",children:Object(M.jsx)("path",{fill:"currentColor",d:"M3.60091481,7.20297313 C3.60091481,5.20983419 5.20983419,3.60091481 7.20297313,3.60091481 C9.19611206,3.60091481 10.8050314,5.20983419 10.8050314,7.20297313 C10.8050314,9.19611206 9.19611206,10.8050314 7.20297313,10.8050314 C5.20983419,10.8050314 3.60091481,9.19611206 3.60091481,7.20297313 Z M12.0057176,10.8050314 L11.3733562,10.8050314 L11.1492281,10.5889079 C11.9336764,9.67638651 12.4059463,8.49170955 12.4059463,7.20297313 C12.4059463,4.32933105 10.0766152,2 7.20297313,2 C4.32933105,2 2,4.32933105 2,7.20297313 C2,10.0766152 4.32933105,12.4059463 7.20297313,12.4059463 C8.49170955,12.4059463 9.67638651,11.9336764 10.5889079,11.1492281 L10.8050314,11.3733562 L10.8050314,12.0057176 L14.8073185,16 L16,14.8073185 L12.2102538,11.0099776 L12.0057176,10.8050314 Z"})})})}),position:"right center",text:"Server Discovery"})]}),Object(M.jsx)(K.a,{closeTimeoutMS:150,isOpen:this.state.showModal,onRequestClose:this.handleCloseModal,style:{overlay:{backgroundColor:"rgba(0, 0, 0, 0.85)",zIndex:99},content:{height:"420px",width:"540px",padding:0,borderRadius:"5px 5px 5px 5px",margin:"auto",background:"rgb(255, 255, 255)",boxSizing:"border-box"}},children:t}),Object(M.jsx)(K.a,{isOpen:this.state.showSearchModal,contentLabel:"onRequestClose Example",onRequestClose:this.handleCloseSearchModal,closeTimeoutMS:150,style:{overlay:{backgroundColor:"rgba(0, 0, 0, 0.85)",zIndex:99},content:{height:"382px",width:"440px",padding:0,borderRadius:"5px",margin:"auto",boxShadow:"0 0 0 1px rgba(32,34,37,.6), 0 2px 10px 0 rgba(0,0,0,.2)",boxSizing:"border-box",display:"flex",flexDirection:"column",backgroundColor:"#36393f",border:"none"}},children:Object(M.jsx)(Ce,{closeModal:this.handleCloseSearchModal})})]})}}]),n}(a.a.Component),Ne=ye,Se=Object(u.g)(Object(o.b)((function(e){var t,n=0;e.entities.friends.forEach((function(t){e.entities.users[t]&&e.entities.users[t].online&&n++}));var s=Object.values(e.notifications.dm),r=s.map((function(t){return e.entities.users[t.authorId]})),a=e.entities.users[e.session.id];return{servers:null===(t=a.servers)||void 0===t?void 0:t.map((function(t){return e.entities.servers[t]||{}})),errors:e.errors.server,onlineCount:n,dmNotifications:s,users:r,currentUser:a}}),(function(e){return{fetchServers:function(){return e(je())},createServer:function(t){return e(me(t))},joinServer:function(t,n){return e(fe(t,n))},removeServerErrors:function(){return e({type:oe})}}}))(Ne)),ke=function(e){Object(T.a)(n,e);var t=Object(A.a)(n);function n(e){var s;return Object(U.a)(this,n),(s=t.call(this,e)).state={active:!1},s.handleMouseEnter=s.handleMouseEnter.bind(Object(D.a)(s)),s.handleMouseLeave=s.handleMouseLeave.bind(Object(D.a)(s)),s.handleDelete=s.handleDelete.bind(Object(D.a)(s)),s}return Object(_.a)(n,[{key:"handleMouseEnter",value:function(){"general"!==this.props.channel.name&&this.props.currentUser.id===this.props.server.admin_id&&this.setState({active:!0})}},{key:"handleMouseLeave",value:function(){"general"!==this.props.channel.name&&this.props.currentUser.id===this.props.server.admin_id&&this.setState({active:!1})}},{key:"handleDelete",value:function(e){e.preventDefault();var t=this;this.props.deleteChannel().then((function(e){e.channelId==t.props.match.params.channelId&&t.props.history.push("/channels/".concat(t.props.server.id,"/").concat(t.props.server.root_channel))}))}},{key:"render",value:function(){return Object(M.jsxs)(l.c,{to:"/channels/".concat(this.props.server.id,"/").concat(this.props.channel.id),className:"channel",activeClassName:"selected",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[Object(M.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",className:"colorDefaultText-oas-QM icon-sxakjD",children:Object(M.jsx)("path",{className:"foreground-2W-aJk",fill:"currentColor",d:"M2.27333333,12 L2.74666667,9.33333333 L0.08,9.33333333 L0.313333333,8 L2.98,8 L3.68666667,4 L1.02,4 L1.25333333,2.66666667 L3.92,2.66666667 L4.39333333,0 L5.72666667,0 L5.25333333,2.66666667 L9.25333333,2.66666667 L9.72666667,0 L11.06,0 L10.5866667,2.66666667 L13.2533333,2.66666667 L13.02,4 L10.3533333,4 L9.64666667,8 L12.3133333,8 L12.08,9.33333333 L9.41333333,9.33333333 L8.94,12 L7.60666667,12 L8.08,9.33333333 L4.08,9.33333333 L3.60666667,12 L2.27333333,12 L2.27333333,12 Z M5.02,4 L4.31333333,8 L8.31333333,8 L9.02,4 L5.02,4 L5.02,4 Z",transform:"translate(1.333 2)"})}),Object(M.jsx)("div",{className:"channel-name",children:this.props.channel.name}),this.state.active?Object(M.jsx)(W,{component:Object(M.jsx)("button",{className:"delete-channel-button",onClick:this.handleDelete}),position:"top right",text:"Delete Channel"}):null]})}}]),n}(a.a.Component),we=Object(u.g)(ke),Me=n(10),Ee=n.n(Me),Ie=function(e){Object(T.a)(n,e);var t=Object(A.a)(n);function n(e){var s;return Object(U.a)(this,n),(s=t.call(this,e)).state={name:""},s.handleSubmit=s.handleSubmit.bind(Object(D.a)(s)),s.update=s.update.bind(Object(D.a)(s)),s}return Object(_.a)(n,[{key:"componentDidMount",value:function(){this.nameInput.focus()}},{key:"update",value:function(e){this.setState({name:e.currentTarget.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.createChannel(Ee()(this.state,{server_id:this.props.server.id})).then(this.props.closeModal)}},{key:"render",value:function(){var e=this;return Object(M.jsxs)("form",{className:"create-channel-form",onSubmit:this.handleSubmit,children:[Object(M.jsxs)("header",{children:[Object(M.jsx)("h4",{children:"CREATE ".concat(this.props.text," CHANNEL")}),Object(M.jsxs)("p",{children:["in ",this.props.server.name]})]}),Object(M.jsxs)("main",{children:[Object(M.jsxs)("div",{className:"session-error-wrapper",children:[Object(M.jsx)("h5",{className:"email-label ".concat(this.props.errors[0]?"session-error-label":""),children:"CHANNEL NAME"}),Object(M.jsx)("span",{className:"session-errors",children:this.props.errors[0]?"- ".concat(this.props.errors[0]):""})]}),Object(M.jsx)("input",{type:"text",value:this.state.name,onChange:this.update,className:this.props.errors[0]?"session-error":"session-input",ref:function(t){e.nameInput=t}})]}),Object(M.jsxs)("div",{className:"create-channel-form-bottom",children:[Object(M.jsx)("button",{type:"button",className:"create-channel-cancel",onClick:this.props.closeModal,children:"Cancel"}),Object(M.jsx)("button",{id:"session-submit",children:"Create Channel"})]})]})}}]),n}(a.a.Component),Le=Ie,Re="JOIN_ROOM",Ue="EXCHANGE",_e="REMOVE_USER",De=function(e){Object(T.a)(n,e);var t=Object(A.a)(n);function n(e){var s;return Object(U.a)(this,n),(s=t.call(this,e)).state={active:!1},s.pcPeers={},s.remoteAudioContainer=a.a.createRef(),s.handleClick=s.handleClick.bind(Object(D.a)(s)),s.handleMouseEnter=s.handleMouseEnter.bind(Object(D.a)(s)),s.handleMouseLeave=s.handleMouseLeave.bind(Object(D.a)(s)),s.handleDelete=s.handleDelete.bind(Object(D.a)(s)),s}return Object(_.a)(n,[{key:"handleMouseEnter",value:function(){"General"!==this.props.channel.name&&this.props.currentUserId===this.props.server.admin_id&&this.setState({active:!0})}},{key:"handleMouseLeave",value:function(){"General"!==this.props.channel.name&&this.props.currentUserId===this.props.server.admin_id&&this.setState({active:!1})}},{key:"handleDelete",value:function(e){e.stopPropagation(),this.voiceSession&&this.handleLeaveSession(),this.props.leaveVoiceChannel(),this.props.deleteVoiceChannel()}},{key:"handleClick",value:function(){this.props.selectVoiceChannel()}},{key:"componentDidMount",value:function(){var e=this;this.props.select&&navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(t){e.localstream=t})).then((function(){return e.handleJoinSession()}))}},{key:"componentDidUpdate",value:function(e){var t=this;e.selected&&!this.props.selected?this.voiceSession&&this.handleLeaveSession():!e.selected&&this.props.selected&&(this.voiceSession&&this.handleLeaveSession(),navigator.mediaDevices.getUserMedia({audio:!0}).then((function(e){t.localstream=e})).then((function(){return t.handleJoinSession()})))}},{key:"componentWillUnmount",value:function(){this.voiceSession&&this.handleLeaveSession()}},{key:"handleJoinSession",value:function(){var e=this,t=this;this.voiceSession=App.cable.subscriptions.create({channel:"VoiceChannel",channelId:this.props.channel.id},{connected:function(){e.voiceSession.broadcastData({type:Re,from:e.props.currentUserId})},received:function(t){if(t.from!==e.props.currentUserId)switch(t.type){case Re:return e.joinRoom(t);case Ue:if(t.to!==e.props.currentUserId)return;return e.exchange(t);case _e:return e.removeUser(t);default:return}},broadcastData:function(e){return this.perform("broadcast",{channelId:t.props.channel.id,data:e})}})}},{key:"handleLeaveSession",value:function(){for(var e in this.pcPeers)this.pcPeers[e].close();this.pcPeers={},this.voiceSession.unsubscribe(),this.localstream.getAudioTracks().forEach((function(e){e.stop()})),this.voiceSession.broadcastData({type:_e,from:this.props.currentUserId})}},{key:"removeUser",value:function(e){var t=document.getElementById("remoteAudioContainer+".concat(e.from));t&&t.remove(),delete this.pcPeers[e.from]}},{key:"createPC",value:function(e,t){var n=this,s=new RTCPeerConnection({iceServers:[{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"}]});return this.pcPeers[e]=s,this.localstream.getTracks().forEach((function(e){return s.addTrack(e,n.localstream)})),t&&s.createOffer().then((function(t){s.setLocalDescription(t).then((function(){n.voiceSession.broadcastData({type:Ue,from:n.props.currentUserId,to:e,sdp:JSON.stringify(s.localDescription)})}))})),s.onicecandidate=function(t){t.candidate&&n.voiceSession.broadcastData({type:Ue,from:n.props.currentUserId,to:e,candidate:JSON.stringify(t.candidate)})},s.ontrack=function(t){var s=document.createElement("audio");s.id="remoteAudioContainer+".concat(e),s.autoplay="autoplay",s.srcObject=t.streams[0],n.remoteAudioContainer.current.appendChild(s)},s.oniceconnectionstatechange=function(t){"disconnected"==s.iceConnectionState&&n.voiceSession.broadcastData({type:_e,from:e})},s}},{key:"exchange",value:function(e){var t,n=this;if(t=this.pcPeers[e.from]?this.pcPeers[e.from]:this.createPC(e.from,!1),e.candidate&&t.addIceCandidate(new RTCIceCandidate(JSON.parse(e.candidate))),e.sdp){var s=JSON.parse(e.sdp);t.setRemoteDescription(s).then((function(){"offer"===s.type&&t.createAnswer().then((function(s){t.setLocalDescription(s).then((function(){n.voiceSession.broadcastData({type:Ue,from:n.props.currentUserId,to:e.from,sdp:JSON.stringify(t.localDescription)})}))}))}))}}},{key:"logError",value:function(e){console.warn(e)}},{key:"joinRoom",value:function(e){this.createPC(e.from,!0)}},{key:"render",value:function(){return Object(M.jsxs)("div",{className:this.props.selected?"channel voice-selected":"channel",onClick:this.handleClick,ref:this.remoteAudioContainer,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[Object(M.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",children:Object(M.jsx)("path",{fill:"currentColor",d:"M9.33333333,2 L9.33333333,3.37333333 C11.26,3.94666667 12.6666667,5.73333333 12.6666667,7.84666667 C12.6666667,9.96 11.26,11.74 9.33333333,12.3133333 L9.33333333,13.6933333 C12,13.0866667 14,10.7 14,7.84666667 C14,4.99333333 12,2.60666667 9.33333333,2 L9.33333333,2 Z M11,7.84666667 C11,6.66666667 10.3333333,5.65333333 9.33333333,5.16 L9.33333333,10.5133333 C10.3333333,10.04 11,9.02 11,7.84666667 L11,7.84666667 Z M2,5.84666667 L2,9.84666667 L4.66666667,9.84666667 L8,13.18 L8,2.51333333 L4.66666667,5.84666667 L2,5.84666667 L2,5.84666667 Z"})}),Object(M.jsx)("div",{className:"channel-name",children:this.props.channel.name}),this.state.active?Object(M.jsx)(W,{component:Object(M.jsx)("button",{className:"delete-channel-button",onClick:this.handleDelete}),position:"top center",text:"Delete Channel"}):null]})}}]),n}(a.a.Component),Te=De,Ae=function(e){Object(T.a)(n,e);var t=Object(A.a)(n);function n(e){var s;return Object(U.a)(this,n),(s=t.call(this,e)).state={showModal:!1,voiceChannelId:null},s.handleOpenModal=s.handleOpenModal.bind(Object(D.a)(s)),s.handleCloseModal=s.handleCloseModal.bind(Object(D.a)(s)),s.selectVoiceChannel=s.selectVoiceChannel.bind(Object(D.a)(s)),s.leaveVoiceChannel=s.leaveVoiceChannel.bind(Object(D.a)(s)),s}return Object(_.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchVoiceChannels(this.props.match.params.serverId)}},{key:"componentDidUpdate",value:function(e){var t=this.props.match.params.serverId;e.server.id&&e.server.id!=t&&(this.props.fetchVoiceChannels(t),this.state.voiceChannelId&&this.leaveVoiceChannel())}},{key:"handleOpenModal",value:function(){this.setState({showModal:!0})}},{key:"handleCloseModal",value:function(){this.setState({showModal:!1}),this.props.removeChannelErrors()}},{key:"selectVoiceChannel",value:function(e){this.setState({voiceChannelId:e})}},{key:"leaveVoiceChannel",value:function(){this.setState({voiceChannelId:null})}},{key:"render",value:function(){var e=this,t=this,n=this.props.voiceChannels.map((function(n,s){return n.server_id==t.props.match.params.serverId?Object(M.jsx)(Te,{server:t.props.server,channel:n,currentUserId:t.props.currentUser.id,selectVoiceChannel:function(){return e.selectVoiceChannel(n.id)},selected:e.state.voiceChannelId===n.id,deleteVoiceChannel:function(){return t.props.deleteVoiceChannel(n.id)},leaveVoiceChannel:t.leaveVoiceChannel},s):null}));return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("div",{className:"text-channels-label",children:Object(M.jsxs)("div",{children:[Object(M.jsx)("button",{className:"text-channels-button",onClick:this.handleOpenModal,children:"+"}),Object(M.jsx)("h3",{id:"text-channels",children:"Voice Channels"})]})}),n,this.state.voiceChannelId?Object(M.jsxs)("div",{className:"voice-connected-popup",children:[Object(M.jsx)("h4",{children:"Voice Connected"}),Object(M.jsx)("button",{onClick:this.leaveVoiceChannel,className:"leave-voice-channel-button"})]}):null,Object(M.jsx)(K.a,{isOpen:this.state.showModal,contentLabel:"onRequestClose Example",closeTimeoutMS:150,onRequestClose:this.handleCloseModal,style:{overlay:{backgroundColor:"rgba(0, 0, 0, 0.85)",zIndex:99},content:{height:"382px",width:"440px",padding:0,borderRadius:"5px",margin:"auto",boxShadow:"0 0 0 1px rgba(32,34,37,.6), 0 2px 10px 0 rgba(0,0,0,.2)",boxSizing:"border-box",display:"flex",flexDirection:"column",backgroundColor:"#36393f",border:"none"}},children:Object(M.jsx)(Le,{server:this.props.server,createChannel:this.props.createVoiceChannel,closeModal:this.handleCloseModal,errors:this.props.errors,text:"VOICE"})})]})}}]),n}(a.a.Component),Ve=Ae,ze="RECEIVE_CHANNELS",qe="RECEIVE_CHANNEL",Fe="REMOVE_CHANNEL",Be="RECEIVE_CHANNEL_ERRORS",Pe="REMOVE_CHANNEL_ERRORS",Je=function(e){return{type:ze,channels:e}},He=function(e){return{type:qe,channel:e}},Ze=function(e){return{type:Fe,channelId:e}},We=function(e){return{type:Be,errors:e}},Ge=function(){return{type:Pe}},Ye=function(e,t){return function(n){return(s=e,d.a.get("http://localhost:5000/api/v1/channels",{data:{channel:{server_id:s}}})).then((function(e){return n(Je(e))}),(function(){return n(de(e,t))}));var s}},Xe=function(e){return function(t){return function(e){return d.a.delete("http://localhost:5000/api/v1/channels/".concat(e))}(e).then((function(){return t(Ze(e))}))}},Ke=function(e){return function(t){return function(e){return d.a.delete("http://localhost:5000/api/v1/dm_channel_memberships/".concat(e))}(e).then((function(e){return t(Ze(e.channel_id))}))}},Qe=function(){return function(e){return d.a.get("http://localhost:5000/api/v1/dm_channel_memberships").then((function(t){var n=t.channels,s=t.users;return e(ue(s)),e(Je(n))}))}},$e=function(e){return function(t){return function(e){return d.a.post("http://localhost:5000/api/v1/channels",{data:{channel:e}})}(e).then((function(e){return t(He(e))}),(function(e){return t(We(e.responseJSON))}))}},et=function(e){return function(t){return(n=e,d.a.post("http://localhost:5000/api/v1/direct_messages",{data:{dm_channel:{user_id:n}}})).then((function(e){return t(He(e))}));var n}},tt="RECEIVE_VOICE_CHANNELS",nt="RECEIVE_VOICE_CHANNEL",st="REMOVE_VOICE_CHANNEL",rt=function(e){return function(t){return(n=e,d.a.get("localhost:5000/api/v1/audio_channels",{data:{audio_channel:{server_id:n}}})).then((function(e){return t(function(e){return{type:tt,voiceChannels:e}}(e))}));var n}},at=function(e){return function(t){return function(e){return d.a.delete("localhost:5000/api/v1/audio_channels/".concat(e))}(e).then((function(){return t({type:st,voiceChannelId:e})}))}},it=function(e){return function(t){return(n=e,d.a.post("localhost:5000/api/v1/audio_channels",{data:{audio_channel:n}})).then((function(e){return t(function(e){return{type:nt,voiceChannel:e}}(e))}),(function(e){return t(We(e.responseJSON))}));var n}},ct=Object(u.g)(Object(o.b)((function(e,t){var n=t.match.params.serverId,s=Object.values(e.entities.voiceChannels).filter((function(e){return e.server_id==n}));return{currentUser:e.entities.users[e.session.id],server:e.entities.servers[n]||{},voiceChannels:s,errors:e.errors.channel}}),(function(e){return{fetchVoiceChannels:function(t){return e(rt(t))},createVoiceChannel:function(t){return e(it(t))},removeChannelErrors:function(){return e(Ge())},deleteVoiceChannel:function(t){return e(at(t))}}}))(Ve)),ot=function(e){Object(T.a)(n,e);var t=Object(A.a)(n);function n(e){var s;return Object(U.a)(this,n),(s=t.call(this,e)).state={username:s.props.currentUser.username,email:s.props.currentUser.email,avatarFile:null,avatarUrl:null},s.handleSubmit=s.handleSubmit.bind(Object(D.a)(s)),s.handleFile=s.handleFile.bind(Object(D.a)(s)),s.handleRemove=s.handleRemove.bind(Object(D.a)(s)),s}return Object(_.a)(n,[{key:"update",value:function(e){var t=this;return function(n){return t.setState(Object(s.a)({},e,n.currentTarget.value))}}},{key:"handleFile",value:function(e){var t=this,n=e.currentTarget.files[0],s=new FileReader;s.onloadend=function(){t.setState({avatarFile:n,avatarUrl:s.result})},n&&s.readAsDataURL(n)}},{key:"handleRemove",value:function(e){this.setState({avatarFile:null,avatarUrl:null})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=new FormData;t.append("user[username]",this.state.username),t.append("user[email]",this.state.email),t.append("user[id]",this.props.currentUser.id),this.state.avatarFile&&t.append("user[avatar]",this.state.avatarFile),this.props.editUser(t).then(this.props.closeModal)}},{key:"render",value:function(){var e=this.props.errors.find((function(e){return e.includes("Email")||e.includes("demo")})),t=this.props.errors.find((function(e){return e.includes("Username")||e.includes("demo")})),n=this.state,s=n.avatarUrl,r=n.username,a=n.email;return Object(M.jsxs)("form",{className:"edit-user-form",onSubmit:this.handleSubmit,children:[Object(M.jsxs)("div",{className:"edit-user-form-top",children:[Object(M.jsxs)("div",{className:"avatar-container",children:[Object(M.jsxs)("div",{className:"avatar-wrapper",style:{backgroundImage:"url(".concat(s||this.props.currentUser.image_url,")")},children:[Object(M.jsx)("p",{children:"CHANGE \n AVATAR"}),Object(M.jsx)("input",{type:"file",onChange:this.handleFile,onKeyDown:function(e){return e.preventDefault()},multipleaccept:".jpg,.jpeg,.png,.gif"}),Object(M.jsx)("div",{className:"add-file-icon"})]}),s?Object(M.jsx)("button",{type:"button",className:"remove-avatar-button",onClick:this.handleRemove,onKeyDown:function(e){return e.preventDefault()},children:"REMOVE"}):null]}),Object(M.jsxs)("div",{className:"edit-user-username-email",children:[Object(M.jsxs)("div",{className:"email-container",children:[Object(M.jsxs)("div",{className:"session-error-wrapper",children:[Object(M.jsx)("h5",{className:"email-label ".concat(t?"session-error-label":""),children:"USERNAME"}),Object(M.jsx)("span",{className:"session-errors",children:t?"-  ".concat(t):""})]}),Object(M.jsx)("input",{type:"text",value:r,onChange:this.update("username"),className:t?"session-error":"session-input"})]}),Object(M.jsxs)("div",{className:"email-container",children:[Object(M.jsxs)("div",{className:"session-error-wrapper",children:[Object(M.jsx)("h5",{className:"email-label ".concat(e?"session-error-label":""),children:"EMAIL"}),Object(M.jsx)("span",{className:"session-errors",children:e?"-  ".concat(e):""})]}),Object(M.jsx)("input",{type:"text",value:a,onChange:this.update("email"),className:e?"session-error":"session-input"})]})]})]}),Object(M.jsx)("div",{className:"edit-user-form-bottom",children:Object(M.jsxs)("div",{className:"edit-user-button-container",children:[Object(M.jsx)("button",{type:"button",className:"create-channel-cancel",onClick:this.props.closeModal,style:{height:"auto"},children:"Cancel"}),Object(M.jsx)("button",{className:"edit-user-button",children:"Save"})]})})]})}}]),n}(a.a.Component),lt=function(e){Object(T.a)(n,e);var t=Object(A.a)(n);function n(e){var s;return Object(U.a)(this,n),(s=t.call(this,e)).state={showUserModal:!1},s.handleOpenUserModal=s.handleOpenUserModal.bind(Object(D.a)(s)),s.handleCloseUserModal=s.handleCloseUserModal.bind(Object(D.a)(s)),s}return Object(_.a)(n,[{key:"handleOpenUserModal",value:function(){this.setState({showUserModal:!0})}},{key:"handleCloseUserModal",value:function(){this.setState({showUserModal:!1}),this.props.removeErrors()}},{key:"render",value:function(){var e=this;return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)("div",{className:"user-actions",children:[Object(M.jsxs)("div",{className:"icon-name-wrapper",children:[Object(M.jsx)(W,{component:Object(M.jsx)("div",{className:"user-icon",style:{backgroundImage:"url(".concat(this.props.currentUser.image_url,")")},onClick:this.handleOpenUserModal,children:Object(M.jsx)("div",{className:"server-member-status-indicator",style:this.props.currentUser.online?{backgroundColor:"#43b581"}:{backgroundColor:"#747f8d"}})}),position:"top center",text:"Update Profile"}),Object(M.jsx)("div",{className:"actions-username",children:this.props.currentUser.username})]}),Object(M.jsx)(W,{component:Object(M.jsx)("button",{className:"gear",onClick:function(){return e.props.logout()},children:Object(M.jsx)("i",{className:"fas fa-sign-out-alt"})}),position:"top center",text:"Logout"})]}),Object(M.jsx)(K.a,{isOpen:this.state.showUserModal,contentLabel:"onRequestClose Example",onRequestClose:this.handleCloseUserModal,closeTimeoutMS:150,style:{overlay:{backgroundColor:"rgba(0, 0, 0, 0.7)",zIndex:99},content:{height:"271px",width:"500px",padding:0,borderRadius:"5px",margin:"auto",boxShadow:"0 0 0 1px rgba(32,34,37,.6), 0 2px 10px 0 rgba(0,0,0,.2)",boxSizing:"border-box",display:"flex",flexDirection:"column",backgroundColor:"#37393f",border:"none"}},children:Object(M.jsx)(ot,{closeModal:this.handleCloseUserModal,errors:this.props.errors,currentUser:this.props.currentUser,editUser:this.props.editUser})})]})}}]),n}(a.a.Component),ut=Object(u.g)(Object(o.b)((function(e){return{currentUser:e.entities.users[e.session.id],errors:e.errors.session}}),(function(e){return{logout:function(){return e(k())},editUser:function(t){return e(y(t))},removeErrors:function(){return e(g())}}}))(lt)),ht=function(e){Object(T.a)(n,e);var t=Object(A.a)(n);function n(e){var s;return Object(U.a)(this,n),(s=t.call(this,e)).state={showModal:!1,showUserModal:!1,active:!1},s.handleOpenModal=s.handleOpenModal.bind(Object(D.a)(s)),s.handleCloseModal=s.handleCloseModal.bind(Object(D.a)(s)),s.removeServer=s.removeServer.bind(Object(D.a)(s)),s.handleMouseEnter=s.handleMouseEnter.bind(Object(D.a)(s)),s.handleMouseLeave=s.handleMouseLeave.bind(Object(D.a)(s)),s}return Object(_.a)(n,[{key:"handleMouseEnter",value:function(){this.setState({active:!0})}},{key:"handleMouseLeave",value:function(){this.setState({active:!1})}},{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.serverId;t&&this.props.fetchChannels(parseInt(t),this.props.currentUser.id).then((function(){}),(function(){return e.props.history.push("/channels/@me")}))}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props.match.params.serverId;e.server.id&&e.server.id!=n&&this.props.fetchChannels(parseInt(n),this.props.currentUser.id).then((function(){}),(function(){return t.props.history.push("/channels/@me")}))}},{key:"handleOpenModal",value:function(){this.setState({showModal:!0})}},{key:"handleCloseModal",value:function(){this.setState({showModal:!1}),this.props.removeChannelErrors()}},{key:"removeServer",value:function(){var e=this;this.props.deleteServer(this.props.server.id,this.props.currentUser.id).then((function(){return e.props.history.push("/channels/@me")}))}},{key:"render",value:function(){var e=this,t=this.props.channels.map((function(t,n){return Object(M.jsx)(we,{server:e.props.server,channel:t,currentUser:e.props.currentUser,deleteChannel:function(){return e.props.deleteChannel(t.id)}},n)}));return Object(M.jsxs)("div",{className:"right-main",children:[Object(M.jsxs)("div",{className:"channels",children:[Object(M.jsxs)("div",{className:"channel-header",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[Object(M.jsx)("span",{className:"server-name",children:this.props.server.name}),this.state.active?Object(M.jsx)(W,{component:Object(M.jsx)("button",{className:"delete-channel-button",onClick:this.removeServer}),position:"bottom right",text:this.props.server.admin_id===this.props.currentUser.id?"Delete Server":"Unsubscribe"}):null]}),Object(M.jsx)("div",{className:"channel-scroll-wrapper",children:Object(M.jsx)("div",{className:"channel-overflow-container",children:Object(M.jsxs)("div",{className:"channel-list",children:[Object(M.jsx)("div",{className:"text-channels-label",children:Object(M.jsxs)("div",{children:[Object(M.jsx)("button",{className:"text-channels-button",onClick:this.handleOpenModal,children:"+"}),Object(M.jsx)("h3",{id:"text-channels",children:"Text Channels"})]})}),t,Object(M.jsx)(ct,{})]})})}),Object(M.jsx)(ut,{})]}),Object(M.jsx)(K.a,{isOpen:this.state.showModal,contentLabel:"onRequestClose Example",onRequestClose:this.handleCloseModal,closeTimeoutMS:150,style:{overlay:{backgroundColor:"rgba(0, 0, 0, 0.85)",zIndex:99},content:{height:"382px",width:"440px",padding:0,borderRadius:"5px",margin:"auto",boxShadow:"0 0 0 1px rgba(32,34,37,.6), 0 2px 10px 0 rgba(0,0,0,.2)",boxSizing:"border-box",display:"flex",flexDirection:"column",backgroundColor:"#36393f",border:"none"}},children:Object(M.jsx)(Le,{server:this.props.server,createChannel:this.props.createChannel,closeModal:this.handleCloseModal,errors:this.props.errors,text:"TEXT"})})]})}}]),n}(a.a.Component),dt=Object(u.g)(Object(o.b)((function(e,t){var n=t.match.params.serverId,s=Object.values(e.entities.channels).filter((function(e){return e.server_id==n}));return{currentUser:e.entities.users[e.session.id],server:e.entities.servers[n]||{},channels:s,errors:e.errors.channel}}),(function(e){return{fetchChannels:function(t,n){return e(Ye(t,n))},createChannel:function(t){return e($e(t))},removeChannelErrors:function(){return e(Ge())},deleteServer:function(t,n){return e(ve(t,n))},deleteChannel:function(t){return e(Xe(t))}}}))(ht)),pt=function(e){Object(T.a)(n,e);var t=Object(A.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(_.a)(n,[{key:"render",value:function(){return Object(M.jsxs)("header",{className:"chat-header",children:[Object(M.jsxs)("div",{style:{display:"flex",paddingBottom:"2px"},children:[Object(M.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",color:"#72767d",className:"hash",children:Object(M.jsx)("path",{className:"foreground-2W-aJk",fill:"currentColor",d:"M2.27333333,12 L2.74666667,9.33333333 L0.08,9.33333333 L0.313333333,8 L2.98,8 L3.68666667,4 L1.02,4 L1.25333333,2.66666667 L3.92,2.66666667 L4.39333333,0 L5.72666667,0 L5.25333333,2.66666667 L9.25333333,2.66666667 L9.72666667,0 L11.06,0 L10.5866667,2.66666667 L13.2533333,2.66666667 L13.02,4 L10.3533333,4 L9.64666667,8 L12.3133333,8 L12.08,9.33333333 L9.41333333,9.33333333 L8.94,12 L7.60666667,12 L8.08,9.33333333 L4.08,9.33333333 L3.60666667,12 L2.27333333,12 L2.27333333,12 Z M5.02,4 L4.31333333,8 L8.31333333,8 L9.02,4 L5.02,4 L5.02,4 Z",transform:"translate(3 4)"})}),Object(M.jsx)("span",{className:"username",children:this.props.channel.name})]}),Object(M.jsx)(W,{component:Object(M.jsx)("span",{tabIndex:"0",className:"hide-members",role:"button",onClick:this.props.toggleShowMembers,children:Object(M.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:Object(M.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[Object(M.jsx)("polygon",{points:"0 0 24 0 24 24 0 24"}),Object(M.jsx)("path",{className:"iconForeground-3y9f0B",fill:"currentColor",d:"M19 19L23 19 23 16.5C23 14.17 18.33 13 16 13 15.71 13 15.38 13.02 15.03 13.05 15.2979181 13.2440097 15.5471657 13.4534892 15.7720754 13.6791778 17.5922944 14.6769857 19 16.1183086 19 18L19 19zM14.3335577 10.4967128C14.8098529 10.8147627 15.3828086 11 16 11 17.66 11 18.99 9.66 18.99 8 18.99 6.34 17.66 5 16 5 15.3827845 5 14.8098082 5.18525173 14.3335019 5.5033244 14.7574619 6.23791814 15 7.09053797 15 8.00006693 15 8.90955601 14.7574832 9.76214095 14.3335577 10.4967128zM9 12C6.79 12 5 10.21 5 8 5 5.79 6.79 4 9 4 11.21 4 13 5.79 13 8 13 10.21 11.21 12 9 12zM9 14C11.67 14 17 15.34 17 18L17 20 1 20 1 18C1 15.34 6.33 14 9 14z"})]})})}),position:"bottom right",text:"Member List"})]})}}]),n}(a.a.Component),jt=Object(u.g)(Object(o.b)((function(e,t){return{channel:e.entities.channels[t.match.params.channelId]||{}}}))(pt)),bt=n(21),mt=function(e){Object(T.a)(n,e);var t=Object(A.a)(n);function n(e){var s;return Object(U.a)(this,n),(s=t.call(this,e)).state={body:"",author_id:e.user.id},s.messageInput=a.a.createRef(),s.handleSubmit=s.handleSubmit.bind(Object(D.a)(s)),s.update=s.update.bind(Object(D.a)(s)),s}return Object(_.a)(n,[{key:"update",value:function(e){this.setState({body:e.currentTarget.value})}},{key:"componentDidMount",value:function(){this.messageInput.current.focus()}},{key:"componentDidUpdate",value:function(e){var t=this.props.match.params.channelId;e.channel&&e.channel.id!==t&&this.messageInput.current.focus()}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.subscription.speak({message:Object(bt.merge)({channel_id:this.props.channelId},this.state)}),this.setState({body:""})}},{key:"render",value:function(){var e="";if(this.props.channel.name&&this.props.match.params.serverId)e="Message #".concat(this.props.channel.name);else if(this.props.channel.name){var t,n=this.props.channel.name.split("-");t=n[0]==this.props.user.id?n[1]:n[0],e="Message @".concat(this.props.users[t]?this.props.users[t].username:null)}return Object(M.jsx)("form",{onSubmit:this.handleSubmit,className:"message-form",children:Object(M.jsx)("div",{className:"message-form-container",children:Object(M.jsx)("input",{type:"text",placeholder:e,className:"text-area",value:this.state.body,onChange:this.update,ref:this.messageInput})})})}}]),n}(a.a.Component),vt=Object(u.g)(mt),ft="RECEIVE_REQUESTS",Ot="RECEIVE_REQUEST",xt="REMOVE_REQUEST",gt="REMOVE_FRIEND",Ct="RECEIVE_FRIENDS",yt="RECEIVE_FRIEND",Nt=function(e){return{type:yt,friend:[e]}},St=function(e){return{type:Ot,friendRequest:e}},kt=function(e){return{type:xt,requestId:e}},wt=function(e){return{type:gt,friendId:e}},Mt=function(){return function(e){return d.a.get("http://localhost:5000/api/v1/friend_requests").then((function(t){var n=t.requests,s=t.users;return e(ue(s)),e({type:ft,friendRequests:n})}))}},Et=function(){return function(e){return d.a.get("http://localhost:5000/api/v1/friends").then((function(t){return e({type:Ct,friendData:t})}))}},It=function(e){return function(t){return(n=e,d.a.post("http://localhost:5000/api/v1/friend_requests",{data:{friend_request:n}})).then((function(e){return t(St(e))}));var n}},Lt=function(e){return function(t){return(n=e,d.a.patch("http://localhost:5000/api/v1/friend_requests/".concat(n.id))).then((function(){return t(kt(e.id)),t(Nt(e.user_id))}));var n}},Rt=function(e){return function(t){return(n=e,d.a.delete("http://localhost:5000/api/v1/friend_requests/".concat(n.id))).then((function(){return t(kt(e.id))}));var n}},Ut=function(e){return function(t){return function(e){return d.a.delete("http://localhost:5000/api/v1/friends/".concat(e))}(e).then((function(){return t(wt(e))}))}},_t=function(e){Object(T.a)(n,e);var t=Object(A.a)(n);function n(e){var s;return Object(U.a)(this,n),(s=t.call(this,e)).handleClick=s.handleClick.bind(Object(D.a)(s)),s.addFriend=s.addFriend.bind(Object(D.a)(s)),s}return Object(_.a)(n,[{key:"handleClick",value:function(){var e=this;this.props.createDmChannel(this.props.user.id).then((function(t){return e.props.history.push("/channels/@me/".concat(t.channel.id))}))}},{key:"addFriend",value:function(){this.props.createFriendRequest({friend_id:this.props.user.id})}},{key:"render",value:function(){var e,t=this,n=this.props.friendRequests.map((function(e){return e.user_id===t.props.currentUserId?e.friend_id:e.user_id})).concat(this.props.friends);n.push(this.props.currentUserId);var r=!n.includes(this.props.user.id),a=this.props.offsetY;return-90===a?(r||(a+=14),this.props.currentUserId===this.props.user.id&&(a+=14)):60===a?(r||(a-=16),this.props.currentUserId===this.props.user.id&&(a-=16)):(r||(a-=17),this.props.currentUserId===this.props.user.id&&(a-=17)),Object(M.jsx)(H.a,{trigger:this.props.component,arrow:!1,position:this.props.position,closeOnDocumentClick:!0,onOpen:this.props.onOpen,on:"click",offsetX:this.props.offsetX||0,offsetY:a||0,overlayStyle:{zIndex:98},contentStyle:(e={borderRadius:"5px",boxShadow:"0 2px 10px 0 rgba(0, 0, 0, .2), 0 0 0 1px rgba(32, 34, 37, .6)",overflow:"hidden",width:"200px",whiteSpace:"nowrap",fontFamily:"main3",color:"#fff",border:"none",fontSize:"14px",display:"flex",padding:"0"},Object(s.a)(e,"display","flex"),Object(s.a)(e,"flexDirection","column"),Object(s.a)(e,"backgroundColor","black"),Object(s.a)(e,"overflow","auto"),Object(s.a)(e,"zIndex",99),Object(s.a)(e,"transition","transform 200ms ease-in-out"),e),children:Object(M.jsxs)("div",{className:"user-popup",children:[Object(M.jsxs)("div",{className:"user-popup-top",children:[Object(M.jsx)("div",{className:"user-popup-img",style:this.props.user.image_url?{backgroundImage:"url(".concat(this.props.user.image_url,")")}:{},children:Object(M.jsx)("div",{className:"popup-online-indicator",style:this.props.user.online?{backgroundColor:"#43b581",boxShadow:"inset 0 0 0 2px rgba(180,225,205,.6)"}:{backgroundColor:"#747f8d",boxShadow:"inset 0 0 0 2px rgba(199, 204, 209, .6)"}})}),Object(M.jsx)("h5",{children:this.props.user.username})]}),Object(M.jsxs)("div",{className:"user-popup-bottom",children:[this.props.user.id!==this.props.currentUserId&&this.props.showMessageButton?Object(M.jsx)("button",{className:"user-popup-button",onClick:this.handleClick,id:"dm-button",children:"Message"}):null,r?Object(M.jsx)("button",{className:"user-popup-button",onClick:this.addFriend,children:"Add Friend"}):null]})]})})}}]),n}(a.a.Component),Dt=Object(u.g)(Object(o.b)((function(e){return{currentUserId:e.session.id,friendRequests:Object.values(e.entities.friendRequests),friends:e.entities.friends}}),(function(e){return{createDmChannel:function(t){return e(et(t))},createFriendRequest:function(t){return e(It(t))}}}))(_t)),Tt=n(81),At=n.n(Tt),Vt=function(e){Object(T.a)(n,e);var t=Object(A.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(_.a)(n,[{key:"parseDate",value:function(){return At()(this.props.time).tz("America/New_York").calendar()}},{key:"transition",value:function(){document.getElementsByClassName("popup-content")[0].style.transform="translate(-10px, 0)"}},{key:"parseLinks",value:function(e){var t=this,n=e.split("\n");return n.map((function(e,s){var r=e.split(/\s/),a=[],i=t;return r.map((function(e,t){var n=t<r.length-1?" ":"";e.match(/([a-z\-_0-9\/\:\.]*\.(jpg|jpeg|png|gif))/i)?a.push(Object(M.jsx)("a",{href:e,target:"_blank",className:"message-media",children:Object(M.jsx)("img",{src:e,onLoad:function(){return i.props.bottom.scrollIntoView()}})},t)):e.match("^(https?://)?(www.)?(youtube.com|youtu.?be)/.+$")?a.push(Object(M.jsxs)("div",{className:"youtube-container",children:[Object(M.jsx)("div",{className:"red-bar"}),Object(M.jsxs)("main",{children:[Object(M.jsx)("h2",{children:"YouTube"}),Object(M.jsx)("iframe",{src:e.replace("watch?v=","embed/"),allowFullScreen:!0})]})]},t)):a.push(e+n)})),"string"===typeof a[a.length-1]&&s<n.length-1?a.concat(Object(M.jsx)("br",{},s+9999)):a}))}},{key:"render",value:function(){return Object(M.jsxs)("div",{className:"message",children:[Object(M.jsx)(Dt,{component:Object(M.jsx)("div",{className:"user-image",style:this.props.user.image_url?{backgroundImage:"url(".concat(this.props.user.image_url,")")}:{}}),user:this.props.user,position:"right center",offsetX:2,offsetY:60,onOpen:this.transition,showMessageButton:this.props.showMessageButton}),Object(M.jsxs)("div",{className:"username-message",children:[Object(M.jsxs)("div",{className:"username-time",children:[Object(M.jsx)(Dt,{component:Object(M.jsx)("h4",{children:this.props.user.username}),user:this.props.user,position:"right center",offsetX:2,offsetY:72,onOpen:this.transition,showMessageButton:this.props.showMessageButton}),Object(M.jsx)("h5",{children:this.parseDate()})]}),Object(M.jsx)("div",{className:"message-p-wrapper",children:Object(M.jsx)("div",{className:"message-content",children:this.parseLinks(this.props.message)})})]})]})}}]),n}(a.a.Component),zt=Object(u.g)(Vt),qt=function(e){Object(T.a)(n,e);var t=Object(A.a)(n);function n(e){var s;return Object(U.a)(this,n),(s=t.call(this,e)).state={messages:[]},s.bottom=a.a.createRef(),s.parseNewMessage=s.parseNewMessage.bind(Object(D.a)(s)),s}return Object(_.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.channelId;if(this.props.loading||this.subscribe(t),t&&!this.props.channel.serverId){var n=document.getElementById("dm-notification-".concat(t));n&&(n.className="dm-notification",setTimeout((function(){return e.props.removeDmNotification(t)}),200))}}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props.match.params.channelId;if(!e.loading||this.props.loading||this.messagesLoaded||this.subscribe(n),n&&e.channelId!==n&&(this.messageStr=null,this.time=null,this.lastAuthorId=null,this.messageId=null,this.setState({messages:[]}),this.messagesLoaded=!1,this.subscription&&this.subscription.unsubscribe(),this.props.loading||this.messagesLoaded||this.subscribe(n),n&&!this.props.channel.serverId)){var s=document.getElementById("dm-notification-".concat(n));s&&(s.className="dm-notification",setTimeout((function(){return t.props.removeDmNotification(n)}),200))}this.messagesLoaded&&!this.scrolled&&(this.bottom.current.scrollIntoView(),this.scrolled=!0)}},{key:"subscribe",value:function(e){var t=this;if(this.subscription=App.cable.subscriptions.subscriptions.find((function(t){return t.identifier==='{"channel":"ChatChannel","channelId":"'.concat(e,'"}')})),this.subscription)this.subscription.load({channelId:e});else{var n=this;this.subscription=App.cable.subscriptions.create({channel:"ChatChannel",channelId:e},{received:function(s){switch(s.type){case"message":t.scrolled=!1,t.parseNewMessage(s.message);break;case"messages":t.scrolled=!1,t.messagesLoaded=!0,t.setState({messages:t.parseMessages(s.messages)});break;case"error":var r=n.props.server;n.props.removeChannel(e),n.props.history.push("/channels/".concat(r.id,"/").concat(r.root_channel))}},speak:function(e){return this.perform("speak",e)},load:function(e){return this.perform("load",e)}})}}},{key:"componentWillUnmount",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"parseMessages",value:function(e){for(var t=[],n=0;n<e.length;n++){var s=e[n];0===n?(1===e.length&&t.push(Object(M.jsx)(zt,{message:s.body,user:this.props.users[s.author_id]||{},time:s.created_at,showMessageButton:!!this.props.channel.server_id,bottom:this.bottom.current},s.id)),this.messageStr=s.body,this.time=s.created_at,this.lastAuthorId=s.author_id,this.messageId=s.id):n===e.length-1?s.author_id===this.lastAuthorId?(this.messageStr=this.messageStr+"\n"+s.body,t.push(Object(M.jsx)(zt,{message:this.messageStr,user:this.props.users[this.lastAuthorId]||{},time:this.time,showMessageButton:!!this.props.channel.server_id,bottom:this.bottom.current},this.messageId))):(t.push(Object(M.jsx)(zt,{message:this.messageStr,user:this.props.users[this.lastAuthorId]||{},time:this.time,showMessageButton:!!this.props.channel.server_id,bottom:this.bottom.current},this.messageId)),t.push(Object(M.jsx)(zt,{message:s.body,user:this.props.users[s.author_id]||{},time:s.created_at,showMessageButton:!!this.props.channel.server_id,bottom:this.bottom.current},s.id)),this.messageStr=s.body,this.time=s.created_at,this.lastAuthorId=s.author_id,this.messageId=s.id):s.author_id===this.lastAuthorId?this.messageStr=this.messageStr+"\n"+s.body:(t.push(Object(M.jsx)(zt,{message:this.messageStr,user:this.props.users[this.lastAuthorId]||{},time:this.time,showMessageButton:!!this.props.channel.server_id,bottom:this.bottom.current},this.messageId)),this.messageStr=s.body,this.time=s.created_at,this.messageId=s.id,this.lastAuthorId=s.author_id)}return t}},{key:"parseNewMessage",value:function(e){if(e.author_id===this.lastAuthorId){this.messageStr=this.messageStr+"\n"+e.body;var t=Object(bt.union)([],this.state.messages);t[t.length-1]=Object(M.jsx)(zt,{message:this.messageStr,user:this.props.users[this.lastAuthorId]||{},time:this.time,showMessageButton:!!this.props.channel.server_id,bottom:this.bottom.current},this.messageId),this.setState({messages:t})}else this.messageStr=e.body,this.time=e.created_at,this.lastAuthorId=e.author_id,this.messageId=e.id,this.setState({messages:this.state.messages.concat(Object(M.jsx)(zt,{message:e.body,user:this.props.users[e.author_id]||{},time:e.created_at,showMessageButton:!!this.props.channel.server_id},e.id))})}},{key:"render",value:function(){var e=null;if("general"===this.props.channel.name)e=Object(M.jsxs)("div",{className:"welcome-message",children:[Object(M.jsx)("h2",{children:"welcome to the server, ".concat(this.props.currentUser.username,"!")}),Object(M.jsxs)("div",{children:[Object(M.jsxs)("div",{className:"server-welcome-item",children:[Object(M.jsx)("div",{className:"exclamation-icon"}),Object(M.jsxs)("p",{children:[Object(M.jsx)("strong",{children:"Rift"})," is a clone of the awesome Discord app! This site is purely for educational purposes."]})]}),Object(M.jsxs)("div",{className:"server-welcome-item",children:[Object(M.jsx)("div",{className:"comp-icon"}),Object(M.jsxs)("p",{children:[Object(M.jsx)("strong",{children:"Learn about Rift"})," by exploring the site or visiting the github repo ",Object(M.jsx)("a",{href:"https://github.com/Vor-Tech/Rift",target:"_blank",children:"here!"})]})]}),Object(M.jsxs)("div",{className:"server-welcome-item",children:[Object(M.jsx)("div",{className:"phone-icon"}),Object(M.jsxs)("p",{children:[Object(M.jsx)("strong",{children:"Reach me"})," via ",Object(M.jsx)("a",{href:"https://www.linkedin.com/in/jonathankurtz/",target:"_blank",children:"LinkedIn"})," or send me an email at ",Object(M.jsx)("a",{href:"mailto: crucio715@gmail.com",children:"crucio715@gmail.com"}),"!"]})]})]}),Object(M.jsx)("div",{className:"empty-chat empty-welcome"})]});else if(this.props.channel.name&&this.props.match.params.serverId)e=Object(M.jsx)("div",{className:"empty-chat",children:Object(M.jsxs)("h4",{children:["Welcome to the beginning of the ",Object(M.jsx)("strong",{children:"#".concat(this.props.channel.name)})," channel."]})});else if(this.props.channel.name){var t,n=this.props.channel.name.split("-");t=n[0]==this.props.currentUser.id?n[1]:n[0],e=e=Object(M.jsx)("div",{className:"empty-chat",children:Object(M.jsxs)("h4",{children:["This is the beginning of your direct message history with ",Object(M.jsx)("strong",{children:this.props.users[t]?"@".concat(this.props.users[t].username):""})]})})}return Object(M.jsxs)("div",{className:"chat-main",children:[Object(M.jsx)("div",{className:"message-wrapper",children:Object(M.jsx)("div",{className:"message-scroll-wrapper",children:Object(M.jsxs)("div",{className:"message-list",children:[e,this.state.messages,Object(M.jsx)("div",{ref:this.bottom})]})})}),Object(M.jsx)(vt,{user:this.props.currentUser,channel:this.props.channel,channelId:this.props.channelId,users:this.props.users,subscription:this.subscription})]})}}]),n}(a.a.Component),Ft="RECEIVE_DM_NOTIFICATION",Bt="REMOVE_DM_NOTIFICATION",Pt=function(e){return{type:Bt,channelId:e}},Jt=Object(u.g)(Object(o.b)((function(e,t){var n=t.match.params.channelId,s=e.entities.channels[n]||{},r=e.entities.servers[s.server_id]||{};return{currentUser:e.entities.users[e.session.id],channelId:n,users:e.entities.users,channel:s,server:r,loading:e.ui.loading}}),(function(e){return{removeDmNotification:function(t){return e(Pt(t))},removeChannel:function(t){return e(Ze(t))}}}))(qt)),Ht=function(e){Object(T.a)(n,e);var t=Object(A.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(_.a)(n,[{key:"transition",value:function(){document.getElementsByClassName("popup-content")[0].style.transform="translate(10px, 0)"}},{key:"render",value:function(){return Object(M.jsx)(Dt,{component:Object(M.jsxs)("div",{className:"server-member",children:[Object(M.jsx)("div",{className:"server-member-img",style:this.props.user.image_url?{backgroundImage:"url(".concat(this.props.user.image_url,")")}:{},children:Object(M.jsx)("div",{className:"server-member-status-indicator",style:this.props.user.online?{backgroundColor:"#43b581"}:{backgroundColor:"#747f8d"}})}),Object(M.jsx)("span",{children:this.props.user.username})]}),onOpen:this.transition,user:this.props.user,position:"left center",offsetX:-5,offsetY:this.props.admin?10:-90,showMessageButton:!0})}}]),n}(a.a.Component),Zt=Object(u.g)(Ht),Wt=function(e){Object(T.a)(n,e);var t=Object(A.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(_.a)(n,[{key:"componentWillMount",value:function(){this.props.beginLoading()}},{key:"componentDidMount",value:function(){this.props.fetchMembers(this.props.match.params.serverId).then(this.props.finishLoading)}},{key:"componentWillUpdate",value:function(e){e.server.id&&e.server.id!=this.props.match.params.serverId&&this.props.beginLoading()}},{key:"componentDidUpdate",value:function(e){e.server.id&&e.server.id!=this.props.match.params.serverId&&this.props.fetchMembers(this.props.match.params.serverId).then(this.props.finishLoading)}},{key:"render",value:function(){var e,t,n,s=this,r=this.props.members.find((function(e){return e.id===s.props.server.admin_id}));r?(e=Object(M.jsx)(Zt,{user:r,admin:!0}),r.online?(t=1,n=0):(t=0,n=1)):e=null;var a=this.props.members.filter((function(e){return e.online})),i=this.props.members.filter((function(e){return!e.online})),c=a.map((function(e,t){return e.id===s.props.server.admin_id?null:Object(M.jsx)(Zt,{user:e},t)})),o=i.map((function(e,t){return e.id===s.props.server.admin_id?null:Object(M.jsx)(Zt,{user:e},t)}));return Object(M.jsx)("div",{className:"server-members ".concat(this.props.classText),children:Object(M.jsx)("div",{className:"server-members-scroll",children:Object(M.jsxs)("div",{className:"server-members-container",children:[Object(M.jsx)("h3",{children:"ADMIN"}),e,a.length-t>0?Object(M.jsx)("h3",{children:"ONLINE\u2014".concat(a.length-t)}):null,c,i.length-n>0?Object(M.jsx)("h3",{children:"OFFLINE\u2014".concat(i.length-n)}):null,o]})})})}}]),n}(a.a.Component),Gt="BEGIN_LOADING",Yt="FINISH_LOADING",Xt=function(){return{type:Gt}},Kt=function(){return{type:Yt}},Qt=Object(u.g)(Object(o.b)((function(e,t){var n=e.entities.servers[t.match.params.serverId]||{};return{server:n,members:Object.values(e.entities.users).filter((function(e){return e.servers.includes(n.id)})).sort((function(e,t){return e.username<t.username?-1:e.username>t.username?1:0}))}}),(function(e){return{fetchMembers:function(t){return e(be(t))},beginLoading:function(){return e(Xt())},finishLoading:function(){return e(Kt())}}}))(Wt)),$t=function(e){Object(T.a)(n,e);var t=Object(A.a)(n);function n(e){var s;return Object(U.a)(this,n),(s=t.call(this,e)).state={showMembers:!0,classText:"members-transition-left"},s.toggleShowMembers=s.toggleShowMembers.bind(Object(D.a)(s)),s}return Object(_.a)(n,[{key:"toggleShowMembers",value:function(){var e=this,t=this.state.showMembers;t?(this.setState({classText:"members-transition-right"}),setTimeout((function(){return e.setState({showMembers:!t})}),200)):(this.setState({showMembers:!t}),setTimeout((function(){return e.setState({classText:"members-transition-left"})}),1))}},{key:"render",value:function(){return Object(M.jsxs)("div",{className:"chat-container",children:[Object(M.jsx)(jt,{toggleShowMembers:this.toggleShowMembers}),Object(M.jsxs)("div",{className:"chat-main-container",children:[Object(M.jsx)(Jt,{}),this.state.showMembers?Object(M.jsx)(Qt,{classText:this.state.classText}):null]})]})}}]),n}(a.a.Component),en=function(e){Object(T.a)(n,e);var t=Object(A.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(_.a)(n,[{key:"render",value:function(){return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(dt,{}),Object(M.jsx)($t,{})]})}}]),n}(a.a.Component),tn=(n(192),n(193),function(e){Object(T.a)(n,e);var t=Object(A.a)(n);function n(e){var s;return Object(U.a)(this,n),(s=t.call(this,e)).state={active:!1},s.handleMouseEnter=s.handleMouseEnter.bind(Object(D.a)(s)),s.handleMouseLeave=s.handleMouseLeave.bind(Object(D.a)(s)),s.handleDelete=s.handleDelete.bind(Object(D.a)(s)),s}return Object(_.a)(n,[{key:"handleMouseEnter",value:function(){this.setState({active:!0})}},{key:"handleMouseLeave",value:function(){this.setState({active:!1})}},{key:"handleDelete",value:function(e){var t=this;e.preventDefault();var n=this.props.channel.id,s=document.getElementById("dm-notification-".concat(n));s&&(s.className="dm-notification",setTimeout((function(){return t.props.removeDmNotification(n)}),200));var r=this;this.props.deleteDmChannel().then((function(e){e.channelId==r.props.match.params.channelId&&r.props.history.push("/channels/@me")}))}},{key:"render",value:function(){return Object(M.jsxs)(l.c,{to:"/channels/@me/".concat(this.props.channel.id),className:"channel",activeClassName:"selected",style:{height:"40px"},onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[Object(M.jsx)("div",{className:"server-member-img",style:{backgroundImage:"url(".concat(this.props.user.image_url,")"),marginLeft:0},children:Object(M.jsx)("div",{className:"server-member-status-indicator",style:this.props.user.online?{backgroundColor:"#43b581"}:{backgroundColor:"#747f8d"}})}),Object(M.jsx)("div",{className:"channel-name",children:this.props.user.username}),this.state.active?Object(M.jsx)("button",{className:"delete-channel-button",onClick:this.handleDelete}):null]})}}]),n}(a.a.Component)),nn=Object(u.g)(tn),sn=function(e){Object(T.a)(n,e);var t=Object(A.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(_.a)(n,[{key:"render",value:function(){var e=this,t=this,n=this.props.channels.map((function(n,s){var r,a=n.name.split("-");return r=a[0]==e.props.currentUser.id?a[1]:a[0],Object(M.jsx)(nn,{channel:n,user:t.props.users[r]||{},deleteDmChannel:function(){return e.props.deleteDmChannel(n.id)},removeDmNotification:e.props.removeDmNotification},s)}));return Object(M.jsx)("div",{className:"right-main",children:Object(M.jsxs)("div",{className:"channels",children:[Object(M.jsxs)(l.c,{to:"/channels/@me",exact:!0,className:"friends-link",activeClassName:"friends-link-active",children:[Object(M.jsx)("svg",{className:"friends-icon",width:"16",height:"16",viewBox:"0 0 24 24",children:Object(M.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[Object(M.jsx)("path",{fill:"currentColor",fillRule:"nonzero",d:"M0.5,0 L0.5,1.5 C0.5,5.65 2.71,9.28 6,11.3 L6,16 L21,16 L21,14 C21,11.34 15.67,10 13,10 C13,10 12.83,10 12.75,10 C8,10 4,6 4,1.5 L4,0 L0.5,0 Z M13,0 C10.790861,0 9,1.790861 9,4 C9,6.209139 10.790861,8 13,8 C15.209139,8 17,6.209139 17,4 C17,1.790861 15.209139,0 13,0 Z",transform:"translate(2 4)"}),Object(M.jsx)("path",{d:"M0,0 L24,0 L24,24 L0,24 L0,0 Z M0,0 L24,0 L24,24 L0,24 L0,0 Z M0,0 L24,0 L24,24 L0,24 L0,0 Z"})]})}),Object(M.jsx)("span",{className:"server-name",children:"Friends"}),this.props.requestCount?Object(M.jsx)("div",{className:"friends-request-counter",children:this.props.requestCount}):null]}),Object(M.jsx)("div",{className:"channel-scroll-wrapper",children:Object(M.jsx)("div",{className:"channel-overflow-container",children:Object(M.jsxs)("div",{className:"channel-list",children:[Object(M.jsx)("div",{className:"text-channels-label",children:Object(M.jsx)("div",{children:Object(M.jsx)("h3",{id:"text-channels",children:"DIRECT MESSAGES"})})}),n]})})}),Object(M.jsx)(ut,{})]})})}}]),n}(a.a.Component),rn=Object(u.g)(Object(o.b)((function(e){var t=Object.values(e.entities.friendRequests).filter((function(t){return t.friend_id===e.session.id})).length;return{currentUser:e.entities.users[e.session.id],channels:Object.values(e.entities.channels).filter((function(e){return!e.server_id})),users:e.entities.users,requestCount:t}}),(function(e){return{fetchDmChannels:function(){return e(Qe())},logout:function(){return e(k())},deleteDmChannel:function(t){return e(Ke(t))},removeDmNotification:function(t){return e(Pt(t))}}}))(sn)),an=function(e){Object(T.a)(n,e);var t=Object(A.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(_.a)(n,[{key:"render",value:function(){var e;if(this.props.channel.name){var t,n=this.props.channel.name.split("-");t=n[0]==this.props.currentUser.id?n[1]:n[0],e=this.props.users[t]?this.props.users[t].username:""}else e=this.props.currentUser.username;return Object(M.jsx)("header",{className:"chat-header",children:Object(M.jsxs)("div",{style:{display:"flex",paddingBottom:"2px"},children:[Object(M.jsx)("svg",{className:"hash",color:"#72767d",viewBox:"0 0 16 16",background:"background-1FptAZ",width:"16",height:"16",children:Object(M.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M12.93356,11.6546 C13.13504,11.87168 13.13504,12.22376 12.91352,12.41996 C12.35936,12.90956 11.72696,13.2806 11.01608,13.53128 C10.1348,13.8446 9.2054,14 8.22764,14 C7.29272,14 6.44096,13.85264 5.675,13.5554 C4.90892,13.2608 4.25264,12.84812 3.71156,12.3206 C3.16784,11.79296 2.74724,11.16068 2.44724,10.42412 C2.14736,9.68744 2,8.88392 2,8.01344 C2,7.15352 2.16344,6.35804 2.4902,5.62676 C2.81696,4.89548 3.26156,4.26068 3.82676,3.72224 C4.39196,3.18392 5.05088,2.76332 5.80892,2.45528 C6.56156,2.15264 7.37048,2 8.22764,2 C8.96684,2 9.6848,2.10716 10.37852,2.32148 C11.075,2.5358 11.69108,2.8598 12.22952,3.28844 C12.76784,3.71972 13.19648,4.2554 13.51784,4.90088 C13.83932,5.54648 14,6.30452 14,7.175 C14,7.82048 13.91168,8.39108 13.73216,8.88392 C13.55276,9.3794 13.31444,9.79196 13.01444,10.12676 C12.71444,10.46156 12.37424,10.71056 11.98844,10.87676 C11.60276,11.04284 11.19836,11.12576 10.77512,11.12576 C10.3412,11.12576 9.99296,11.024 9.73052,10.82048 C9.47072,10.61684 9.33944,10.35704 9.33944,10.04636 L9.25904,10.04636 C9.09572,10.30352 8.84648,10.54988 8.50904,10.78028 C8.1716,11.01068 7.75904,11.1284 7.26884,11.1284 C6.52952,11.1284 5.95904,10.88732 5.55716,10.40252 C5.1554,9.91772 4.95452,9.29084 4.95452,8.5142 C4.95452,8.06144 5.02952,7.61684 5.18216,7.17488 C5.3348,6.73292 5.55188,6.34184 5.83304,5.99636 C6.11432,5.65352 6.45176,5.37488 6.84284,5.16596 C7.23392,4.95704 7.66784,4.85264 8.14736,4.85264 C8.55992,4.85264 8.90816,4.93832 9.19196,5.1098 C9.47324,5.28128 9.65816,5.49284 9.74648,5.73932 L9.76256,5.73932 L9.78716,5.61884 C9.84608,5.3288 10.1336,5.09384 10.42952,5.09384 L10.80992,5.09384 C11.10596,5.09384 11.2964,5.32844 11.23556,5.618 L10.70552,8.14472 C10.68404,8.29472 10.65452,8.4608 10.61708,8.6456 C10.57964,8.82788 10.5608,8.99924 10.5608,9.16268 C10.5608,9.34484 10.59572,9.49748 10.66808,9.62336 C10.73768,9.7466 10.877,9.80828 11.08316,9.80828 C11.5064,9.80828 11.85728,9.58316 12.13592,9.13064 C12.4118,8.678 12.551,8.0726 12.551,7.30916 C12.551,6.66368 12.4412,6.09044 12.22424,5.5922 C12.00716,5.09132 11.70452,4.67348 11.31884,4.33328 C10.93316,3.99584 10.47236,3.73868 9.94196,3.5672 C9.40904,3.39572 8.82776,3.31004 8.19836,3.31004 C7.51256,3.31004 6.8858,3.43052 6.31532,3.67172 C5.74472,3.9128 5.25728,4.2476 4.8554,4.67084 C4.45364,5.09672 4.14032,5.59496 3.91796,6.17084 C3.69296,6.74408 3.58052,7.36556 3.58052,8.03252 C3.58052,8.74232 3.69836,9.38252 3.9314,9.953 C4.16444,10.52348 4.49396,11.0084 4.91708,11.4128 C5.3402,11.8172 5.8466,12.12536 6.43316,12.33968 C7.01984,12.55388 7.66796,12.66104 8.37248,12.66104 C9.25376,12.66104 10.0118,12.52184 10.6466,12.24056 C11.12396,12.03116 11.57228,11.75948 11.99228,11.42708 C12.224,11.2436 12.56144,11.2538 12.76292,11.47076 L12.93356,11.6546 Z M8.1956,6.17852 C7.93568,6.17852 7.7054,6.25352 7.5098,6.40352 C7.3142,6.55352 7.14824,6.74372 7.01156,6.97676 C6.875,7.20716 6.77324,7.4642 6.70088,7.74284 C6.63116,8.02148 6.59372,8.29208 6.59372,8.54912 C6.59372,8.67764 6.60716,8.81432 6.63392,8.96168 C6.66068,9.10628 6.7142,9.2402 6.79724,9.36608 C6.87764,9.4892 6.98468,9.59108 7.11596,9.67148 C7.24724,9.75188 7.42136,9.79208 7.63832,9.79208 C7.93292,9.79208 8.18204,9.7196 8.38832,9.575 C8.5946,9.4304 8.76332,9.24812 8.8946,9.02588 C9.02588,8.80628 9.1196,8.5652 9.18128,8.30816 C9.2402,8.051 9.2696,7.81256 9.2696,7.59824 C9.2696,7.42676 9.25352,7.25804 9.22148,7.08932 C9.18932,6.92324 9.13316,6.77324 9.05,6.63668 C8.9696,6.50276 8.85716,6.39296 8.7152,6.30716 C8.57588,6.22148 8.40188,6.17852 8.1956,6.17852 Z",transform:"translate(1.5 2)"})}),Object(M.jsx)("span",{className:"username",children:e})]})})}}]),n}(a.a.Component),cn=Object(u.g)(Object(o.b)((function(e,t){return{currentUser:e.entities.users[e.session.id],users:e.entities.users,channel:e.entities.channels[t.match.params.channelId]||{}}}))(an)),on=function(e){Object(T.a)(n,e);var t=Object(A.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(_.a)(n,[{key:"render",value:function(){return Object(M.jsx)(M.Fragment,{children:Object(M.jsxs)("div",{className:"chat-container",children:[Object(M.jsx)(cn,{}),Object(M.jsx)("div",{className:"chat-main-container",children:Object(M.jsx)(Jt,{})})]})})}}]),n}(a.a.Component),ln=(n(47),function(e){Object(T.a)(n,e);var t=Object(A.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(_.a)(n,[{key:"render",value:function(){var e=this;return Object(M.jsx)("header",{className:"chat-header",children:Object(M.jsxs)("ul",{className:"friends-button-container",children:[Object(M.jsx)("div",{className:"all"===this.props.tab?"friends-header-button-active":"friends-header-button",onClick:function(){return e.props.changeTab("all")},children:"All"}),Object(M.jsx)("div",{className:"online"===this.props.tab?"friends-header-button-active":"friends-header-button",onClick:function(){return e.props.changeTab("online")},children:"Online"}),Object(M.jsxs)("div",{className:"pending"===this.props.tab?"friends-header-button-active":"friends-header-button",onClick:function(){return e.props.changeTab("pending")},children:["Pending",this.props.requestCount?Object(M.jsx)("div",{className:"friends-request-header-counter",children:this.props.requestCount}):null]})]})})}}]),n}(a.a.Component)),un=Object(o.b)((function(e,t){return{requestCount:Object.values(e.entities.friendRequests).filter((function(t){return t.friend_id===e.session.id})).length}}))(ln),hn=function(e){Object(T.a)(n,e);var t=Object(A.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(_.a)(n,[{key:"render",value:function(){return Object(M.jsx)(W,{component:Object(M.jsx)(l.b,{to:"/channels/".concat(this.props.server.id,"/").concat(this.props.server.root_channel),onClick:function(e){return e.stopPropagation()},className:"mutual-server",style:this.props.server.icon_url?{backgroundImage:"url(".concat(this.props.server.icon_url,")"),backgroundSize:"100%"}:{backgroundSize:"100%"},onKeyDown:function(e){return e.preventDefault()}}),position:"top center",text:this.props.server.name})}}]),n}(a.a.Component),dn=function(e){Object(T.a)(n,e);var t=Object(A.a)(n);function n(e){var s;return Object(U.a)(this,n),(s=t.call(this,e)).handleClickParent=s.handleClickParent.bind(Object(D.a)(s)),s.handleReject=s.handleReject.bind(Object(D.a)(s)),s.handleAccept=s.handleAccept.bind(Object(D.a)(s)),s}return Object(_.a)(n,[{key:"handleClickParent",value:function(){var e=this;this.props.createDmChannel(this.props.user.id).then((function(t){return e.props.history.push("/channels/@me/".concat(t.channel.id))}))}},{key:"handleReject",value:function(e){e.stopPropagation(),this.props.reject()}},{key:"handleAccept",value:function(e){e.stopPropagation(),this.props.accept()}},{key:"render",value:function(){var e,t=this,n=Object(bt.intersection)(this.props.currentUser.servers,this.props.user.servers);if(n.length<=6)e=n.map((function(e,n){var s=t.props.servers[e]||{};return Object(M.jsx)(hn,{server:s},n)}));else{e=[];for(var s=0;s<5;s++){var r=n[s],a=this.props.servers[r]||{};e.push(Object(M.jsx)(hn,{server:a},s))}e.push(Object(M.jsx)("div",{className:"extra-servers",children:"+".concat(n.length-5)},n.length))}return Object(M.jsxs)("li",{className:"friend-container",onClick:this.handleClickParent,style:this.props.first?{borderColor:"transparent"}:{},children:[Object(M.jsxs)("div",{className:"friend-name-container",children:[Object(M.jsx)("div",{className:"friend-icon",style:this.props.user.image_url?{backgroundImage:"url(".concat(this.props.user.image_url,")")}:{}}),Object(M.jsx)("h4",{children:this.props.user.username})]}),Object(M.jsxs)("div",{className:"friend-status-container",children:[Object(M.jsx)("div",{className:"friends-status-indicator",style:this.props.user.online?{backgroundColor:"#43b581"}:{backgroundColor:"#747f8d"}}),Object(M.jsx)("h4",{children:this.props.status})]}),Object(M.jsx)("div",{className:"mutual-servers-container",children:e}),Object(M.jsxs)("div",{className:"friend-accept-reject",children:["Incoming friend request"===this.props.status?Object(M.jsx)(W,{component:Object(M.jsx)("button",{className:"accept-friend",onClick:this.handleAccept}),position:"top center",text:"Accept"}):null,Object(M.jsx)(W,{component:Object(M.jsx)("button",{className:this.props.status.includes("request")?"reject-friend":"remove-friend",onClick:this.handleReject}),position:"top center",text:this.props.status.includes("request")?this.props.status.includes("Outgoing")?"Cancel":"Ignore":"Remove Friend"})]})]})}}]),n}(a.a.Component),pn=Object(u.g)(dn),jn=function(e){Object(T.a)(n,e);var t=Object(A.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(_.a)(n,[{key:"render",value:function(){var e=this,t=this.props.friends.map((function(t,n){return Object(M.jsx)(pn,{user:t,reject:function(){return e.props.deleteFriend(t.id)},createDmChannel:e.props.createDmChannel,status:t.online?"Online":"Offline",first:0===n,currentUser:e.props.currentUser,servers:e.props.servers},n)}));return Object(M.jsx)("div",{className:"friends-scroll-wrapper",children:Object(M.jsxs)("ul",{children:[t,0===t.length?this.props.allFriends?Object(M.jsxs)("div",{className:"empty-container",children:[Object(M.jsx)("div",{className:"no-friends empty"}),Object(M.jsx)("h4",{children:"Wumpus has no friends. You could though!"})]}):Object(M.jsxs)("div",{className:"empty-container",children:[Object(M.jsx)("div",{className:"online empty"}),Object(M.jsx)("h4",{children:"No one's around to play with Wumpus."})]}):null]})})}}]),n}(a.a.Component),bn=Object(o.b)((function(e){return{friends:e.entities.friends.map((function(t){return e.entities.users[t]||{}})).sort((function(e,t){return e.username<t.username?-1:e.username>t.username?1:0})),currentUser:e.entities.users[e.session.id],servers:e.entities.servers,allFriends:!0}}),(function(e){return{deleteFriend:function(t){return e(Ut(t))},createDmChannel:function(t){return e(et(t))}}}))(jn),mn=function(e){Object(T.a)(n,e);var t=Object(A.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(_.a)(n,[{key:"render",value:function(){var e=this,t=this.props.incomingRequests.map((function(t,n){var s=e.props.users[t.user_id];return Object(M.jsx)(pn,{user:s,status:"Incoming friend request",accept:function(){return e.props.acceptFriendRequest(t)},reject:function(){return e.props.deleteFriendRequest(t)},createDmChannel:e.props.createDmChannel,first:0===n,currentUser:e.props.currentUser,servers:e.props.servers},n)})),n=this.props.outgoingRequests.map((function(n,s){var r=e.props.users[n.friend_id];return Object(M.jsx)(pn,{user:r,status:"Outgoing friend request",accept:function(){return e.props.acceptFriendRequest(n)},reject:function(){return e.props.deleteFriendRequest(n)},createDmChannel:e.props.createDmChannel,first:0===s&&t.empty,currentUser:e.props.currentUser,servers:e.props.servers},s)}));return Object(M.jsx)("div",{className:"friends-scroll-wrapper",children:Object(M.jsxs)("ul",{children:[t,n,0===t.length&&0===n.length?Object(M.jsxs)("div",{className:"empty-container",children:[Object(M.jsx)("div",{className:"pending empty"}),Object(M.jsx)("h4",{children:"There are no pending friend requests. Here's a Wumpus for now."})]}):null]})})}}]),n}(a.a.Component),vn=Object(o.b)((function(e){var t=Object.values(e.entities.friendRequests).filter((function(t){return t.user_id===e.session.id})),n=Object.values(e.entities.friendRequests).filter((function(t){return t.friend_id===e.session.id}));return{users:e.entities.users,incomingRequests:n,outgoingRequests:t,currentUser:e.entities.users[e.session.id],servers:e.entities.servers}}),(function(e){return{fetchFriendRequests:function(){return e(Mt())},acceptFriendRequest:function(t){return e(Lt(t))},deleteFriendRequest:function(t){return e(Rt(t))},createDmChannel:function(t){return e(et(t))}}}))(mn),fn=Object(o.b)((function(e,t){return{friends:e.entities.friends.map((function(t){return e.entities.users[t]||{}})).filter((function(e){return e.online})),currentUser:e.entities.users[e.session.id],servers:e.entities.servers}}),(function(e){return{fetchFriends:function(){return e(Et())},deleteFriend:function(t){return e(Ut(t))},createDmChannel:function(t){return e(et(t))}}}))(jn),On=function(e){Object(T.a)(n,e);var t=Object(A.a)(n);function n(e){var s;return Object(U.a)(this,n),(s=t.call(this,e)).state={tab:"all"},s.changeTab=s.changeTab.bind(Object(D.a)(s)),s}return Object(_.a)(n,[{key:"changeTab",value:function(e){this.setState({tab:e})}},{key:"render",value:function(){var e;return e="all"===this.state.tab?Object(M.jsx)(bn,{}):"online"===this.state.tab?Object(M.jsx)(fn,{}):Object(M.jsx)(vn,{}),Object(M.jsx)(M.Fragment,{children:Object(M.jsxs)("div",{className:"chat-container",children:[Object(M.jsx)(un,{changeTab:this.changeTab,tab:this.state.tab}),Object(M.jsx)("div",{className:"chat-main-container",children:Object(M.jsxs)("div",{className:"friends-list",children:[Object(M.jsxs)("div",{className:"friends-table-header",children:[Object(M.jsx)("div",{className:"friends-column friends-name",children:"Name"}),Object(M.jsx)("div",{className:"friends-column-separator"}),Object(M.jsx)("div",{className:"friends-column friends-status",children:"Status"}),Object(M.jsx)("div",{className:"friends-column-separator"}),Object(M.jsx)("div",{className:"friends-column friends-servers",children:"Mutual Servers"}),Object(M.jsx)("div",{className:"friends-column-separator"}),Object(M.jsx)("div",{className:"friends-actions"})]}),e]})})]})})}}]),n}(a.a.Component),xn=function(e){Object(T.a)(n,e);var t=Object(A.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(_.a)(n,[{key:"render",value:function(){return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(rn,{}),Object(M.jsxs)(u.d,{children:[Object(M.jsx)(u.b,{path:"/channels/@me/:channelId",component:on}),Object(M.jsx)(u.b,{path:"/",component:On})]})]})}}]),n}(a.a.Component),gn=(n(194),function(e){return Object(M.jsxs)("div",{className:"loading-screen ".concat(e.classText),children:[Object(M.jsxs)("video",{height:"200",width:"200",autoPlay:!0,loop:!0,muted:!0,children:[Object(M.jsx)("source",{src:"https://s3.amazonaws.com/discors-dev/Main/loading.webm",type:"video/webm"}),Object(M.jsx)("source",{src:"https://s3.amazonaws.com/discors-dev/Main/loading.mp4",type:"video/mp4"}),Object(M.jsx)("img",{alt:"",src:"https://s3.amazonaws.com/discors-dev/Main/loading.png"})]}),Object(M.jsx)("h5",{children:e.text})]})}),Cn=function(e){Object(T.a)(n,e);var t=Object(A.a)(n);function n(e){var s;return Object(U.a)(this,n),(s=t.call(this,e)).state={loading:!1,class:""},s}return Object(_.a)(n,[{key:"componentDidMount",value:function(){var e=this;document.body.style.overflow="hidden",this.props.fetchCurrentUserData().then((function(){e.setState({loading:"ready"}),e.props.finishLoading(),setTimeout((function(){e.setState({class:"hidden"}),setTimeout((function(){e.setState({loading:!1,class:""})}),200)}),1e3)}))}},{key:"render",value:function(){var e=this.state.loading;return Object(M.jsxs)("div",{className:"main-body",children:[this.state.loading?Object(M.jsx)(gn,{text:e,classText:this.state.class}):null,Object(M.jsx)(Se,{}),Object(M.jsxs)(u.d,{children:[Object(M.jsx)(u.b,{path:"/channels/@me/:channelId",component:xn}),Object(M.jsx)(u.b,{path:"/channels/@me",component:xn}),Object(M.jsx)(u.b,{path:"/channels/:serverId/:channelId",component:en}),Object(M.jsx)(u.b,{path:"/channels/:serverId",component:en}),Object(M.jsx)(u.b,{path:"/",component:xn})]})]})}}]),n}(a.a.Component),yn=Object(o.b)((function(e){return{currentUser:e.entities.users[e.session.id]}}),(function(e){return{fetchCurrentUserData:function(){return e(S())},receiveDmNotification:function(t){return e(function(e){return{type:Ft,notification:e}}(t))},receiveUser:function(t){return e(function(e){return{type:j,user:e}}(t))},receiveChannel:function(t){return e(He(t))},receiveFriendRequest:function(t){return e(St(t))},removeFriendRequest:function(t){return e(kt(t))},removeFriend:function(t){return e(wt(t))},receiveFriend:function(t){return e(Nt(t))},beginLoading:function(){return e(Xt())},finishLoading:function(){return e(Kt())}}}))(Cn),Nn=function(){return Object(M.jsxs)(u.d,{children:[Object(M.jsx)(P,{path:"/login",component:I}),Object(M.jsx)(P,{path:"/register",component:R}),Object(M.jsx)(J,{path:"/channels",component:yn}),Object(M.jsx)(u.b,{path:"/",component:q})]})},Sn=function(e){var t=e.store;return Object(M.jsx)(o.a,{store:t,children:Object(M.jsx)(l.a,{children:Object(M.jsx)(Nn,{})})})},kn=n(83),wn=n(82),Mn=n.n(wn),En=n(14),In=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(t),n.type){case b:return Ee()({},t,n.currentUserData.users);case p:return Ee()({},t,Object(s.a)({},n.currentUser.data.user.id,n.currentUser.data.user));case j:return Ee()({},t,Object(s.a)({},n.user.id,n.user));case ae:return Ee()({},t,n.users);case Ct:return Ee()({},t,n.friendData.users);case le:return(e=Ee()({},t))[n.userId].servers=e[n.userId].servers.filter((function(e){return e!==n.serverId})),e;case ie:return(e=Ee()({},t))[n.userId].servers.includes(n.server.id)||e[n.userId].servers.push(n.server.id),e;default:return t}},Ln=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case b:return t.currentUserData.servers||{};case re:return Ee()({},e,t.servers);case ie:return Ee()({},e,Object(s.a)({},t.server.id,t.server));case le:var n=Ee()({},e);return delete n[t.serverId],n;default:return e}},Rn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case b:return t.currentUserData.channels||{};case ze:return Ee()({},e,t.channels);case qe:return Ee()({},e,Object(s.a)({},t.channel.id,t.channel));case Fe:var n=Ee()({},e);return delete n[t.channelId],n;default:return e}},Un=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case b:return t.currentUserData.friend_requests||{};case ft:return t.friendRequests||{};case Ot:return Ee()({},e,Object(s.a)({},t.friendRequest.id,t.friendRequest));case xt:var n=Ee()({},e);return delete n[t.requestId],n;default:return e}},_n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case b:return t.currentUserData.friends;case Ct:return t.friendData.friends;case yt:return Object(bt.union)([],e,t.friend);case gt:var n=Object(bt.union)([],e);return n.filter((function(e){return e!==t.friendId}));default:return e}},Dn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case b:return t.currentUserData.voice_channels||{};case tt:return Ee()({},e,t.voiceChannels);case nt:return Ee()({},e,Object(s.a)({},t.voiceChannel.id,t.voiceChannel));case st:var n=Ee()({},e);return delete n[t.voiceChannelId],n;default:return e}},Tn=Object(En.c)({users:In,servers:Ln,channels:Rn,friendRequests:Un,friends:_n,voiceChannels:Dn}),An=Object(En.c)({loading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case Gt:return!0;case Yt:return!1;default:return e}}}),Vn=Object.freeze({id:null}),zn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vn,t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),console.log(1,t),console.log(2,e),t.type){case b:return{id:t.currentUserData.currentUserId};case p:return{id:t.currentUser.data.user.id};case m:return Vn;default:return e}},qn=Object(En.c)({session:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case v:return t.errors;case p:case f:return[];default:return e}},server:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case ce:return t.errors;case ie:case oe:return[];default:return e}},channel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case Be:return t.errors;case qe:case nt:case Pe:return[];default:return e}}}),Fn=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(t),n.type){case Ft:return t[n.notification.channelId]?((e=Ee()({},t))[n.notification.channelId].count++,e):Ee()({},t,Object(s.a)({},n.notification.channelId,Ee()(n.notification,{count:1})));case Bt:return delete(e=Ee()({},t))[n.channelId],e;default:return t}},Bn=Object(En.c)({dm:Fn}),Pn=Object(En.c)({entities:Tn,session:zn,errors:qn,ui:An,notifications:Bn}),Jn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(kn.a)({reducer:Pn,preloadedState:e,middleware:function(e){return e().concat(Mn.a)}})};document.addEventListener("DOMContentLoaded",(function(){var e;if(window.currentUser){var t={session:{id:window.currentUser.id},entities:{users:Object(s.a)({},window.currentUser.id,window.currentUser)}};e=Jn(t),delete window.currentUser}else e=Jn();var n=document.getElementById("root");c.a.render(Object(M.jsx)(Sn,{store:e}),n)}))},23:function(e,t,n){},47:function(e,t,n){}},[[195,1,2]]]);
//# sourceMappingURL=main.22d448d9.chunk.js.map