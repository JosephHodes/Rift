(this.webpackJsonpundefined=this.webpackJsonpundefined||[]).push([[0],{109:function(e,t,s){},112:function(e,t,s){},190:function(e,t,s){"use strict";s.r(t);var n=s(10),r=s(1),a=s.n(r),i=s(24),c=s.n(i),o=s(8),l=s(7),u=s(13),h=s(9),d=s.n(h),p="RECEIVE_CURRENT_USER",b="RECEIVE_USER",j="RECEIVE_CURRENT_USER_DATA",m="LOGOUT_CURRENT_USER",v="RECEIVE_SESSION_ERRORS",f="REMOVE_SESSION_ERRORS",O=function(e){return{type:p,currentUser:e}},x=function(e){return{type:v,errors:e}},g=function(e){return{type:f}},C=function(e){return function(t){return function(e){return d()({method:"POST",url:"localhost:3000/api/users",data:{user:e}})}(e).then((function(e){return t(O(e))}),(function(e){return t(x(e.responseJSON))}))}},N=function(e){return function(t){return function(e){return d()({url:"localhost:3000/api/users/".concat(e.get("user[id]")),method:"PATCH",data:e,contentType:!1,processData:!1})}(e).then((function(e){return t(O(e))}),(function(e){return t(x(e.responseJSON))}))}},y=function(e){return function(t){return function(e){return d()({method:"POST",url:"localhost:3000/api/session",data:{user:e}})}(e).then((function(e){return t(O(e))}),(function(e){return t(x(e.responseJSON||e))}))}},S=function(){return function(e){return d()({method:"GET",url:"localhost:3000/api/users/data"}).then((function(t){return e({type:j,currentUserData:t})}))}},k=function(){return function(e){return d()({method:"DELETE",url:"localhost:3000/api/session"}).then((function(t){return e({type:m})}))}},E=s(2),w=s(3),I=s(6),M=s(5),L=s(4),R=(s(109),s(0)),_=function(e){Object(M.a)(s,e);var t=Object(L.a)(s);function s(e){var n;return Object(E.a)(this,s),(n=t.call(this,e)).state={username:"",password:""},n.handleSubmit=n.handleSubmit.bind(Object(I.a)(n)),n.loginAsGuest=n.loginAsGuest.bind(Object(I.a)(n)),n.loginAsGuestHelper=n.loginAsGuestHelper.bind(Object(I.a)(n)),n}return Object(w.a)(s,[{key:"componentDidMount",value:function(){document.body.style.overflow="hidden",this.nameInput.focus()}},{key:"update",value:function(e){var t=this;return function(s){return t.setState(Object(n.a)({},e,s.currentTarget.value))}}},{key:"loginAsGuest",value:function(e){var t=this;e.preventDefault();var s="hodor".split(""),n="hodorhodor".split(""),r=document.getElementById("session-submit");this.setState({username:"",password:""},(function(){return t.loginAsGuestHelper(s,n,r)}))}},{key:"loginAsGuestHelper",value:function(e,t,s){var n=this;e.length>0?this.setState({username:this.state.username+e.shift()},(function(){setTimeout((function(){return n.loginAsGuestHelper(e,t,s)}),50)})):t.length>0?this.setState({password:this.state.password+t.shift()},(function(){setTimeout((function(){return n.loginAsGuestHelper(e,t,s)}),50)})):s.click()}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.props.login(this.state).then((function(){return t.props.history.push("/channels/@me")}))}},{key:"render",value:function(){var e=this;return Object(R.jsxs)("div",{className:"login-body",children:[Object(R.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Login/background.jpg",alt:"",className:"background-image"}),Object(R.jsx)("form",{action:"",className:"login-form",onSubmit:this.handleSubmit,children:Object(R.jsxs)("div",{className:"login-form-inner",children:[Object(R.jsx)("h3",{className:"form-header",children:"Welcome back!"}),Object(R.jsx)("h4",{className:"login-form-subtitle",children:"We're so excited to see you again!"}),Object(R.jsxs)("div",{className:"form-input",children:[Object(R.jsxs)("div",{className:"email-container",children:[Object(R.jsxs)("div",{className:"session-error-wrapper",children:[Object(R.jsx)("h5",{className:"email-label ".concat(this.props.errors[0]?"session-error-label":""),children:"USERNAME"}),Object(R.jsx)("span",{className:"session-errors",children:this.props.errors[0]?"- ".concat(this.props.errors[0]):""})]}),Object(R.jsx)("input",{type:"text",value:this.state.username,onChange:this.update("username"),className:this.props.errors[0]?"session-error":"session-input",ref:function(t){e.nameInput=t}})]}),Object(R.jsxs)("div",{children:[Object(R.jsx)("h5",{className:"password-label ".concat(this.props.errors[0]?"session-error-label":""),children:"PASSWORD"}),Object(R.jsx)("input",{type:"password",value:this.state.password,onChange:this.update("password"),id:"password-container",className:this.props.errors[0]?"session-error":"session-input"})]}),Object(R.jsx)("div",{className:"forgot-password-container",children:Object(R.jsx)("button",{type:"button",id:"demo",onClick:this.loginAsGuest,children:"Demo User"})}),Object(R.jsx)("button",{id:"session-submit",children:"Login"}),Object(R.jsxs)("div",{className:"need-account",children:[Object(R.jsx)("span",{children:"Need an account?"}),Object(R.jsx)(l.b,{to:"/register",onClick:function(){return e.props.removeErrors()},children:"Register"})]})]})]})})]})}}]),s}(a.a.Component),U=Object(o.b)((function(e){return{errors:e.errors.session}}),(function(e){return console.log("dispatch:",e),{removeErrors:function(){return e(g())},login:function(t){return e(y(t))}}}))(_),D=function(e){Object(M.a)(s,e);var t=Object(L.a)(s);function s(e){var n;return Object(E.a)(this,s),(n=t.call(this,e)).state={username:"",password:"",email:""},n.handleSubmit=n.handleSubmit.bind(Object(I.a)(n)),n}return Object(w.a)(s,[{key:"componentDidMount",value:function(){document.body.style="overflow: hidden;",this.nameInput.focus()}},{key:"componentWillUnmount",value:function(){document.body.removeAttribute("style")}},{key:"update",value:function(e){var t=this;return function(s){return t.setState(Object(n.a)({},e,s.currentTarget.value))}}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.props.signup(this.state).then((function(){return t.props.history.push("/channels/@me")}))}},{key:"render",value:function(){var e=this,t=this.props.errors.find((function(e){return e.includes("Email")})),s=this.props.errors.find((function(e){return e.includes("Username")})),n=this.props.errors.find((function(e){return e.includes("Password")}));return Object(R.jsxs)("div",{className:"login-body",children:[Object(R.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Login/background.jpg",alt:"",className:"background-image"}),Object(R.jsx)("form",{action:"",className:"login-form",onSubmit:this.handleSubmit,children:Object(R.jsxs)("div",{className:"login-form-inner",children:[Object(R.jsx)("h3",{className:"form-header",children:"Create an account"}),Object(R.jsxs)("div",{className:"form-input",children:[Object(R.jsxs)("div",{className:"email-container",children:[Object(R.jsxs)("div",{className:"session-error-wrapper",children:[Object(R.jsx)("h5",{className:"email-label ".concat(t?"session-error-label":""),children:"EMAIL"}),Object(R.jsx)("span",{className:"session-errors",children:t?"-  ".concat(t):""})]}),Object(R.jsx)("input",{type:"email",value:this.state.email,onChange:this.update("email"),className:t?"session-error":"session-input",ref:function(t){e.nameInput=t}})]}),Object(R.jsxs)("div",{children:[Object(R.jsxs)("div",{className:"session-error-wrapper",children:[Object(R.jsx)("h5",{className:"email-label ".concat(s?"session-error-label":""),children:"USERNAME"}),Object(R.jsx)("span",{className:"session-errors",children:s?"-  ".concat(s):""})]}),Object(R.jsx)("input",{type:"text",value:this.state.username,onChange:this.update("username"),className:s?"session-error":"session-input"})]}),Object(R.jsxs)("div",{children:[Object(R.jsxs)("div",{className:"session-error-wrapper",children:[Object(R.jsx)("h5",{className:"email-label ".concat(n?"session-error-label":""),children:"PASSWORD"}),Object(R.jsx)("span",{className:"session-errors",children:n?"-  ".concat(n):""})]}),Object(R.jsx)("input",{type:"password",value:this.state.password,onChange:this.update("password"),className:n?"session-error":"session-input",id:"password-container"})]}),Object(R.jsx)("div",{className:"forgot-password-container"}),Object(R.jsx)("button",{id:"session-submit",children:"Register"}),Object(R.jsx)("div",{className:"need-account",children:Object(R.jsx)(l.b,{to:"/login",onClick:function(){return e.props.removeErrors()},children:"Already have an account?"})})]})]})})]})}}]),s}(a.a.Component),T=Object(o.b)((function(e){return{errors:e.errors.session}}),(function(e){return console.log("dispatch:",e),{signup:function(t){return e(C(t))},removeErrors:function(){return e(g())}}}))(D),A=(s(112),function(e){Object(M.a)(s,e);var t=Object(L.a)(s);function s(e){var n;return Object(E.a)(this,s),(n=t.call(this,e)).handleLogin=n.handleLogin.bind(Object(I.a)(n)),n}return Object(w.a)(s,[{key:"componentDidMount",value:function(){document.body.style.overflow="visible"}},{key:"handleLogin",value:function(){var e=this;this.props.login().then((function(){return e.props.history.push("/channels/@me")}))}},{key:"render",value:function(){return Object(R.jsxs)("div",{className:"splash-body",children:[Object(R.jsx)("header",{className:"splash-header",children:Object(R.jsxs)("nav",{className:"splash-nav",children:[Object(R.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/a/a7/React-icon.svg",className:"discorLogo",alt:""}),Object(R.jsxs)("ul",{className:"rightNav",children:[Object(R.jsx)("li",{children:Object(R.jsx)("a",{href:"https://github.com/jeffdeliso",target:"_blank",children:Object(R.jsx)("i",{className:"fab fa-github"})})}),Object(R.jsx)("li",{children:Object(R.jsx)("a",{href:"https://www.linkedin.com/in/jdeliso/",target:"_blank",children:Object(R.jsx)("i",{className:"fab fa-linkedin"})})}),Object(R.jsx)("li",{children:Object(R.jsx)("a",{href:"https://angel.co/jeffreydeliso",target:"_blank",children:Object(R.jsx)("i",{className:"fab fa-angellist"})})}),Object(R.jsx)("li",{children:Object(R.jsx)("a",{href:"https://www.jeffdeliso.com",target:"_blank",children:Object(R.jsx)("i",{className:"fas fa-user-circle"})})}),Object(R.jsx)("li",{children:Object(R.jsx)(l.b,{to:"/login",className:"openButton",children:this.props.currentUserId?"Open":"Login"})})]})]})}),Object(R.jsxs)("section",{className:"splash-main",children:[Object(R.jsxs)("div",{className:"content ",children:[Object(R.jsx)("h1",{children:"It's time to ditch Discord."}),Object(R.jsx)("p",{children:"All-in-one voice and text chat for gamers that's free, secure, and works on both your desktop and phone. Stop paying for TeamSpeak servers and hassling with Skype. Simplify your life."}),Object(R.jsxs)("div",{className:"buttons",children:[Object(R.jsx)("button",{className:"downloadMac",onClick:this.handleLogin,children:"Try the Demo"}),Object(R.jsx)("a",{href:"https://www.github.com/xero-lib",target:"_blank",className:"open-discors-top",children:"About the Developer"})]})]}),Object(R.jsxs)("div",{className:"images",children:[Object(R.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/dot.svg",alt:"",className:"pic dot1"}),Object(R.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/dot.svg",alt:"",className:"pic dot2"}),Object(R.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/dot.svg",alt:"",className:"pic dot3"}),Object(R.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/dot.svg",alt:"",className:"pic dot4"}),Object(R.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/x.svg",alt:"",className:"pic x1"}),Object(R.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/x.svg",alt:"",className:"pic x2"}),Object(R.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/circle.svg",alt:"",className:"pic circle1"}),Object(R.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/circle.svg",alt:"",className:"pic circle2"}),Object(R.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/triangle.svg",alt:"",className:"pic triangle1"}),Object(R.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/triangle.svg",alt:"",className:"pic triangle2"}),Object(R.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/square.svg",alt:"",className:"pic square2"}),Object(R.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/square.svg",alt:"",className:"pic square1"}),Object(R.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/floppy.svg",alt:"",className:"pic floppy"}),Object(R.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/bomb.svg",alt:"",className:"pic bomb"}),Object(R.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/question.svg",alt:"",className:"pic question"}),Object(R.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/speaker.svg",alt:"",className:"pic speaker"}),Object(R.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/flask.svg",alt:"",className:"pic flask"}),Object(R.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/computer.svg",alt:"",className:"pic computer"}),Object(R.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/laptop.svg",alt:"",className:"pic laptop"}),Object(R.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/controller.svg",alt:"",className:"pic controller"}),Object(R.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/iphone.svg",alt:"",className:"pic iphone"}),Object(R.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/android.svg",alt:"",className:"pic android"}),Object(R.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/coin.svg",alt:"",className:"pic coin1"}),Object(R.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/coin.svg",alt:"",className:"pic coin2"}),Object(R.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/headphones.svg",alt:"",className:"pic headphones"})]})]}),Object(R.jsxs)("footer",{className:"splash-footer",children:[Object(R.jsx)("img",{src:"https://s3.amazonaws.com/discors-dev/Splash/underline.svg",alt:"",className:"underline"}),Object(R.jsxs)("div",{className:"footer-content",children:[Object(R.jsxs)("div",{children:[Object(R.jsx)("h2",{children:"Ready to try Rift? It's free!"}),Object(R.jsx)("h3",{children:"JOIN OVER 0 PLAYERS TODAY"})]}),Object(R.jsx)(l.b,{to:"/register",className:"open-discors-bottom",children:this.props.currentUserId?"Open Discors":"Sign Up Now"})]})]})]})}}]),s}(a.a.Component)),z=Object(o.b)((function(e){return{currentUserId:e.session.id}}),(function(e){return{login:function(){return e(y({username:"hodor",password:"hodorhodor"}))}}}))(A),V=s(50),q=function(e){return{loggedIn:Boolean(e.session.id)}},F=Object(u.g)(Object(o.b)(q)((function(e){var t=e.component,s=e.path,n=e.loggedIn,r=e.exact;return Object(R.jsx)(u.b,{path:s,exact:r,render:function(e){return n?Object(R.jsx)(u.a,{to:"/channels/@me"}):Object(R.jsx)(t,Object(V.a)({},e))}})}))),P=Object(u.g)(Object(o.b)(q)((function(e){var t=e.component,s=e.path,n=e.loggedIn,r=e.exact;return Object(R.jsx)(u.b,{path:s,exact:r,render:function(e){return n?Object(R.jsx)(t,Object(V.a)({},e)):Object(R.jsx)(u.a,{to:"/"})}})}))),B=s(39),J=s(38),G=s(37),H=function(e){Object(M.a)(s,e);var t=Object(L.a)(s);function s(){return Object(E.a)(this,s),t.apply(this,arguments)}return Object(w.a)(s,[{key:"render",value:function(){return Object(R.jsx)(G.a,{trigger:this.props.component,position:this.props.position,on:"hover",overlayStyle:{width:"auto",backgroundColor:"black"},arrowStyle:{backgroundColor:"black",zIndex:4},contentStyle:{zIndex:4,width:"auto",whiteSpace:"nowrap",fontFamily:"main3",borderRadius:5,color:"#fff",backgroundColor:"black",border:"none",fontSize:"14px",display:"flex",padding:"8px 10px",pointerEvents:"none"},children:Object(R.jsx)("div",{children:this.props.text})})}}]),s}(a.a.Component),W=function(e){Object(M.a)(s,e);var t=Object(L.a)(s);function s(){return Object(E.a)(this,s),t.apply(this,arguments)}return Object(w.a)(s,[{key:"render",value:function(){return Object(R.jsx)(H,{component:Object(R.jsx)(l.c,{to:"/channels/".concat(this.props.server.id,"/").concat(this.props.server.root_channel),className:"home-icon server",activeClassName:"serverSelected",style:this.props.server.icon_url?{backgroundImage:"url(".concat(this.props.server.icon_url,")"),backgroundSize:"100%"}:{backgroundSize:"180%"},onKeyDown:function(e){return e.preventDefault()},children:Object(R.jsx)("div",{className:"server-active-icon"})}),position:"right center",text:this.props.server.name})}}]),s}(a.a.Component),Z=s(20),Y=s.n(Z),X=function(e){Object(M.a)(s,e);var t=Object(L.a)(s);function s(e){var n;return Object(E.a)(this,s),(n=t.call(this,e)).state={name:"",avatarFile:null,avatarUrl:null},n.handleSubmit=n.handleSubmit.bind(Object(I.a)(n)),n.handleRedirect=n.handleRedirect.bind(Object(I.a)(n)),n.handleFile=n.handleFile.bind(Object(I.a)(n)),n.handleRemove=n.handleRemove.bind(Object(I.a)(n)),n.update=n.update.bind(Object(I.a)(n)),n}return Object(w.a)(s,[{key:"componentDidMount",value:function(){this.nameInput.focus()}},{key:"update",value:function(e){this.setState({name:e.currentTarget.value})}},{key:"handleRedirect",value:function(e){this.props.closeModal(),this.props.history.push("/channels/".concat(e.server.id,"/").concat(e.server.root_channel))}},{key:"handleFile",value:function(e){var t=this,s=e.currentTarget.files[0],n=new FileReader;n.onloadend=function(){t.setState({avatarFile:s,avatarUrl:n.result})},s&&n.readAsDataURL(s)}},{key:"handleRemove",value:function(e){this.setState({avatarFile:null,avatarUrl:null})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=new FormData;t.append("server[name]",this.state.name),this.state.avatarFile&&t.append("server[icon]",this.state.avatarFile),this.props.createServer(t).then(this.handleRedirect)}},{key:"render",value:function(){var e=this;return Object(R.jsxs)("form",{className:"create-server-form",onSubmit:this.handleSubmit,children:[Object(R.jsxs)("div",{className:"create-server-form-top",children:[Object(R.jsx)("h5",{children:"CREATE YOUR SERVER"}),Object(R.jsx)("p",{children:"By creating a server you will have access to free text chat to use amongst your friends."}),Object(R.jsxs)("div",{className:"create-server-input-container",children:[Object(R.jsxs)("div",{className:"create-server-form-input",children:[Object(R.jsxs)("label",{id:this.props.errors[0]?"server-errors":"",children:["SERVER NAME",Object(R.jsx)("span",{children:this.props.errors[0]?"  -  ".concat(this.props.errors[0]):""})]}),Object(R.jsx)("input",{type:"text",placeholder:"Enter a server name",onChange:this.update,ref:function(t){e.nameInput=t}})]}),Object(R.jsxs)("div",{className:"avatar-container",id:"icon-container",children:[Object(R.jsxs)("div",{className:"avatar-wrapper",id:"icon-wrapper",style:this.state.avatarUrl?{backgroundImage:"url(".concat(this.state.avatarUrl,")")}:{backgourndColor:"#7289da"},children:[Object(R.jsx)("p",{children:"CHANGE \n ICON"}),Object(R.jsx)("input",{type:"file",onChange:this.handleFile,onKeyDown:function(e){return e.preventDefault()},multipleaccept:".jpg,.jpeg,.png,.gif"}),Object(R.jsx)("div",{className:"add-file-icon"})]}),this.state.avatarUrl?Object(R.jsx)("button",{className:"remove-avatar-button",type:"button",onClick:this.handleRemove,children:"REMOVE"}):null]})]})]}),Object(R.jsx)("div",{className:"create-server-form-bottom",children:Object(R.jsx)("button",{children:"Create"})})]})}}]),s}(a.a.Component),K=Object(u.g)(X),Q=function(e){Object(M.a)(s,e);var t=Object(L.a)(s);function s(e){var n;return Object(E.a)(this,s),(n=t.call(this,e)).state={name:""},n.handleSubmit=n.handleSubmit.bind(Object(I.a)(n)),n.handleRedirect=n.handleRedirect.bind(Object(I.a)(n)),n.update=n.update.bind(Object(I.a)(n)),n}return Object(w.a)(s,[{key:"componentDidMount",value:function(){this.nameInput.focus()}},{key:"update",value:function(e){this.setState({name:e.currentTarget.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.joinServer(this.state,this.props.currentUserId).then(this.handleRedirect)}},{key:"handleRedirect",value:function(e){this.props.closeModal(),this.props.history.push("/channels/".concat(e.server.id,"/").concat(e.server.root_channel))}},{key:"render",value:function(){var e=this;return Object(R.jsxs)("form",{className:"create-server-form",onSubmit:this.handleSubmit,children:[Object(R.jsxs)("div",{className:"create-server-form-top",children:[Object(R.jsx)("h5",{id:"join-server-header",children:"JOIN A SERVER"}),Object(R.jsx)("p",{id:"join-server-message",children:"Enter a server name below to join an existing server."}),Object(R.jsxs)("div",{className:"create-server-form-input",children:[Object(R.jsxs)("label",{id:this.props.errors[0]?"server-errors":"",children:["SERVER NAME",Object(R.jsx)("span",{children:this.props.errors[0]?"  -  ".concat(this.props.errors[0]):""})]}),Object(R.jsx)("input",{id:"join-server-text-input",type:"text",placeholder:"Enter a server name",onChange:this.update,ref:function(t){e.nameInput=t}})]})]}),Object(R.jsx)("div",{className:"create-server-form-bottom",style:{marginTop:"105px"},children:Object(R.jsx)("button",{id:"join-server-button",children:"Join"})})]})}}]),s}(a.a.Component),$=Object(u.g)(Q),ee=function(e){Object(M.a)(s,e);var t=Object(L.a)(s);function s(e){var n;return Object(E.a)(this,s),(n=t.call(this,e)).state={classText:"dm-notification"},n}return Object(w.a)(s,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){return e.setState({classText:"dm-notification right"})}),200)}},{key:"render",value:function(){return Object(R.jsx)(H,{component:Object(R.jsx)(l.b,{to:"/channels/@me/".concat(this.props.notification.channelId),className:"home-icon ".concat(this.state.classText),id:"dm-notification-".concat(this.props.notification.channelId),style:{backgroundImage:"url(".concat(this.props.user.image_url,")"),backgroundSize:"100%"},onKeyDown:function(e){return e.preventDefault()},children:Object(R.jsx)("div",{className:"dm-notification-badge",children:this.props.notification.count})}),position:"right center",text:this.props.user.username})}}]),s}(a.a.Component),te="RECEIVE_SERVERS",se="RECEIVE_USERS",ne="RECEIVE_SERVER",re="RECEIVE_SERVER_ERRORS",ae="REMOVE_SERVER_ERRORS",ie="REMOVE_SERVER",ce=function(e){return{type:se,users:e}},oe=function(e,t){return{type:ne,server:e,userId:t}},le=function(e,t){return{type:ie,serverId:e,userId:t}},ue=function(e){return{type:re,errors:e}},he=function(){return function(e){return d()({method:"GET",url:"localhost:1337/api/servers"}).then((function(t){return e(function(e){return{type:te,servers:e}}(t))}))}},de=function(e){return function(t){return function(e){return d()({method:"GET",url:"localhost:1337/api/servers/".concat(e,"/members")})}(e).then((function(e){var s=e.users;e.requests;return t(ce(s))}))}},pe=function(e){return function(t){return function(e){return d()({method:"POST",url:"localhost:1337/api/servers",data:e,contentType:!1,processData:!1})}(e).then((function(e){return t(oe(e,e.admin_id))}),(function(e){return t(ue(e.responseJSON))}))}},be=function(e,t){return function(s){return(n=e,d()({method:"DELETE",url:"localhost:1337/api/servers/".concat(n)})).then((function(){return s(le(e,t))}));var n}},je=function(e,t){return function(s){return function(e){return d()({method:"POST",url:"localhost:1337/api/servers/join",data:{server:e}})}(e).then((function(e){return s(oe(e,t))}),(function(e){return s(ue(e.responseJSON))}))}},me=function(e){Object(M.a)(s,e);var t=Object(L.a)(s);function s(e){var n;return Object(E.a)(this,s),(n=t.call(this,e)).handleSubmit=n.handleSubmit.bind(Object(I.a)(n)),n.handleRedirect=n.handleRedirect.bind(Object(I.a)(n)),n}return Object(w.a)(s,[{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.joinServer({name:this.props.server.name},this.props.currentUserId).then(this.handleRedirect)}},{key:"handleRedirect",value:function(e){this.props.closeModal(),this.props.history.push("/channels/".concat(e.server.id,"/").concat(e.server.root_channel))}},{key:"render",value:function(){return Object(R.jsxs)("button",{type:"button",className:"channel",id:"search-server-item",onClick:this.handleSubmit,children:[Object(R.jsx)("div",{className:"server-member-img",style:this.props.server.icon_url?{backgroundImage:"url(".concat(this.props.server.icon_url,")"),backgroundSize:"100%",marginLeft:0}:{backgroundSize:"100%",marginLeft:0}}),Object(R.jsx)("div",{className:"channel-name",children:this.props.server.name})]})}}]),s}(a.a.Component),ve=Object(u.g)(me),fe=function(e){Object(M.a)(s,e);var t=Object(L.a)(s);function s(e){var n;return Object(E.a)(this,s),(n=t.call(this,e)).state={name:"",servers:[]},n.searchInput=a.a.createRef(),n.update=n.update.bind(Object(I.a)(n)),n}return Object(w.a)(s,[{key:"componentDidMount",value:function(){this.props.fetchServers(),this.searchInput.current.focus()}},{key:"update",value:function(e){var t,s=e.currentTarget.value;t=s?this.props.servers.filter((function(e){return e.name.match(new RegExp("^.*".concat(s,".*$"),"i"))})):[],this.setState({name:s,servers:t})}},{key:"render",value:function(){var e,t=this;return e=0===this.state.servers.length&&this.state.name?Object(R.jsx)("div",{className:"server-search-empty",children:'No servers match "'.concat(this.state.name,'"')}):0!==this.state.servers.length||this.state.name?this.state.servers.map((function(e,s){return Object(R.jsx)(ve,{server:e,closeModal:t.props.closeModal,joinServer:t.props.joinServer,currentUserId:t.props.currentUserId},s)})):Object(R.jsx)("div",{className:"server-search-pic"}),Object(R.jsxs)("section",{className:"create-channel-form",onSubmit:this.handleSubmit,children:[Object(R.jsxs)("header",{children:[Object(R.jsx)("h4",{style:{marginBottom:"6px"},children:"Server Discovery"}),Object(R.jsx)("input",{type:"text",placeholder:'Try searching for a server like "westeros"',value:this.state.name,onChange:this.update,className:"session-input",ref:this.searchInput,id:"search-input",autoComplete:"off"})]}),Object(R.jsx)("main",{className:"search-results",children:Object(R.jsx)("ul",{children:e})}),Object(R.jsx)("div",{className:"create-channel-form-bottom",id:"search-bottom",children:Object(R.jsx)("button",{type:"button",className:"create-channel-cancel",onClick:this.props.closeModal,children:"Cancel"})})]})}}]),s}(a.a.Component),Oe=Object(o.b)((function(e){var t=e.session.id;return{servers:Object.values(e.entities.servers),currentUserId:t}}),(function(e){return{joinServer:function(t,s){return e(je(t,s))},fetchServers:function(t,s){return e(he())}}}))(fe);var xe=function(e){var t=this,s=useState(!1),n=Object(B.a)(s,2),r=(n[0],n[1]),a=useState(!1),i=Object(B.a)(a,2),c=(i[0],i[1]),o=useState(""),u=Object(B.a)(o,2),h=u[0],d=u[1];this.handleOpenModal=this.handleOpenModal.bind(this),this.handleCloseModal=this.handleCloseModal.bind(this),this.handleOpenSearchModal=this.handleOpenSearchModal.bind(this),this.handleCloseSearchModal=this.handleCloseSearchModal.bind(this),handleOpenModal=function(){r(!0)},handleCloseModal=function(){r(!0),setTimeout((function(){return d("")}),150),e.removeServerErrors()},handleOpenSearchModal=function(){c(!0)},handleCloseSearchModal=function(){c(!1)},updateContent=function(e){d(e)};var p=e.dmNotifications.map((function(e,s){return Object(R.jsx)(ee,{notification:e,user:t.props.users[s]},s)})),b=this.props.servers.map((function(e,t){return Object(R.jsx)(W,{server:e},t)}));return Y.a.setAppElement("#root"),"create"===h?(Object(J.a)("content"),h=Object(R.jsx)(K,{createServer:e.createServer,closeModal:handleCloseModal,errors:this.props.errors})):"join"===h?(Object(J.a)("content"),h=Object(R.jsx)($,{joinServer:e.joinServer,closeModal:handleCloseModal,errors:e.errors,currentUserId:e.currentUser.id})):(Object(J.a)("content"),h=Object(R.jsxs)("div",{className:"server-modal-content-wrapper",children:[Object(R.jsxs)("div",{className:"server-modal-content",children:[Object(R.jsx)("h3",{className:"create-server-header",children:"OH, ANOTHER SERVER HUH?"}),Object(R.jsxs)("div",{className:"modal-create-join",children:[Object(R.jsxs)("div",{className:"modal-create-server",onClick:function(){return t.updateContent("create")},children:[Object(R.jsx)("h4",{children:"CREATE"}),Object(R.jsx)("p",{children:"Create a new server and invite your friends. It's free!"}),Object(R.jsx)("div",{}),Object(R.jsx)("button",{className:"modal-create-button",children:"Create a server"})]}),Object(R.jsxs)("div",{className:"modal-join-server",onClick:function(){return t.updateContent("join")},children:[Object(R.jsx)("h4",{children:"JOIN"}),Object(R.jsx)("p",{children:"Enter a server name and join your friends server."}),Object(R.jsx)("div",{}),Object(R.jsx)("button",{className:"modal-join-button",children:"Join a server"})]})]})]}),Object(R.jsx)("div",{className:"or",children:"or"})]})),Object(R.jsxs)("div",{className:"side-bar",children:[Object(R.jsx)(H,{component:Object(R.jsx)(l.c,{to:"/channels/@me",className:"home-icon",activeClassName:"serverSelected",children:Object(R.jsx)("div",{className:"server-active-icon"})}),position:"right center",text:"Home"}),Object(R.jsx)("div",{className:"friends-online",children:"".concat(this.props.onlineCount," Online")}),p,Object(R.jsx)("div",{className:"separator"}),Object(R.jsxs)("div",{className:"side-scroll-container",children:[b,Object(R.jsx)("button",{className:"create-server",type:"button",onClick:this.handleOpenModal,children:Object(R.jsx)("span",{children:"+"})}),Object(R.jsx)(H,{component:Object(R.jsx)("button",{className:"create-server",type:"button",onClick:this.handleOpenSearchModal,children:Object(R.jsx)("svg",{className:"server-search",width:"24",height:"24",viewBox:"0 0 18 18",children:Object(R.jsx)("g",{fill:"none",fillRule:"evenodd",children:Object(R.jsx)("path",{fill:"currentColor",d:"M3.60091481,7.20297313 C3.60091481,5.20983419 5.20983419,3.60091481 7.20297313,3.60091481 C9.19611206,3.60091481 10.8050314,5.20983419 10.8050314,7.20297313 C10.8050314,9.19611206 9.19611206,10.8050314 7.20297313,10.8050314 C5.20983419,10.8050314 3.60091481,9.19611206 3.60091481,7.20297313 Z M12.0057176,10.8050314 L11.3733562,10.8050314 L11.1492281,10.5889079 C11.9336764,9.67638651 12.4059463,8.49170955 12.4059463,7.20297313 C12.4059463,4.32933105 10.0766152,2 7.20297313,2 C4.32933105,2 2,4.32933105 2,7.20297313 C2,10.0766152 4.32933105,12.4059463 7.20297313,12.4059463 C8.49170955,12.4059463 9.67638651,11.9336764 10.5889079,11.1492281 L10.8050314,11.3733562 L10.8050314,12.0057176 L14.8073185,16 L16,14.8073185 L12.2102538,11.0099776 L12.0057176,10.8050314 Z"})})})}),position:"right center",text:"Server Discovery"})]}),Object(R.jsx)(Y.a,{closeTimeoutMS:150,isOpen:state.showModal,onRequestClose:handleCloseModal,style:{overlay:{backgroundColor:"rgba(0, 0, 0, 0.85)",zIndex:99},content:{height:"420px",width:"540px",padding:0,borderRadius:"5px 5px 5px 5px",margin:"auto",background:"rgb(255, 255, 255)",boxSizing:"border-box"}},children:h}),Object(R.jsx)(Y.a,{isOpen:state.showSearchModal,contentLabel:"onRequestClose Example",onRequestClose:handleCloseSearchModal,closeTimeoutMS:150,style:{overlay:{backgroundColor:"rgba(0, 0, 0, 0.85)",zIndex:99},content:{height:"382px",width:"440px",padding:0,borderRadius:"5px",margin:"auto",boxShadow:"0 0 0 1px rgba(32,34,37,.6), 0 2px 10px 0 rgba(0,0,0,.2)",boxSizing:"border-box",display:"flex",flexDirection:"column",backgroundColor:"#36393f",border:"none"}},children:Object(R.jsx)(Oe,{closeModal:handleCloseSearchModal})})]})},ge=Object(u.g)(Object(o.b)((function(e){var t=0;e.entities.friends.forEach((function(s){e.entities.users[s]&&e.entities.users[s].online&&t++}));var s=Object.values(e.notifications.dm),n=s.map((function(t){return e.entities.users[t.authorId]})),r=e.entities.users[e.session.id];return{servers:r.servers.map((function(t){return e.entities.servers[t]||{}})),errors:e.errors.server,onlineCount:t,dmNotifications:s,users:n,currentUser:r}}),(function(e){return{fetchServers:function(){return e(he())},createServer:function(t){return e(pe(t))},joinServer:function(t,s){return e(je(t,s))},removeServerErrors:function(){return e({type:ae})}}}))(xe)),Ce=function(e){Object(M.a)(s,e);var t=Object(L.a)(s);function s(e){var n;return Object(E.a)(this,s),(n=t.call(this,e)).state={active:!1},n.handleMouseEnter=n.handleMouseEnter.bind(Object(I.a)(n)),n.handleMouseLeave=n.handleMouseLeave.bind(Object(I.a)(n)),n.handleDelete=n.handleDelete.bind(Object(I.a)(n)),n}return Object(w.a)(s,[{key:"handleMouseEnter",value:function(){"general"!==this.props.channel.name&&this.props.currentUser.id===this.props.server.admin_id&&this.setState({active:!0})}},{key:"handleMouseLeave",value:function(){"general"!==this.props.channel.name&&this.props.currentUser.id===this.props.server.admin_id&&this.setState({active:!1})}},{key:"handleDelete",value:function(e){e.preventDefault();var t=this;this.props.deleteChannel().then((function(e){e.channelId==t.props.match.params.channelId&&t.props.history.push("/channels/".concat(t.props.server.id,"/").concat(t.props.server.root_channel))}))}},{key:"render",value:function(){return Object(R.jsxs)(l.c,{to:"/channels/".concat(this.props.server.id,"/").concat(this.props.channel.id),className:"channel",activeClassName:"selected",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[Object(R.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",className:"colorDefaultText-oas-QM icon-sxakjD",children:Object(R.jsx)("path",{className:"foreground-2W-aJk",fill:"currentColor",d:"M2.27333333,12 L2.74666667,9.33333333 L0.08,9.33333333 L0.313333333,8 L2.98,8 L3.68666667,4 L1.02,4 L1.25333333,2.66666667 L3.92,2.66666667 L4.39333333,0 L5.72666667,0 L5.25333333,2.66666667 L9.25333333,2.66666667 L9.72666667,0 L11.06,0 L10.5866667,2.66666667 L13.2533333,2.66666667 L13.02,4 L10.3533333,4 L9.64666667,8 L12.3133333,8 L12.08,9.33333333 L9.41333333,9.33333333 L8.94,12 L7.60666667,12 L8.08,9.33333333 L4.08,9.33333333 L3.60666667,12 L2.27333333,12 L2.27333333,12 Z M5.02,4 L4.31333333,8 L8.31333333,8 L9.02,4 L5.02,4 L5.02,4 Z",transform:"translate(1.333 2)"})}),Object(R.jsx)("div",{className:"channel-name",children:this.props.channel.name}),this.state.active?Object(R.jsx)(H,{component:Object(R.jsx)("button",{className:"delete-channel-button",onClick:this.handleDelete}),position:"top right",text:"Delete Channel"}):null]})}}]),s}(a.a.Component),Ne=Object(u.g)(Ce),ye=s(11),Se=s.n(ye),ke=function(e){Object(M.a)(s,e);var t=Object(L.a)(s);function s(e){var n;return Object(E.a)(this,s),(n=t.call(this,e)).state={name:""},n.handleSubmit=n.handleSubmit.bind(Object(I.a)(n)),n.update=n.update.bind(Object(I.a)(n)),n}return Object(w.a)(s,[{key:"componentDidMount",value:function(){this.nameInput.focus()}},{key:"update",value:function(e){this.setState({name:e.currentTarget.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.createChannel(Se()(this.state,{server_id:this.props.server.id})).then(this.props.closeModal)}},{key:"render",value:function(){var e=this;return Object(R.jsxs)("form",{className:"create-channel-form",onSubmit:this.handleSubmit,children:[Object(R.jsxs)("header",{children:[Object(R.jsx)("h4",{children:"CREATE ".concat(this.props.text," CHANNEL")}),Object(R.jsxs)("p",{children:["in ",this.props.server.name]})]}),Object(R.jsxs)("main",{children:[Object(R.jsxs)("div",{className:"session-error-wrapper",children:[Object(R.jsx)("h5",{className:"email-label ".concat(this.props.errors[0]?"session-error-label":""),children:"CHANNEL NAME"}),Object(R.jsx)("span",{className:"session-errors",children:this.props.errors[0]?"- ".concat(this.props.errors[0]):""})]}),Object(R.jsx)("input",{type:"text",value:this.state.name,onChange:this.update,className:this.props.errors[0]?"session-error":"session-input",ref:function(t){e.nameInput=t}})]}),Object(R.jsxs)("div",{className:"create-channel-form-bottom",children:[Object(R.jsx)("button",{type:"button",className:"create-channel-cancel",onClick:this.props.closeModal,children:"Cancel"}),Object(R.jsx)("button",{id:"session-submit",children:"Create Channel"})]})]})}}]),s}(a.a.Component),Ee=ke,we="JOIN_ROOM",Ie="EXCHANGE",Me="REMOVE_USER",Le=function(e){Object(M.a)(s,e);var t=Object(L.a)(s);function s(e){var n;return Object(E.a)(this,s),(n=t.call(this,e)).state={active:!1},n.pcPeers={},n.remoteAudioContainer=a.a.createRef(),n.handleClick=n.handleClick.bind(Object(I.a)(n)),n.handleMouseEnter=n.handleMouseEnter.bind(Object(I.a)(n)),n.handleMouseLeave=n.handleMouseLeave.bind(Object(I.a)(n)),n.handleDelete=n.handleDelete.bind(Object(I.a)(n)),n}return Object(w.a)(s,[{key:"handleMouseEnter",value:function(){"General"!==this.props.channel.name&&this.props.currentUserId===this.props.server.admin_id&&this.setState({active:!0})}},{key:"handleMouseLeave",value:function(){"General"!==this.props.channel.name&&this.props.currentUserId===this.props.server.admin_id&&this.setState({active:!1})}},{key:"handleDelete",value:function(e){e.stopPropagation(),this.voiceSession&&this.handleLeaveSession(),this.props.leaveVoiceChannel(),this.props.deleteVoiceChannel()}},{key:"handleClick",value:function(){this.props.selectVoiceChannel()}},{key:"componentDidMount",value:function(){var e=this;this.props.select&&navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(t){e.localstream=t})).then((function(){return e.handleJoinSession()}))}},{key:"componentDidUpdate",value:function(e){var t=this;e.selected&&!this.props.selected?this.voiceSession&&this.handleLeaveSession():!e.selected&&this.props.selected&&(this.voiceSession&&this.handleLeaveSession(),navigator.mediaDevices.getUserMedia({audio:!0}).then((function(e){t.localstream=e})).then((function(){return t.handleJoinSession()})))}},{key:"componentWillUnmount",value:function(){this.voiceSession&&this.handleLeaveSession()}},{key:"handleJoinSession",value:function(){var e=this,t=this;this.voiceSession=App.cable.subscriptions.create({channel:"VoiceChannel",channelId:this.props.channel.id},{connected:function(){e.voiceSession.broadcastData({type:we,from:e.props.currentUserId})},received:function(t){if(t.from!==e.props.currentUserId)switch(t.type){case we:return e.joinRoom(t);case Ie:if(t.to!==e.props.currentUserId)return;return e.exchange(t);case Me:return e.removeUser(t);default:return}},broadcastData:function(e){return this.perform("broadcast",{channelId:t.props.channel.id,data:e})}})}},{key:"handleLeaveSession",value:function(){for(var e in this.pcPeers)this.pcPeers[e].close();this.pcPeers={},this.voiceSession.unsubscribe(),this.localstream.getAudioTracks().forEach((function(e){e.stop()})),this.voiceSession.broadcastData({type:Me,from:this.props.currentUserId})}},{key:"removeUser",value:function(e){var t=document.getElementById("remoteAudioContainer+".concat(e.from));t&&t.remove(),delete this.pcPeers[e.from]}},{key:"createPC",value:function(e,t){var s=this,n=new RTCPeerConnection({iceServers:[{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"}]});return this.pcPeers[e]=n,this.localstream.getTracks().forEach((function(e){return n.addTrack(e,s.localstream)})),t&&n.createOffer().then((function(t){n.setLocalDescription(t).then((function(){s.voiceSession.broadcastData({type:Ie,from:s.props.currentUserId,to:e,sdp:JSON.stringify(n.localDescription)})}))})),n.onicecandidate=function(t){t.candidate&&s.voiceSession.broadcastData({type:Ie,from:s.props.currentUserId,to:e,candidate:JSON.stringify(t.candidate)})},n.ontrack=function(t){var n=document.createElement("audio");n.id="remoteAudioContainer+".concat(e),n.autoplay="autoplay",n.srcObject=t.streams[0],s.remoteAudioContainer.current.appendChild(n)},n.oniceconnectionstatechange=function(t){"disconnected"==n.iceConnectionState&&s.voiceSession.broadcastData({type:Me,from:e})},n}},{key:"exchange",value:function(e){var t,s=this;if(t=this.pcPeers[e.from]?this.pcPeers[e.from]:this.createPC(e.from,!1),e.candidate&&t.addIceCandidate(new RTCIceCandidate(JSON.parse(e.candidate))),e.sdp){var n=JSON.parse(e.sdp);t.setRemoteDescription(n).then((function(){"offer"===n.type&&t.createAnswer().then((function(n){t.setLocalDescription(n).then((function(){s.voiceSession.broadcastData({type:Ie,from:s.props.currentUserId,to:e.from,sdp:JSON.stringify(t.localDescription)})}))}))}))}}},{key:"logError",value:function(e){console.warn(e)}},{key:"joinRoom",value:function(e){this.createPC(e.from,!0)}},{key:"render",value:function(){return Object(R.jsxs)("div",{className:this.props.selected?"channel voice-selected":"channel",onClick:this.handleClick,ref:this.remoteAudioContainer,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[Object(R.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",children:Object(R.jsx)("path",{fill:"currentColor",d:"M9.33333333,2 L9.33333333,3.37333333 C11.26,3.94666667 12.6666667,5.73333333 12.6666667,7.84666667 C12.6666667,9.96 11.26,11.74 9.33333333,12.3133333 L9.33333333,13.6933333 C12,13.0866667 14,10.7 14,7.84666667 C14,4.99333333 12,2.60666667 9.33333333,2 L9.33333333,2 Z M11,7.84666667 C11,6.66666667 10.3333333,5.65333333 9.33333333,5.16 L9.33333333,10.5133333 C10.3333333,10.04 11,9.02 11,7.84666667 L11,7.84666667 Z M2,5.84666667 L2,9.84666667 L4.66666667,9.84666667 L8,13.18 L8,2.51333333 L4.66666667,5.84666667 L2,5.84666667 L2,5.84666667 Z"})}),Object(R.jsx)("div",{className:"channel-name",children:this.props.channel.name}),this.state.active?Object(R.jsx)(H,{component:Object(R.jsx)("button",{className:"delete-channel-button",onClick:this.handleDelete}),position:"top center",text:"Delete Channel"}):null]})}}]),s}(a.a.Component),Re=Le,_e=function(e){Object(M.a)(s,e);var t=Object(L.a)(s);function s(e){var n;return Object(E.a)(this,s),(n=t.call(this,e)).state={showModal:!1,voiceChannelId:null},n.handleOpenModal=n.handleOpenModal.bind(Object(I.a)(n)),n.handleCloseModal=n.handleCloseModal.bind(Object(I.a)(n)),n.selectVoiceChannel=n.selectVoiceChannel.bind(Object(I.a)(n)),n.leaveVoiceChannel=n.leaveVoiceChannel.bind(Object(I.a)(n)),n}return Object(w.a)(s,[{key:"componentDidMount",value:function(){this.props.fetchVoiceChannels(this.props.match.params.serverId)}},{key:"componentDidUpdate",value:function(e){var t=this.props.match.params.serverId;e.server.id&&e.server.id!=t&&(this.props.fetchVoiceChannels(t),this.state.voiceChannelId&&this.leaveVoiceChannel())}},{key:"handleOpenModal",value:function(){this.setState({showModal:!0})}},{key:"handleCloseModal",value:function(){this.setState({showModal:!1}),this.props.removeChannelErrors()}},{key:"selectVoiceChannel",value:function(e){this.setState({voiceChannelId:e})}},{key:"leaveVoiceChannel",value:function(){this.setState({voiceChannelId:null})}},{key:"render",value:function(){var e=this,t=this,s=this.props.voiceChannels.map((function(s,n){return s.server_id==t.props.match.params.serverId?Object(R.jsx)(Re,{server:t.props.server,channel:s,currentUserId:t.props.currentUser.id,selectVoiceChannel:function(){return e.selectVoiceChannel(s.id)},selected:e.state.voiceChannelId===s.id,deleteVoiceChannel:function(){return t.props.deleteVoiceChannel(s.id)},leaveVoiceChannel:t.leaveVoiceChannel},n):null}));return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("div",{className:"text-channels-label",children:Object(R.jsxs)("div",{children:[Object(R.jsx)("button",{className:"text-channels-button",onClick:this.handleOpenModal,children:"+"}),Object(R.jsx)("h3",{id:"text-channels",children:"Voice Channels"})]})}),s,this.state.voiceChannelId?Object(R.jsxs)("div",{className:"voice-connected-popup",children:[Object(R.jsx)("h4",{children:"Voice Connected"}),Object(R.jsx)("button",{onClick:this.leaveVoiceChannel,className:"leave-voice-channel-button"})]}):null,Object(R.jsx)(Y.a,{isOpen:this.state.showModal,contentLabel:"onRequestClose Example",closeTimeoutMS:150,onRequestClose:this.handleCloseModal,style:{overlay:{backgroundColor:"rgba(0, 0, 0, 0.85)",zIndex:99},content:{height:"382px",width:"440px",padding:0,borderRadius:"5px",margin:"auto",boxShadow:"0 0 0 1px rgba(32,34,37,.6), 0 2px 10px 0 rgba(0,0,0,.2)",boxSizing:"border-box",display:"flex",flexDirection:"column",backgroundColor:"#36393f",border:"none"}},children:Object(R.jsx)(Ee,{server:this.props.server,createChannel:this.props.createVoiceChannel,closeModal:this.handleCloseModal,errors:this.props.errors,text:"VOICE"})})]})}}]),s}(a.a.Component),Ue="RECEIVE_CHANNELS",De="RECEIVE_CHANNEL",Te="REMOVE_CHANNEL",Ae="RECEIVE_CHANNEL_ERRORS",ze="REMOVE_CHANNEL_ERRORS",Ve=function(e){return{type:Ue,channels:e}},qe=function(e){return{type:De,channel:e}},Fe=function(e){return{type:Te,channelId:e}},Pe=function(e){return{type:Ae,errors:e}},Be=function(){return{type:ze}},Je=function(e,t){return function(s){return(n=e,d()({method:"GET",url:"localhost:1337/api/channels",data:{channel:{server_id:n}}})).then((function(e){return s(Ve(e))}),(function(){return s(le(e,t))}));var n}},Ge=function(e){return function(t){return function(e){return d()({method:"DELETE",url:"localhost:1337/api/channels/".concat(e)})}(e).then((function(){return t(Fe(e))}))}},He=function(e){return function(t){return function(e){return d()({method:"DELETE",url:"localhost:1337/api/dm_channel_memberships/".concat(e)})}(e).then((function(e){return t(Fe(e.channel_id))}))}},We=function(){return function(e){return d()({method:"GET",url:"localhost:1337/api/dm_channel_memberships"}).then((function(t){var s=t.channels,n=t.users;return e(ce(n)),e(Ve(s))}))}},Ze=function(e){return function(t){return function(e){return d()({method:"POST",url:"localhost:1337/api/channels",data:{channel:e}})}(e).then((function(e){return t(qe(e))}),(function(e){return t(Pe(e.responseJSON))}))}},Ye=function(e){return function(t){return(s=e,d()({method:"POST",url:"localhost:1337/api/dm_channel_memberships",data:{dm_channel:{user_id:s}}})).then((function(e){return t(qe(e))}));var s}},Xe="RECEIVE_VOICE_CHANNELS",Ke="RECEIVE_VOICE_CHANNEL",Qe="REMOVE_VOICE_CHANNEL",$e=function(e){return function(t){return(s=e,d()({method:"GET",url:"localhost:1337/api/audio_channels",data:{audio_channel:{server_id:s}}})).then((function(e){return t(function(e){return{type:Xe,voiceChannels:e}}(e))}));var s}},et=function(e){return function(t){return function(e){return d()({method:"DELETE",url:"localhost:1337/api/audio_channels/".concat(e)})}(e).then((function(){return t({type:Qe,voiceChannelId:e})}))}},tt=function(e){return function(t){return(s=e,d()({method:"POST",url:"localhost:1337/api/audio_channels",data:{audio_channel:s}})).then((function(e){return t(function(e){return{type:Ke,voiceChannel:e}}(e))}),(function(e){return t(Pe(e.responseJSON))}));var s}},st=Object(u.g)(Object(o.b)((function(e,t){var s=t.match.params.serverId,n=Object.values(e.entities.voiceChannels).filter((function(e){return e.server_id==s}));return{currentUser:e.entities.users[e.session.id],server:e.entities.servers[s]||{},voiceChannels:n,errors:e.errors.channel}}),(function(e){return{fetchVoiceChannels:function(t){return e($e(t))},createVoiceChannel:function(t){return e(tt(t))},removeChannelErrors:function(){return e(Be())},deleteVoiceChannel:function(t){return e(et(t))}}}))(_e)),nt=function(e){Object(M.a)(s,e);var t=Object(L.a)(s);function s(e){var n;return Object(E.a)(this,s),(n=t.call(this,e)).state={username:n.props.currentUser.username,email:n.props.currentUser.email,avatarFile:null,avatarUrl:null},n.handleSubmit=n.handleSubmit.bind(Object(I.a)(n)),n.handleFile=n.handleFile.bind(Object(I.a)(n)),n.handleRemove=n.handleRemove.bind(Object(I.a)(n)),n}return Object(w.a)(s,[{key:"update",value:function(e){var t=this;return function(s){return t.setState(Object(n.a)({},e,s.currentTarget.value))}}},{key:"handleFile",value:function(e){var t=this,s=e.currentTarget.files[0],n=new FileReader;n.onloadend=function(){t.setState({avatarFile:s,avatarUrl:n.result})},s&&n.readAsDataURL(s)}},{key:"handleRemove",value:function(e){this.setState({avatarFile:null,avatarUrl:null})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=new FormData;t.append("user[username]",this.state.username),t.append("user[email]",this.state.email),t.append("user[id]",this.props.currentUser.id),this.state.avatarFile&&t.append("user[avatar]",this.state.avatarFile),this.props.editUser(t).then(this.props.closeModal)}},{key:"render",value:function(){var e=this.props.errors.find((function(e){return e.includes("Email")||e.includes("demo")})),t=this.props.errors.find((function(e){return e.includes("Username")||e.includes("demo")})),s=this.state,n=s.avatarUrl,r=s.username,a=s.email;return Object(R.jsxs)("form",{className:"edit-user-form",onSubmit:this.handleSubmit,children:[Object(R.jsxs)("div",{className:"edit-user-form-top",children:[Object(R.jsxs)("div",{className:"avatar-container",children:[Object(R.jsxs)("div",{className:"avatar-wrapper",style:{backgroundImage:"url(".concat(n||this.props.currentUser.image_url,")")},children:[Object(R.jsx)("p",{children:"CHANGE \n AVATAR"}),Object(R.jsx)("input",{type:"file",onChange:this.handleFile,onKeyDown:function(e){return e.preventDefault()},multipleaccept:".jpg,.jpeg,.png,.gif"}),Object(R.jsx)("div",{className:"add-file-icon"})]}),n?Object(R.jsx)("button",{type:"button",className:"remove-avatar-button",onClick:this.handleRemove,onKeyDown:function(e){return e.preventDefault()},children:"REMOVE"}):null]}),Object(R.jsxs)("div",{className:"edit-user-username-email",children:[Object(R.jsxs)("div",{className:"email-container",children:[Object(R.jsxs)("div",{className:"session-error-wrapper",children:[Object(R.jsx)("h5",{className:"email-label ".concat(t?"session-error-label":""),children:"USERNAME"}),Object(R.jsx)("span",{className:"session-errors",children:t?"-  ".concat(t):""})]}),Object(R.jsx)("input",{type:"text",value:r,onChange:this.update("username"),className:t?"session-error":"session-input"})]}),Object(R.jsxs)("div",{className:"email-container",children:[Object(R.jsxs)("div",{className:"session-error-wrapper",children:[Object(R.jsx)("h5",{className:"email-label ".concat(e?"session-error-label":""),children:"EMAIL"}),Object(R.jsx)("span",{className:"session-errors",children:e?"-  ".concat(e):""})]}),Object(R.jsx)("input",{type:"text",value:a,onChange:this.update("email"),className:e?"session-error":"session-input"})]})]})]}),Object(R.jsx)("div",{className:"edit-user-form-bottom",children:Object(R.jsxs)("div",{className:"edit-user-button-container",children:[Object(R.jsx)("button",{type:"button",className:"create-channel-cancel",onClick:this.props.closeModal,style:{height:"auto"},children:"Cancel"}),Object(R.jsx)("button",{className:"edit-user-button",children:"Save"})]})})]})}}]),s}(a.a.Component),rt=function(e){Object(M.a)(s,e);var t=Object(L.a)(s);function s(e){var n;return Object(E.a)(this,s),(n=t.call(this,e)).state={showUserModal:!1},n.handleOpenUserModal=n.handleOpenUserModal.bind(Object(I.a)(n)),n.handleCloseUserModal=n.handleCloseUserModal.bind(Object(I.a)(n)),n}return Object(w.a)(s,[{key:"handleOpenUserModal",value:function(){this.setState({showUserModal:!0})}},{key:"handleCloseUserModal",value:function(){this.setState({showUserModal:!1}),this.props.removeErrors()}},{key:"render",value:function(){var e=this;return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsxs)("div",{className:"user-actions",children:[Object(R.jsxs)("div",{className:"icon-name-wrapper",children:[Object(R.jsx)(H,{component:Object(R.jsx)("div",{className:"user-icon",style:{backgroundImage:"url(".concat(this.props.currentUser.image_url,")")},onClick:this.handleOpenUserModal,children:Object(R.jsx)("div",{className:"server-member-status-indicator",style:this.props.currentUser.online?{backgroundColor:"#43b581"}:{backgroundColor:"#747f8d"}})}),position:"top center",text:"Update Profile"}),Object(R.jsx)("div",{className:"actions-username",children:this.props.currentUser.username})]}),Object(R.jsx)(H,{component:Object(R.jsx)("button",{className:"gear",onClick:function(){return e.props.logout()},children:Object(R.jsx)("i",{className:"fas fa-sign-out-alt"})}),position:"top center",text:"Logout"})]}),Object(R.jsx)(Y.a,{isOpen:this.state.showUserModal,contentLabel:"onRequestClose Example",onRequestClose:this.handleCloseUserModal,closeTimeoutMS:150,style:{overlay:{backgroundColor:"rgba(0, 0, 0, 0.7)",zIndex:99},content:{height:"271px",width:"500px",padding:0,borderRadius:"5px",margin:"auto",boxShadow:"0 0 0 1px rgba(32,34,37,.6), 0 2px 10px 0 rgba(0,0,0,.2)",boxSizing:"border-box",display:"flex",flexDirection:"column",backgroundColor:"#37393f",border:"none"}},children:Object(R.jsx)(nt,{closeModal:this.handleCloseUserModal,errors:this.props.errors,currentUser:this.props.currentUser,editUser:this.props.editUser})})]})}}]),s}(a.a.Component),at=Object(u.g)(Object(o.b)((function(e){return{currentUser:e.entities.users[e.session.id],errors:e.errors.session}}),(function(e){return{logout:function(){return e(k())},editUser:function(t){return e(N(t))},removeErrors:function(){return e(g())}}}))(rt)),it=function(e){Object(M.a)(s,e);var t=Object(L.a)(s);function s(e){var n;return Object(E.a)(this,s),(n=t.call(this,e)).state={showModal:!1,showUserModal:!1,active:!1},n.handleOpenModal=n.handleOpenModal.bind(Object(I.a)(n)),n.handleCloseModal=n.handleCloseModal.bind(Object(I.a)(n)),n.removeServer=n.removeServer.bind(Object(I.a)(n)),n.handleMouseEnter=n.handleMouseEnter.bind(Object(I.a)(n)),n.handleMouseLeave=n.handleMouseLeave.bind(Object(I.a)(n)),n}return Object(w.a)(s,[{key:"handleMouseEnter",value:function(){this.setState({active:!0})}},{key:"handleMouseLeave",value:function(){this.setState({active:!1})}},{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.serverId;t&&this.props.fetchChannels(parseInt(t),this.props.currentUser.id).then((function(){}),(function(){return e.props.history.push("/channels/@me")}))}},{key:"componentDidUpdate",value:function(e){var t=this,s=this.props.match.params.serverId;e.server.id&&e.server.id!=s&&this.props.fetchChannels(parseInt(s),this.props.currentUser.id).then((function(){}),(function(){return t.props.history.push("/channels/@me")}))}},{key:"handleOpenModal",value:function(){this.setState({showModal:!0})}},{key:"handleCloseModal",value:function(){this.setState({showModal:!1}),this.props.removeChannelErrors()}},{key:"removeServer",value:function(){var e=this;this.props.deleteServer(this.props.server.id,this.props.currentUser.id).then((function(){return e.props.history.push("/channels/@me")}))}},{key:"render",value:function(){var e=this,t=this.props.channels.map((function(t,s){return Object(R.jsx)(Ne,{server:e.props.server,channel:t,currentUser:e.props.currentUser,deleteChannel:function(){return e.props.deleteChannel(t.id)}},s)}));return Object(R.jsxs)("div",{className:"right-main",children:[Object(R.jsxs)("div",{className:"channels",children:[Object(R.jsxs)("div",{className:"channel-header",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[Object(R.jsx)("span",{className:"server-name",children:this.props.server.name}),this.state.active?Object(R.jsx)(H,{component:Object(R.jsx)("button",{className:"delete-channel-button",onClick:this.removeServer}),position:"bottom right",text:this.props.server.admin_id===this.props.currentUser.id?"Delete Server":"Unsubscribe"}):null]}),Object(R.jsx)("div",{className:"channel-scroll-wrapper",children:Object(R.jsx)("div",{className:"channel-overflow-container",children:Object(R.jsxs)("div",{className:"channel-list",children:[Object(R.jsx)("div",{className:"text-channels-label",children:Object(R.jsxs)("div",{children:[Object(R.jsx)("button",{className:"text-channels-button",onClick:this.handleOpenModal,children:"+"}),Object(R.jsx)("h3",{id:"text-channels",children:"Text Channels"})]})}),t,Object(R.jsx)(st,{})]})})}),Object(R.jsx)(at,{})]}),Object(R.jsx)(Y.a,{isOpen:this.state.showModal,contentLabel:"onRequestClose Example",onRequestClose:this.handleCloseModal,closeTimeoutMS:150,style:{overlay:{backgroundColor:"rgba(0, 0, 0, 0.85)",zIndex:99},content:{height:"382px",width:"440px",padding:0,borderRadius:"5px",margin:"auto",boxShadow:"0 0 0 1px rgba(32,34,37,.6), 0 2px 10px 0 rgba(0,0,0,.2)",boxSizing:"border-box",display:"flex",flexDirection:"column",backgroundColor:"#36393f",border:"none"}},children:Object(R.jsx)(Ee,{server:this.props.server,createChannel:this.props.createChannel,closeModal:this.handleCloseModal,errors:this.props.errors,text:"TEXT"})})]})}}]),s}(a.a.Component),ct=Object(u.g)(Object(o.b)((function(e,t){var s=t.match.params.serverId,n=Object.values(e.entities.channels).filter((function(e){return e.server_id==s}));return{currentUser:e.entities.users[e.session.id],server:e.entities.servers[s]||{},channels:n,errors:e.errors.channel}}),(function(e){return{fetchChannels:function(t,s){return e(Je(t,s))},createChannel:function(t){return e(Ze(t))},removeChannelErrors:function(){return e(Be())},deleteServer:function(t,s){return e(be(t,s))},deleteChannel:function(t){return e(Ge(t))}}}))(it)),ot=function(e){Object(M.a)(s,e);var t=Object(L.a)(s);function s(){return Object(E.a)(this,s),t.apply(this,arguments)}return Object(w.a)(s,[{key:"render",value:function(){return Object(R.jsxs)("header",{className:"chat-header",children:[Object(R.jsxs)("div",{style:{display:"flex",paddingBottom:"2px"},children:[Object(R.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",color:"#72767d",className:"hash",children:Object(R.jsx)("path",{className:"foreground-2W-aJk",fill:"currentColor",d:"M2.27333333,12 L2.74666667,9.33333333 L0.08,9.33333333 L0.313333333,8 L2.98,8 L3.68666667,4 L1.02,4 L1.25333333,2.66666667 L3.92,2.66666667 L4.39333333,0 L5.72666667,0 L5.25333333,2.66666667 L9.25333333,2.66666667 L9.72666667,0 L11.06,0 L10.5866667,2.66666667 L13.2533333,2.66666667 L13.02,4 L10.3533333,4 L9.64666667,8 L12.3133333,8 L12.08,9.33333333 L9.41333333,9.33333333 L8.94,12 L7.60666667,12 L8.08,9.33333333 L4.08,9.33333333 L3.60666667,12 L2.27333333,12 L2.27333333,12 Z M5.02,4 L4.31333333,8 L8.31333333,8 L9.02,4 L5.02,4 L5.02,4 Z",transform:"translate(3 4)"})}),Object(R.jsx)("span",{className:"username",children:this.props.channel.name})]}),Object(R.jsx)(H,{component:Object(R.jsx)("span",{tabIndex:"0",className:"hide-members",role:"button",onClick:this.props.toggleShowMembers,children:Object(R.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:Object(R.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[Object(R.jsx)("polygon",{points:"0 0 24 0 24 24 0 24"}),Object(R.jsx)("path",{className:"iconForeground-3y9f0B",fill:"currentColor",d:"M19 19L23 19 23 16.5C23 14.17 18.33 13 16 13 15.71 13 15.38 13.02 15.03 13.05 15.2979181 13.2440097 15.5471657 13.4534892 15.7720754 13.6791778 17.5922944 14.6769857 19 16.1183086 19 18L19 19zM14.3335577 10.4967128C14.8098529 10.8147627 15.3828086 11 16 11 17.66 11 18.99 9.66 18.99 8 18.99 6.34 17.66 5 16 5 15.3827845 5 14.8098082 5.18525173 14.3335019 5.5033244 14.7574619 6.23791814 15 7.09053797 15 8.00006693 15 8.90955601 14.7574832 9.76214095 14.3335577 10.4967128zM9 12C6.79 12 5 10.21 5 8 5 5.79 6.79 4 9 4 11.21 4 13 5.79 13 8 13 10.21 11.21 12 9 12zM9 14C11.67 14 17 15.34 17 18L17 20 1 20 1 18C1 15.34 6.33 14 9 14z"})]})})}),position:"bottom right",text:"Member List"})]})}}]),s}(a.a.Component),lt=Object(u.g)(Object(o.b)((function(e,t){return{channel:e.entities.channels[t.match.params.channelId]||{}}}))(ot)),ut=s(21),ht=function(e){Object(M.a)(s,e);var t=Object(L.a)(s);function s(e){var n;return Object(E.a)(this,s),(n=t.call(this,e)).state={body:"",author_id:e.user.id},n.messageInput=a.a.createRef(),n.handleSubmit=n.handleSubmit.bind(Object(I.a)(n)),n.update=n.update.bind(Object(I.a)(n)),n}return Object(w.a)(s,[{key:"update",value:function(e){this.setState({body:e.currentTarget.value})}},{key:"componentDidMount",value:function(){this.messageInput.current.focus()}},{key:"componentDidUpdate",value:function(e){var t=this.props.match.params.channelId;e.channel&&e.channel.id!==t&&this.messageInput.current.focus()}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.subscription.speak({message:Object(ut.merge)({channel_id:this.props.channelId},this.state)}),this.setState({body:""})}},{key:"render",value:function(){var e="";if(this.props.channel.name&&this.props.match.params.serverId)e="Message #".concat(this.props.channel.name);else if(this.props.channel.name){var t,s=this.props.channel.name.split("-");t=s[0]==this.props.user.id?s[1]:s[0],e="Message @".concat(this.props.users[t]?this.props.users[t].username:null)}return Object(R.jsx)("form",{onSubmit:this.handleSubmit,className:"message-form",children:Object(R.jsx)("div",{className:"message-form-container",children:Object(R.jsx)("input",{type:"text",placeholder:e,className:"text-area",value:this.state.body,onChange:this.update,ref:this.messageInput})})})}}]),s}(a.a.Component),dt=Object(u.g)(ht),pt="RECEIVE_REQUESTS",bt="RECEIVE_REQUEST",jt="REMOVE_REQUEST",mt="REMOVE_FRIEND",vt="RECEIVE_FRIENDS",ft="RECEIVE_FRIEND",Ot=function(e){return{type:ft,friend:[e]}},xt=function(e){return{type:bt,friendRequest:e}},gt=function(e){return{type:jt,requestId:e}},Ct=function(e){return{type:mt,friendId:e}},Nt=function(){return function(e){return d()({method:"GET",url:"localhost:1337/api/v1/friend_requests"}).then((function(t){var s=t.requests,n=t.users;return e(ce(n)),e({type:pt,friendRequests:s})}))}},yt=function(){return function(e){return d()({method:"GET",url:"localhost:1337/api/v1/friends"}).then((function(t){return e({type:vt,friendData:t})}))}},St=function(e){return function(t){return(s=e,d()({method:"POST",url:"localhost:1337/api/v1/friend_requests",data:{friend_request:s}})).then((function(e){return t(xt(e))}));var s}},kt=function(e){return function(t){return(s=e,d()({method:"PATCH",url:"localhost:1337/api/v1/friend_requests/".concat(s.id)})).then((function(){return t(gt(e.id)),t(Ot(e.user_id))}));var s}},Et=function(e){return function(t){return(s=e,d()({method:"DELETE",url:"localhost:1337/api/v1/friend_requests/".concat(s.id)})).then((function(){return t(gt(e.id))}));var s}},wt=function(e){return function(t){return function(e){return d()({method:"DELETE",url:"localhost:1337/api/v1/friends/".concat(e)})}(e).then((function(){return t(Ct(e))}))}},It=function(e){Object(M.a)(s,e);var t=Object(L.a)(s);function s(e){var n;return Object(E.a)(this,s),(n=t.call(this,e)).handleClick=n.handleClick.bind(Object(I.a)(n)),n.addFriend=n.addFriend.bind(Object(I.a)(n)),n}return Object(w.a)(s,[{key:"handleClick",value:function(){var e=this;this.props.createDmChannel(this.props.user.id).then((function(t){return e.props.history.push("/channels/@me/".concat(t.channel.id))}))}},{key:"addFriend",value:function(){this.props.createFriendRequest({friend_id:this.props.user.id})}},{key:"render",value:function(){var e,t=this,s=this.props.friendRequests.map((function(e){return e.user_id===t.props.currentUserId?e.friend_id:e.user_id})).concat(this.props.friends);s.push(this.props.currentUserId);var r=!s.includes(this.props.user.id),a=this.props.offsetY;return-90===a?(r||(a+=14),this.props.currentUserId===this.props.user.id&&(a+=14)):60===a?(r||(a-=16),this.props.currentUserId===this.props.user.id&&(a-=16)):(r||(a-=17),this.props.currentUserId===this.props.user.id&&(a-=17)),Object(R.jsx)(G.a,{trigger:this.props.component,arrow:!1,position:this.props.position,closeOnDocumentClick:!0,onOpen:this.props.onOpen,on:"click",offsetX:this.props.offsetX||0,offsetY:a||0,overlayStyle:{zIndex:98},contentStyle:(e={borderRadius:"5px",boxShadow:"0 2px 10px 0 rgba(0, 0, 0, .2), 0 0 0 1px rgba(32, 34, 37, .6)",overflow:"hidden",width:"200px",whiteSpace:"nowrap",fontFamily:"main3",color:"#fff",border:"none",fontSize:"14px",display:"flex",padding:"0"},Object(n.a)(e,"display","flex"),Object(n.a)(e,"flexDirection","column"),Object(n.a)(e,"backgroundColor","black"),Object(n.a)(e,"overflow","auto"),Object(n.a)(e,"zIndex",99),Object(n.a)(e,"transition","transform 200ms ease-in-out"),e),children:Object(R.jsxs)("div",{className:"user-popup",children:[Object(R.jsxs)("div",{className:"user-popup-top",children:[Object(R.jsx)("div",{className:"user-popup-img",style:this.props.user.image_url?{backgroundImage:"url(".concat(this.props.user.image_url,")")}:{},children:Object(R.jsx)("div",{className:"popup-online-indicator",style:this.props.user.online?{backgroundColor:"#43b581",boxShadow:"inset 0 0 0 2px rgba(180,225,205,.6)"}:{backgroundColor:"#747f8d",boxShadow:"inset 0 0 0 2px rgba(199, 204, 209, .6)"}})}),Object(R.jsx)("h5",{children:this.props.user.username})]}),Object(R.jsxs)("div",{className:"user-popup-bottom",children:[this.props.user.id!==this.props.currentUserId&&this.props.showMessageButton?Object(R.jsx)("button",{className:"user-popup-button",onClick:this.handleClick,id:"dm-button",children:"Message"}):null,r?Object(R.jsx)("button",{className:"user-popup-button",onClick:this.addFriend,children:"Add Friend"}):null]})]})})}}]),s}(a.a.Component),Mt=Object(u.g)(Object(o.b)((function(e){return{currentUserId:e.session.id,friendRequests:Object.values(e.entities.friendRequests),friends:e.entities.friends}}),(function(e){return{createDmChannel:function(t){return e(Ye(t))},createFriendRequest:function(t){return e(St(t))}}}))(It)),Lt=s(80),Rt=s.n(Lt),_t=function(e){Object(M.a)(s,e);var t=Object(L.a)(s);function s(){return Object(E.a)(this,s),t.apply(this,arguments)}return Object(w.a)(s,[{key:"parseDate",value:function(){return Rt()(this.props.time).tz("America/New_York").calendar()}},{key:"transition",value:function(){document.getElementsByClassName("popup-content")[0].style.transform="translate(-10px, 0)"}},{key:"parseLinks",value:function(e){var t=this,s=e.split("\n");return s.map((function(e,n){var r=e.split(/\s/),a=[],i=t;return r.map((function(e,t){var s=t<r.length-1?" ":"";e.match(/([a-z\-_0-9\/\:\.]*\.(jpg|jpeg|png|gif))/i)?a.push(Object(R.jsx)("a",{href:e,target:"_blank",className:"message-media",children:Object(R.jsx)("img",{src:e,onLoad:function(){return i.props.bottom.scrollIntoView()}})},t)):e.match("^(https?://)?(www.)?(youtube.com|youtu.?be)/.+$")?a.push(Object(R.jsxs)("div",{className:"youtube-container",children:[Object(R.jsx)("div",{className:"red-bar"}),Object(R.jsxs)("main",{children:[Object(R.jsx)("h2",{children:"YouTube"}),Object(R.jsx)("iframe",{src:e.replace("watch?v=","embed/"),allowFullScreen:!0})]})]},t)):a.push(e+s)})),"string"===typeof a[a.length-1]&&n<s.length-1?a.concat(Object(R.jsx)("br",{},n+9999)):a}))}},{key:"render",value:function(){return Object(R.jsxs)("div",{className:"message",children:[Object(R.jsx)(Mt,{component:Object(R.jsx)("div",{className:"user-image",style:this.props.user.image_url?{backgroundImage:"url(".concat(this.props.user.image_url,")")}:{}}),user:this.props.user,position:"right center",offsetX:2,offsetY:60,onOpen:this.transition,showMessageButton:this.props.showMessageButton}),Object(R.jsxs)("div",{className:"username-message",children:[Object(R.jsxs)("div",{className:"username-time",children:[Object(R.jsx)(Mt,{component:Object(R.jsx)("h4",{children:this.props.user.username}),user:this.props.user,position:"right center",offsetX:2,offsetY:72,onOpen:this.transition,showMessageButton:this.props.showMessageButton}),Object(R.jsx)("h5",{children:this.parseDate()})]}),Object(R.jsx)("div",{className:"message-p-wrapper",children:Object(R.jsx)("div",{className:"message-content",children:this.parseLinks(this.props.message)})})]})]})}}]),s}(a.a.Component),Ut=Object(u.g)(_t),Dt=function(e){Object(M.a)(s,e);var t=Object(L.a)(s);function s(e){var n;return Object(E.a)(this,s),(n=t.call(this,e)).state={messages:[]},n.bottom=a.a.createRef(),n.parseNewMessage=n.parseNewMessage.bind(Object(I.a)(n)),n}return Object(w.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.channelId;if(this.props.loading||this.subscribe(t),t&&!this.props.channel.serverId){var s=document.getElementById("dm-notification-".concat(t));s&&(s.className="dm-notification",setTimeout((function(){return e.props.removeDmNotification(t)}),200))}}},{key:"componentDidUpdate",value:function(e){var t=this,s=this.props.match.params.channelId;if(!e.loading||this.props.loading||this.messagesLoaded||this.subscribe(s),s&&e.channelId!==s&&(this.messageStr=null,this.time=null,this.lastAuthorId=null,this.messageId=null,this.setState({messages:[]}),this.messagesLoaded=!1,this.subscription&&this.subscription.unsubscribe(),this.props.loading||this.messagesLoaded||this.subscribe(s),s&&!this.props.channel.serverId)){var n=document.getElementById("dm-notification-".concat(s));n&&(n.className="dm-notification",setTimeout((function(){return t.props.removeDmNotification(s)}),200))}this.messagesLoaded&&!this.scrolled&&(this.bottom.current.scrollIntoView(),this.scrolled=!0)}},{key:"subscribe",value:function(e){var t=this;if(this.subscription=App.cable.subscriptions.subscriptions.find((function(t){return t.identifier==='{"channel":"ChatChannel","channelId":"'.concat(e,'"}')})),this.subscription)this.subscription.load({channelId:e});else{var s=this;this.subscription=App.cable.subscriptions.create({channel:"ChatChannel",channelId:e},{received:function(n){switch(n.type){case"message":t.scrolled=!1,t.parseNewMessage(n.message);break;case"messages":t.scrolled=!1,t.messagesLoaded=!0,t.setState({messages:t.parseMessages(n.messages)});break;case"error":var r=s.props.server;s.props.removeChannel(e),s.props.history.push("/channels/".concat(r.id,"/").concat(r.root_channel))}},speak:function(e){return this.perform("speak",e)},load:function(e){return this.perform("load",e)}})}}},{key:"componentWillUnmount",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"parseMessages",value:function(e){for(var t=[],s=0;s<e.length;s++){var n=e[s];0===s?(1===e.length&&t.push(Object(R.jsx)(Ut,{message:n.body,user:this.props.users[n.author_id]||{},time:n.created_at,showMessageButton:!!this.props.channel.server_id,bottom:this.bottom.current},n.id)),this.messageStr=n.body,this.time=n.created_at,this.lastAuthorId=n.author_id,this.messageId=n.id):s===e.length-1?n.author_id===this.lastAuthorId?(this.messageStr=this.messageStr+"\n"+n.body,t.push(Object(R.jsx)(Ut,{message:this.messageStr,user:this.props.users[this.lastAuthorId]||{},time:this.time,showMessageButton:!!this.props.channel.server_id,bottom:this.bottom.current},this.messageId))):(t.push(Object(R.jsx)(Ut,{message:this.messageStr,user:this.props.users[this.lastAuthorId]||{},time:this.time,showMessageButton:!!this.props.channel.server_id,bottom:this.bottom.current},this.messageId)),t.push(Object(R.jsx)(Ut,{message:n.body,user:this.props.users[n.author_id]||{},time:n.created_at,showMessageButton:!!this.props.channel.server_id,bottom:this.bottom.current},n.id)),this.messageStr=n.body,this.time=n.created_at,this.lastAuthorId=n.author_id,this.messageId=n.id):n.author_id===this.lastAuthorId?this.messageStr=this.messageStr+"\n"+n.body:(t.push(Object(R.jsx)(Ut,{message:this.messageStr,user:this.props.users[this.lastAuthorId]||{},time:this.time,showMessageButton:!!this.props.channel.server_id,bottom:this.bottom.current},this.messageId)),this.messageStr=n.body,this.time=n.created_at,this.messageId=n.id,this.lastAuthorId=n.author_id)}return t}},{key:"parseNewMessage",value:function(e){if(e.author_id===this.lastAuthorId){this.messageStr=this.messageStr+"\n"+e.body;var t=Object(ut.union)([],this.state.messages);t[t.length-1]=Object(R.jsx)(Ut,{message:this.messageStr,user:this.props.users[this.lastAuthorId]||{},time:this.time,showMessageButton:!!this.props.channel.server_id,bottom:this.bottom.current},this.messageId),this.setState({messages:t})}else this.messageStr=e.body,this.time=e.created_at,this.lastAuthorId=e.author_id,this.messageId=e.id,this.setState({messages:this.state.messages.concat(Object(R.jsx)(Ut,{message:e.body,user:this.props.users[e.author_id]||{},time:e.created_at,showMessageButton:!!this.props.channel.server_id},e.id))})}},{key:"render",value:function(){var e=null;if("general"===this.props.channel.name)e=Object(R.jsxs)("div",{className:"welcome-message",children:[Object(R.jsx)("h2",{children:"welcome to the server, ".concat(this.props.currentUser.username,"!")}),Object(R.jsxs)("div",{children:[Object(R.jsxs)("div",{className:"server-welcome-item",children:[Object(R.jsx)("div",{className:"exclamation-icon"}),Object(R.jsxs)("p",{children:[Object(R.jsx)("strong",{children:"Rift"})," is a clone of the awesome Discord app! This site is purely for educational purposes."]})]}),Object(R.jsxs)("div",{className:"server-welcome-item",children:[Object(R.jsx)("div",{className:"comp-icon"}),Object(R.jsxs)("p",{children:[Object(R.jsx)("strong",{children:"Learn about Rift"})," by exploring the site or visiting the github repo ",Object(R.jsx)("a",{href:"https://github.com/Vor-Tech/Rift",target:"_blank",children:"here!"})]})]}),Object(R.jsxs)("div",{className:"server-welcome-item",children:[Object(R.jsx)("div",{className:"phone-icon"}),Object(R.jsxs)("p",{children:[Object(R.jsx)("strong",{children:"Reach me"})," via ",Object(R.jsx)("a",{href:"https://www.linkedin.com/in/jonathankurtz/",target:"_blank",children:"LinkedIn"})," or send me an email at ",Object(R.jsx)("a",{href:"mailto: crucio715@gmail.com",children:"crucio715@gmail.com"}),"!"]})]})]}),Object(R.jsx)("div",{className:"empty-chat empty-welcome"})]});else if(this.props.channel.name&&this.props.match.params.serverId)e=Object(R.jsx)("div",{className:"empty-chat",children:Object(R.jsxs)("h4",{children:["Welcome to the beginning of the ",Object(R.jsx)("strong",{children:"#".concat(this.props.channel.name)})," channel."]})});else if(this.props.channel.name){var t,s=this.props.channel.name.split("-");t=s[0]==this.props.currentUser.id?s[1]:s[0],e=e=Object(R.jsx)("div",{className:"empty-chat",children:Object(R.jsxs)("h4",{children:["This is the beginning of your direct message history with ",Object(R.jsx)("strong",{children:this.props.users[t]?"@".concat(this.props.users[t].username):""})]})})}return Object(R.jsxs)("div",{className:"chat-main",children:[Object(R.jsx)("div",{className:"message-wrapper",children:Object(R.jsx)("div",{className:"message-scroll-wrapper",children:Object(R.jsxs)("div",{className:"message-list",children:[e,this.state.messages,Object(R.jsx)("div",{ref:this.bottom})]})})}),Object(R.jsx)(dt,{user:this.props.currentUser,channel:this.props.channel,channelId:this.props.channelId,users:this.props.users,subscription:this.subscription})]})}}]),s}(a.a.Component),Tt="RECEIVE_DM_NOTIFICATION",At="REMOVE_DM_NOTIFICATION",zt=function(e){return{type:At,channelId:e}},Vt=Object(u.g)(Object(o.b)((function(e,t){var s=t.match.params.channelId,n=e.entities.channels[s]||{},r=e.entities.servers[n.server_id]||{};return{currentUser:e.entities.users[e.session.id],channelId:s,users:e.entities.users,channel:n,server:r,loading:e.ui.loading}}),(function(e){return{removeDmNotification:function(t){return e(zt(t))},removeChannel:function(t){return e(Fe(t))}}}))(Dt)),qt=function(e){Object(M.a)(s,e);var t=Object(L.a)(s);function s(){return Object(E.a)(this,s),t.apply(this,arguments)}return Object(w.a)(s,[{key:"transition",value:function(){document.getElementsByClassName("popup-content")[0].style.transform="translate(10px, 0)"}},{key:"render",value:function(){return Object(R.jsx)(Mt,{component:Object(R.jsxs)("div",{className:"server-member",children:[Object(R.jsx)("div",{className:"server-member-img",style:this.props.user.image_url?{backgroundImage:"url(".concat(this.props.user.image_url,")")}:{},children:Object(R.jsx)("div",{className:"server-member-status-indicator",style:this.props.user.online?{backgroundColor:"#43b581"}:{backgroundColor:"#747f8d"}})}),Object(R.jsx)("span",{children:this.props.user.username})]}),onOpen:this.transition,user:this.props.user,position:"left center",offsetX:-5,offsetY:this.props.admin?10:-90,showMessageButton:!0})}}]),s}(a.a.Component),Ft=Object(u.g)(qt),Pt=function(e){Object(M.a)(s,e);var t=Object(L.a)(s);function s(){return Object(E.a)(this,s),t.apply(this,arguments)}return Object(w.a)(s,[{key:"componentWillMount",value:function(){this.props.beginLoading()}},{key:"componentDidMount",value:function(){this.props.fetchMembers(this.props.match.params.serverId).then(this.props.finishLoading)}},{key:"componentWillUpdate",value:function(e){e.server.id&&e.server.id!=this.props.match.params.serverId&&this.props.beginLoading()}},{key:"componentDidUpdate",value:function(e){e.server.id&&e.server.id!=this.props.match.params.serverId&&this.props.fetchMembers(this.props.match.params.serverId).then(this.props.finishLoading)}},{key:"render",value:function(){var e,t,s,n=this,r=this.props.members.find((function(e){return e.id===n.props.server.admin_id}));r?(e=Object(R.jsx)(Ft,{user:r,admin:!0}),r.online?(t=1,s=0):(t=0,s=1)):e=null;var a=this.props.members.filter((function(e){return e.online})),i=this.props.members.filter((function(e){return!e.online})),c=a.map((function(e,t){return e.id===n.props.server.admin_id?null:Object(R.jsx)(Ft,{user:e},t)})),o=i.map((function(e,t){return e.id===n.props.server.admin_id?null:Object(R.jsx)(Ft,{user:e},t)}));return Object(R.jsx)("div",{className:"server-members ".concat(this.props.classText),children:Object(R.jsx)("div",{className:"server-members-scroll",children:Object(R.jsxs)("div",{className:"server-members-container",children:[Object(R.jsx)("h3",{children:"ADMIN"}),e,a.length-t>0?Object(R.jsx)("h3",{children:"ONLINE\u2014".concat(a.length-t)}):null,c,i.length-s>0?Object(R.jsx)("h3",{children:"OFFLINE\u2014".concat(i.length-s)}):null,o]})})})}}]),s}(a.a.Component),Bt="BEGIN_LOADING",Jt="FINISH_LOADING",Gt=function(){return{type:Bt}},Ht=function(){return{type:Jt}},Wt=Object(u.g)(Object(o.b)((function(e,t){var s=e.entities.servers[t.match.params.serverId]||{};return{server:s,members:Object.values(e.entities.users).filter((function(e){return e.servers.includes(s.id)})).sort((function(e,t){return e.username<t.username?-1:e.username>t.username?1:0}))}}),(function(e){return{fetchMembers:function(t){return e(de(t))},beginLoading:function(){return e(Gt())},finishLoading:function(){return e(Ht())}}}))(Pt)),Zt=function(e){Object(M.a)(s,e);var t=Object(L.a)(s);function s(e){var n;return Object(E.a)(this,s),(n=t.call(this,e)).state={showMembers:!0,classText:"members-transition-left"},n.toggleShowMembers=n.toggleShowMembers.bind(Object(I.a)(n)),n}return Object(w.a)(s,[{key:"toggleShowMembers",value:function(){var e=this,t=this.state.showMembers;t?(this.setState({classText:"members-transition-right"}),setTimeout((function(){return e.setState({showMembers:!t})}),200)):(this.setState({showMembers:!t}),setTimeout((function(){return e.setState({classText:"members-transition-left"})}),1))}},{key:"render",value:function(){return Object(R.jsxs)("div",{className:"chat-container",children:[Object(R.jsx)(lt,{toggleShowMembers:this.toggleShowMembers}),Object(R.jsxs)("div",{className:"chat-main-container",children:[Object(R.jsx)(Vt,{}),this.state.showMembers?Object(R.jsx)(Wt,{classText:this.state.classText}):null]})]})}}]),s}(a.a.Component),Yt=function(e){Object(M.a)(s,e);var t=Object(L.a)(s);function s(){return Object(E.a)(this,s),t.apply(this,arguments)}return Object(w.a)(s,[{key:"render",value:function(){return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(ct,{}),Object(R.jsx)(Zt,{})]})}}]),s}(a.a.Component),Xt=function(e){Object(M.a)(s,e);var t=Object(L.a)(s);function s(e){var n;return Object(E.a)(this,s),(n=t.call(this,e)).state={active:!1},n.handleMouseEnter=n.handleMouseEnter.bind(Object(I.a)(n)),n.handleMouseLeave=n.handleMouseLeave.bind(Object(I.a)(n)),n.handleDelete=n.handleDelete.bind(Object(I.a)(n)),n}return Object(w.a)(s,[{key:"handleMouseEnter",value:function(){this.setState({active:!0})}},{key:"handleMouseLeave",value:function(){this.setState({active:!1})}},{key:"handleDelete",value:function(e){var t=this;e.preventDefault();var s=this.props.channel.id,n=document.getElementById("dm-notification-".concat(s));n&&(n.className="dm-notification",setTimeout((function(){return t.props.removeDmNotification(s)}),200));var r=this;this.props.deleteDmChannel().then((function(e){e.channelId==r.props.match.params.channelId&&r.props.history.push("/channels/@me")}))}},{key:"render",value:function(){return Object(R.jsxs)(l.c,{to:"/channels/@me/".concat(this.props.channel.id),className:"channel",activeClassName:"selected",style:{height:"40px"},onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[Object(R.jsx)("div",{className:"server-member-img",style:{backgroundImage:"url(".concat(this.props.user.image_url,")"),marginLeft:0},children:Object(R.jsx)("div",{className:"server-member-status-indicator",style:this.props.user.online?{backgroundColor:"#43b581"}:{backgroundColor:"#747f8d"}})}),Object(R.jsx)("div",{className:"channel-name",children:this.props.user.username}),this.state.active?Object(R.jsx)("button",{className:"delete-channel-button",onClick:this.handleDelete}):null]})}}]),s}(a.a.Component),Kt=Object(u.g)(Xt),Qt=function(e){Object(M.a)(s,e);var t=Object(L.a)(s);function s(){return Object(E.a)(this,s),t.apply(this,arguments)}return Object(w.a)(s,[{key:"render",value:function(){var e=this,t=this,s=this.props.channels.map((function(s,n){var r,a=s.name.split("-");return r=a[0]==e.props.currentUser.id?a[1]:a[0],Object(R.jsx)(Kt,{channel:s,user:t.props.users[r]||{},deleteDmChannel:function(){return e.props.deleteDmChannel(s.id)},removeDmNotification:e.props.removeDmNotification},n)}));return Object(R.jsx)("div",{className:"right-main",children:Object(R.jsxs)("div",{className:"channels",children:[Object(R.jsxs)(l.c,{to:"/channels/@me",exact:!0,className:"friends-link",activeClassName:"friends-link-active",children:[Object(R.jsx)("svg",{className:"friends-icon",width:"16",height:"16",viewBox:"0 0 24 24",children:Object(R.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[Object(R.jsx)("path",{fill:"currentColor",fillRule:"nonzero",d:"M0.5,0 L0.5,1.5 C0.5,5.65 2.71,9.28 6,11.3 L6,16 L21,16 L21,14 C21,11.34 15.67,10 13,10 C13,10 12.83,10 12.75,10 C8,10 4,6 4,1.5 L4,0 L0.5,0 Z M13,0 C10.790861,0 9,1.790861 9,4 C9,6.209139 10.790861,8 13,8 C15.209139,8 17,6.209139 17,4 C17,1.790861 15.209139,0 13,0 Z",transform:"translate(2 4)"}),Object(R.jsx)("path",{d:"M0,0 L24,0 L24,24 L0,24 L0,0 Z M0,0 L24,0 L24,24 L0,24 L0,0 Z M0,0 L24,0 L24,24 L0,24 L0,0 Z"})]})}),Object(R.jsx)("span",{className:"server-name",children:"Friends"}),this.props.requestCount?Object(R.jsx)("div",{className:"friends-request-counter",children:this.props.requestCount}):null]}),Object(R.jsx)("div",{className:"channel-scroll-wrapper",children:Object(R.jsx)("div",{className:"channel-overflow-container",children:Object(R.jsxs)("div",{className:"channel-list",children:[Object(R.jsx)("div",{className:"text-channels-label",children:Object(R.jsx)("div",{children:Object(R.jsx)("h3",{id:"text-channels",children:"DIRECT MESSAGES"})})}),s]})})}),Object(R.jsx)(at,{})]})})}}]),s}(a.a.Component),$t=Object(u.g)(Object(o.b)((function(e){var t=Object.values(e.entities.friendRequests).filter((function(t){return t.friend_id===e.session.id})).length;return{currentUser:e.entities.users[e.session.id],channels:Object.values(e.entities.channels).filter((function(e){return!e.server_id})),users:e.entities.users,requestCount:t}}),(function(e){return{fetchDmChannels:function(){return e(We())},logout:function(){return e(k())},deleteDmChannel:function(t){return e(He(t))},removeDmNotification:function(t){return e(zt(t))}}}))(Qt)),es=function(e){Object(M.a)(s,e);var t=Object(L.a)(s);function s(){return Object(E.a)(this,s),t.apply(this,arguments)}return Object(w.a)(s,[{key:"render",value:function(){var e;if(this.props.channel.name){var t,s=this.props.channel.name.split("-");t=s[0]==this.props.currentUser.id?s[1]:s[0],e=this.props.users[t]?this.props.users[t].username:""}else e=this.props.currentUser.username;return Object(R.jsx)("header",{className:"chat-header",children:Object(R.jsxs)("div",{style:{display:"flex",paddingBottom:"2px"},children:[Object(R.jsx)("svg",{className:"hash",color:"#72767d",viewBox:"0 0 16 16",background:"background-1FptAZ",width:"16",height:"16",children:Object(R.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M12.93356,11.6546 C13.13504,11.87168 13.13504,12.22376 12.91352,12.41996 C12.35936,12.90956 11.72696,13.2806 11.01608,13.53128 C10.1348,13.8446 9.2054,14 8.22764,14 C7.29272,14 6.44096,13.85264 5.675,13.5554 C4.90892,13.2608 4.25264,12.84812 3.71156,12.3206 C3.16784,11.79296 2.74724,11.16068 2.44724,10.42412 C2.14736,9.68744 2,8.88392 2,8.01344 C2,7.15352 2.16344,6.35804 2.4902,5.62676 C2.81696,4.89548 3.26156,4.26068 3.82676,3.72224 C4.39196,3.18392 5.05088,2.76332 5.80892,2.45528 C6.56156,2.15264 7.37048,2 8.22764,2 C8.96684,2 9.6848,2.10716 10.37852,2.32148 C11.075,2.5358 11.69108,2.8598 12.22952,3.28844 C12.76784,3.71972 13.19648,4.2554 13.51784,4.90088 C13.83932,5.54648 14,6.30452 14,7.175 C14,7.82048 13.91168,8.39108 13.73216,8.88392 C13.55276,9.3794 13.31444,9.79196 13.01444,10.12676 C12.71444,10.46156 12.37424,10.71056 11.98844,10.87676 C11.60276,11.04284 11.19836,11.12576 10.77512,11.12576 C10.3412,11.12576 9.99296,11.024 9.73052,10.82048 C9.47072,10.61684 9.33944,10.35704 9.33944,10.04636 L9.25904,10.04636 C9.09572,10.30352 8.84648,10.54988 8.50904,10.78028 C8.1716,11.01068 7.75904,11.1284 7.26884,11.1284 C6.52952,11.1284 5.95904,10.88732 5.55716,10.40252 C5.1554,9.91772 4.95452,9.29084 4.95452,8.5142 C4.95452,8.06144 5.02952,7.61684 5.18216,7.17488 C5.3348,6.73292 5.55188,6.34184 5.83304,5.99636 C6.11432,5.65352 6.45176,5.37488 6.84284,5.16596 C7.23392,4.95704 7.66784,4.85264 8.14736,4.85264 C8.55992,4.85264 8.90816,4.93832 9.19196,5.1098 C9.47324,5.28128 9.65816,5.49284 9.74648,5.73932 L9.76256,5.73932 L9.78716,5.61884 C9.84608,5.3288 10.1336,5.09384 10.42952,5.09384 L10.80992,5.09384 C11.10596,5.09384 11.2964,5.32844 11.23556,5.618 L10.70552,8.14472 C10.68404,8.29472 10.65452,8.4608 10.61708,8.6456 C10.57964,8.82788 10.5608,8.99924 10.5608,9.16268 C10.5608,9.34484 10.59572,9.49748 10.66808,9.62336 C10.73768,9.7466 10.877,9.80828 11.08316,9.80828 C11.5064,9.80828 11.85728,9.58316 12.13592,9.13064 C12.4118,8.678 12.551,8.0726 12.551,7.30916 C12.551,6.66368 12.4412,6.09044 12.22424,5.5922 C12.00716,5.09132 11.70452,4.67348 11.31884,4.33328 C10.93316,3.99584 10.47236,3.73868 9.94196,3.5672 C9.40904,3.39572 8.82776,3.31004 8.19836,3.31004 C7.51256,3.31004 6.8858,3.43052 6.31532,3.67172 C5.74472,3.9128 5.25728,4.2476 4.8554,4.67084 C4.45364,5.09672 4.14032,5.59496 3.91796,6.17084 C3.69296,6.74408 3.58052,7.36556 3.58052,8.03252 C3.58052,8.74232 3.69836,9.38252 3.9314,9.953 C4.16444,10.52348 4.49396,11.0084 4.91708,11.4128 C5.3402,11.8172 5.8466,12.12536 6.43316,12.33968 C7.01984,12.55388 7.66796,12.66104 8.37248,12.66104 C9.25376,12.66104 10.0118,12.52184 10.6466,12.24056 C11.12396,12.03116 11.57228,11.75948 11.99228,11.42708 C12.224,11.2436 12.56144,11.2538 12.76292,11.47076 L12.93356,11.6546 Z M8.1956,6.17852 C7.93568,6.17852 7.7054,6.25352 7.5098,6.40352 C7.3142,6.55352 7.14824,6.74372 7.01156,6.97676 C6.875,7.20716 6.77324,7.4642 6.70088,7.74284 C6.63116,8.02148 6.59372,8.29208 6.59372,8.54912 C6.59372,8.67764 6.60716,8.81432 6.63392,8.96168 C6.66068,9.10628 6.7142,9.2402 6.79724,9.36608 C6.87764,9.4892 6.98468,9.59108 7.11596,9.67148 C7.24724,9.75188 7.42136,9.79208 7.63832,9.79208 C7.93292,9.79208 8.18204,9.7196 8.38832,9.575 C8.5946,9.4304 8.76332,9.24812 8.8946,9.02588 C9.02588,8.80628 9.1196,8.5652 9.18128,8.30816 C9.2402,8.051 9.2696,7.81256 9.2696,7.59824 C9.2696,7.42676 9.25352,7.25804 9.22148,7.08932 C9.18932,6.92324 9.13316,6.77324 9.05,6.63668 C8.9696,6.50276 8.85716,6.39296 8.7152,6.30716 C8.57588,6.22148 8.40188,6.17852 8.1956,6.17852 Z",transform:"translate(1.5 2)"})}),Object(R.jsx)("span",{className:"username",children:e})]})})}}]),s}(a.a.Component),ts=Object(u.g)(Object(o.b)((function(e,t){return{currentUser:e.entities.users[e.session.id],users:e.entities.users,channel:e.entities.channels[t.match.params.channelId]||{}}}))(es)),ss=function(e){Object(M.a)(s,e);var t=Object(L.a)(s);function s(){return Object(E.a)(this,s),t.apply(this,arguments)}return Object(w.a)(s,[{key:"render",value:function(){return Object(R.jsx)(R.Fragment,{children:Object(R.jsxs)("div",{className:"chat-container",children:[Object(R.jsx)(ts,{}),Object(R.jsx)("div",{className:"chat-main-container",children:Object(R.jsx)(Vt,{})})]})})}}]),s}(a.a.Component),ns=function(e){Object(M.a)(s,e);var t=Object(L.a)(s);function s(){return Object(E.a)(this,s),t.apply(this,arguments)}return Object(w.a)(s,[{key:"render",value:function(){var e=this;return Object(R.jsx)("header",{className:"chat-header",children:Object(R.jsxs)("ul",{className:"friends-button-container",children:[Object(R.jsx)("li",{className:"all"===this.props.tab?"friends-header-button-active":"friends-header-button",onClick:function(){return e.props.changeTab("all")},children:"All"}),Object(R.jsx)("li",{className:"online"===this.props.tab?"friends-header-button-active":"friends-header-button",onClick:function(){return e.props.changeTab("online")},children:"Online"}),Object(R.jsxs)("li",{className:"pending"===this.props.tab?"friends-header-button-active":"friends-header-button",onClick:function(){return e.props.changeTab("pending")},children:["Pending",this.props.requestCount?Object(R.jsx)("div",{className:"friends-request-header-counter",children:this.props.requestCount}):null]})]})})}}]),s}(a.a.Component),rs=Object(o.b)((function(e,t){return{requestCount:Object.values(e.entities.friendRequests).filter((function(t){return t.friend_id===e.session.id})).length}}))(ns),as=function(e){Object(M.a)(s,e);var t=Object(L.a)(s);function s(){return Object(E.a)(this,s),t.apply(this,arguments)}return Object(w.a)(s,[{key:"render",value:function(){return Object(R.jsx)(H,{component:Object(R.jsx)(l.b,{to:"/channels/".concat(this.props.server.id,"/").concat(this.props.server.root_channel),onClick:function(e){return e.stopPropagation()},className:"mutual-server",style:this.props.server.icon_url?{backgroundImage:"url(".concat(this.props.server.icon_url,")"),backgroundSize:"100%"}:{backgroundSize:"100%"},onKeyDown:function(e){return e.preventDefault()}}),position:"top center",text:this.props.server.name})}}]),s}(a.a.Component),is=function(e){Object(M.a)(s,e);var t=Object(L.a)(s);function s(e){var n;return Object(E.a)(this,s),(n=t.call(this,e)).handleClickParent=n.handleClickParent.bind(Object(I.a)(n)),n.handleReject=n.handleReject.bind(Object(I.a)(n)),n.handleAccept=n.handleAccept.bind(Object(I.a)(n)),n}return Object(w.a)(s,[{key:"handleClickParent",value:function(){var e=this;this.props.createDmChannel(this.props.user.id).then((function(t){return e.props.history.push("/channels/@me/".concat(t.channel.id))}))}},{key:"handleReject",value:function(e){e.stopPropagation(),this.props.reject()}},{key:"handleAccept",value:function(e){e.stopPropagation(),this.props.accept()}},{key:"render",value:function(){var e,t=this,s=Object(ut.intersection)(this.props.currentUser.servers,this.props.user.servers);if(s.length<=6)e=s.map((function(e,s){var n=t.props.servers[e]||{};return Object(R.jsx)(as,{server:n},s)}));else{e=[];for(var n=0;n<5;n++){var r=s[n],a=this.props.servers[r]||{};e.push(Object(R.jsx)(as,{server:a},n))}e.push(Object(R.jsx)("div",{className:"extra-servers",children:"+".concat(s.length-5)},s.length))}return Object(R.jsxs)("li",{className:"friend-container",onClick:this.handleClickParent,style:this.props.first?{borderColor:"transparent"}:{},children:[Object(R.jsxs)("div",{className:"friend-name-container",children:[Object(R.jsx)("div",{className:"friend-icon",style:this.props.user.image_url?{backgroundImage:"url(".concat(this.props.user.image_url,")")}:{}}),Object(R.jsx)("h4",{children:this.props.user.username})]}),Object(R.jsxs)("div",{className:"friend-status-container",children:[Object(R.jsx)("div",{className:"friends-status-indicator",style:this.props.user.online?{backgroundColor:"#43b581"}:{backgroundColor:"#747f8d"}}),Object(R.jsx)("h4",{children:this.props.status})]}),Object(R.jsx)("div",{className:"mutual-servers-container",children:e}),Object(R.jsxs)("div",{className:"friend-accept-reject",children:["Incoming friend request"===this.props.status?Object(R.jsx)(H,{component:Object(R.jsx)("button",{className:"accept-friend",onClick:this.handleAccept}),position:"top center",text:"Accept"}):null,Object(R.jsx)(H,{component:Object(R.jsx)("button",{className:this.props.status.includes("request")?"reject-friend":"remove-friend",onClick:this.handleReject}),position:"top center",text:this.props.status.includes("request")?this.props.status.includes("Outgoing")?"Cancel":"Ignore":"Remove Friend"})]})]})}}]),s}(a.a.Component),cs=Object(u.g)(is),os=function(e){Object(M.a)(s,e);var t=Object(L.a)(s);function s(){return Object(E.a)(this,s),t.apply(this,arguments)}return Object(w.a)(s,[{key:"render",value:function(){var e=this,t=this.props.friends.map((function(t,s){return Object(R.jsx)(cs,{user:t,reject:function(){return e.props.deleteFriend(t.id)},createDmChannel:e.props.createDmChannel,status:t.online?"Online":"Offline",first:0===s,currentUser:e.props.currentUser,servers:e.props.servers},s)}));return Object(R.jsx)("div",{className:"friends-scroll-wrapper",children:Object(R.jsxs)("ul",{children:[t,0===t.length?this.props.allFriends?Object(R.jsxs)("div",{className:"empty-container",children:[Object(R.jsx)("div",{className:"no-friends empty"}),Object(R.jsx)("h4",{children:"Wumpus has no friends. You could though!"})]}):Object(R.jsxs)("div",{className:"empty-container",children:[Object(R.jsx)("div",{className:"online empty"}),Object(R.jsx)("h4",{children:"No one's around to play with Wumpus."})]}):null]})})}}]),s}(a.a.Component),ls=Object(o.b)((function(e){return{friends:e.entities.friends.map((function(t){return e.entities.users[t]||{}})).sort((function(e,t){return e.username<t.username?-1:e.username>t.username?1:0})),currentUser:e.entities.users[e.session.id],servers:e.entities.servers,allFriends:!0}}),(function(e){return{deleteFriend:function(t){return e(wt(t))},createDmChannel:function(t){return e(Ye(t))}}}))(os),us=function(e){Object(M.a)(s,e);var t=Object(L.a)(s);function s(){return Object(E.a)(this,s),t.apply(this,arguments)}return Object(w.a)(s,[{key:"render",value:function(){var e=this,t=this.props.incomingRequests.map((function(t,s){var n=e.props.users[t.user_id];return Object(R.jsx)(cs,{user:n,status:"Incoming friend request",accept:function(){return e.props.acceptFriendRequest(t)},reject:function(){return e.props.deleteFriendRequest(t)},createDmChannel:e.props.createDmChannel,first:0===s,currentUser:e.props.currentUser,servers:e.props.servers},s)})),s=this.props.outgoingRequests.map((function(s,n){var r=e.props.users[s.friend_id];return Object(R.jsx)(cs,{user:r,status:"Outgoing friend request",accept:function(){return e.props.acceptFriendRequest(s)},reject:function(){return e.props.deleteFriendRequest(s)},createDmChannel:e.props.createDmChannel,first:0===n&&t.empty,currentUser:e.props.currentUser,servers:e.props.servers},n)}));return Object(R.jsx)("div",{className:"friends-scroll-wrapper",children:Object(R.jsxs)("ul",{children:[t,s,0===t.length&&0===s.length?Object(R.jsxs)("div",{className:"empty-container",children:[Object(R.jsx)("div",{className:"pending empty"}),Object(R.jsx)("h4",{children:"There are no pending friend requests. Here's a Wumpus for now."})]}):null]})})}}]),s}(a.a.Component),hs=Object(o.b)((function(e){var t=Object.values(e.entities.friendRequests).filter((function(t){return t.user_id===e.session.id})),s=Object.values(e.entities.friendRequests).filter((function(t){return t.friend_id===e.session.id}));return{users:e.entities.users,incomingRequests:s,outgoingRequests:t,currentUser:e.entities.users[e.session.id],servers:e.entities.servers}}),(function(e){return{fetchFriendRequests:function(){return e(Nt())},acceptFriendRequest:function(t){return e(kt(t))},deleteFriendRequest:function(t){return e(Et(t))},createDmChannel:function(t){return e(Ye(t))}}}))(us),ds=Object(o.b)((function(e,t){return{friends:e.entities.friends.map((function(t){return e.entities.users[t]||{}})).filter((function(e){return e.online})),currentUser:e.entities.users[e.session.id],servers:e.entities.servers}}),(function(e){return{fetchFriends:function(){return e(yt())},deleteFriend:function(t){return e(wt(t))},createDmChannel:function(t){return e(Ye(t))}}}))(os),ps=function(e){Object(M.a)(s,e);var t=Object(L.a)(s);function s(e){var n;return Object(E.a)(this,s),(n=t.call(this,e)).state={tab:"all"},n.changeTab=n.changeTab.bind(Object(I.a)(n)),n}return Object(w.a)(s,[{key:"changeTab",value:function(e){this.setState({tab:e})}},{key:"render",value:function(){var e;return e="all"===this.state.tab?Object(R.jsx)(ls,{}):"online"===this.state.tab?Object(R.jsx)(ds,{}):Object(R.jsx)(hs,{}),Object(R.jsx)(R.Fragment,{children:Object(R.jsxs)("div",{className:"chat-container",children:[Object(R.jsx)(rs,{changeTab:this.changeTab,tab:this.state.tab}),Object(R.jsx)("div",{className:"chat-main-container",children:Object(R.jsxs)("div",{className:"friends-list",children:[Object(R.jsxs)("div",{className:"friends-table-header",children:[Object(R.jsx)("div",{className:"friends-column friends-name",children:"Name"}),Object(R.jsx)("div",{className:"friends-column-separator"}),Object(R.jsx)("div",{className:"friends-column friends-status",children:"Status"}),Object(R.jsx)("div",{className:"friends-column-separator"}),Object(R.jsx)("div",{className:"friends-column friends-servers",children:"Mutual Servers"}),Object(R.jsx)("div",{className:"friends-column-separator"}),Object(R.jsx)("div",{className:"friends-actions"})]}),e]})})]})})}}]),s}(a.a.Component),bs=function(e){Object(M.a)(s,e);var t=Object(L.a)(s);function s(){return Object(E.a)(this,s),t.apply(this,arguments)}return Object(w.a)(s,[{key:"render",value:function(){return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)($t,{}),Object(R.jsxs)(u.d,{children:[Object(R.jsx)(u.b,{path:"/channels/@me/:channelId",component:ss}),Object(R.jsx)(u.b,{path:"/",component:ps})]})]})}}]),s}(a.a.Component),js=function(e){return Object(R.jsxs)("div",{className:"loading-screen ".concat(e.classText),children:[Object(R.jsxs)("video",{height:"200",width:"200",autoPlay:!0,loop:!0,muted:!0,children:[Object(R.jsx)("source",{src:"https://s3.amazonaws.com/discors-dev/Main/loading.webm",type:"video/webm"}),Object(R.jsx)("source",{src:"https://s3.amazonaws.com/discors-dev/Main/loading.mp4",type:"video/mp4"}),Object(R.jsx)("img",{alt:"",src:"https://s3.amazonaws.com/discors-dev/Main/loading.png"})]}),Object(R.jsx)("h5",{children:e.text})]})},ms=function(e){Object(M.a)(s,e);var t=Object(L.a)(s);function s(e){var n;return Object(E.a)(this,s),(n=t.call(this,e)).state={loading:!1,class:""},n}return Object(w.a)(s,[{key:"componentWillMount",value:function(){this.setState({loading:"connecting"}),this.props.beginLoading()}},{key:"componentDidMount",value:function(){var e=this;document.body.style.overflow="hidden",this.notificationSubscription=App.cable.subscriptions.create({channel:"NotificationsChannel",userId:this.props.currentUser.id},{received:function(t){switch(t.type){case"message":var s=JSON.parse(t.channel),n=JSON.parse(t.user),r={channelId:s.id,authorId:n.id};e.props.location.pathname!=="/channels/@me/".concat(s.id)&&(e.props.receiveChannel(s),e.props.receiveUser(n),e.props.receiveDmNotification(r));break;case"friend_request":e.props.receiveUser(JSON.parse(t.user)),e.props.receiveFriendRequest(JSON.parse(t.friend_request));break;case"friend_request_destroy":var a=JSON.parse(t.friend_request);e.props.removeFriendRequest(a.id);break;case"friend":var i=JSON.parse(t.user);e.props.receiveUser(i),e.props.receiveFriend(i.id);break;case"friend_destroy":e.props.removeFriend(JSON.parse(t.user_id))}}}),this.props.fetchCurrentUserData().then((function(){e.setState({loading:"ready"}),e.props.finishLoading(),setTimeout((function(){e.setState({class:"hidden"}),setTimeout((function(){e.setState({loading:!1,class:""})}),200)}),1e3)}))}},{key:"componentWillUnmount",value:function(){this.notificationSubscription.unsubscribe()}},{key:"render",value:function(){var e=this.state.loading;return Object(R.jsxs)("div",{className:"main-body",children:[this.state.loading?Object(R.jsx)(js,{text:e,classText:this.state.class}):null,Object(R.jsx)(ge,{}),Object(R.jsxs)(u.d,{children:[Object(R.jsx)(u.b,{path:"/channels/@me/:channelId",component:bs}),Object(R.jsx)(u.b,{path:"/channels/@me",component:bs}),Object(R.jsx)(u.b,{path:"/channels/:serverId/:channelId",component:Yt}),Object(R.jsx)(u.b,{path:"/channels/:serverId",component:Yt}),Object(R.jsx)(u.b,{path:"/",component:bs})]})]})}}]),s}(a.a.Component),vs=Object(o.b)((function(e){return{currentUser:e.entities.users[e.session.id]}}),(function(e){return{fetchCurrentUserData:function(){return e(S())},receiveDmNotification:function(t){return e(function(e){return{type:Tt,notification:e}}(t))},receiveUser:function(t){return e(function(e){return{type:b,user:e}}(t))},receiveChannel:function(t){return e(qe(t))},receiveFriendRequest:function(t){return e(xt(t))},removeFriendRequest:function(t){return e(gt(t))},removeFriend:function(t){return e(Ct(t))},receiveFriend:function(t){return e(Ot(t))},beginLoading:function(){return e(Gt())},finishLoading:function(){return e(Ht())}}}))(ms),fs=function(){return Object(R.jsxs)(u.d,{children:[Object(R.jsx)(F,{path:"/login",component:U}),Object(R.jsx)(F,{path:"/register",component:T}),Object(R.jsx)(P,{path:"/channels",component:vs}),Object(R.jsx)(u.b,{path:"/",component:z})]})},Os=function(e){var t=e.store;return Object(R.jsx)(o.a,{store:t,children:Object(R.jsx)(l.a,{children:Object(R.jsx)(fs,{})})})},xs=s(82),gs=s(81),Cs=s.n(gs),Ns=s(14),ys=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(t),s.type){case j:return Se()({},t,s.currentUserData.users);case p:return Se()({},t,Object(n.a)({},s.currentUser.id,s.currentUser));case b:return Se()({},t,Object(n.a)({},s.user.id,s.user));case se:return Se()({},t,s.users);case vt:return Se()({},t,s.friendData.users);case ie:return(e=Se()({},t))[s.userId].servers=e[s.userId].servers.filter((function(e){return e!==s.serverId})),e;case ne:return(e=Se()({},t))[s.userId].servers.includes(s.server.id)||e[s.userId].servers.push(s.server.id),e;default:return t}},Ss=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case j:return t.currentUserData.servers||{};case te:return Se()({},e,t.servers);case ne:return Se()({},e,Object(n.a)({},t.server.id,t.server));case ie:var s=Se()({},e);return delete s[t.serverId],s;default:return e}},ks=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case j:return t.currentUserData.channels||{};case Ue:return Se()({},e,t.channels);case De:return Se()({},e,Object(n.a)({},t.channel.id,t.channel));case Te:var s=Se()({},e);return delete s[t.channelId],s;default:return e}},Es=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case j:return t.currentUserData.friend_requests||{};case pt:return t.friendRequests||{};case bt:return Se()({},e,Object(n.a)({},t.friendRequest.id,t.friendRequest));case jt:var s=Se()({},e);return delete s[t.requestId],s;default:return e}},ws=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case j:return t.currentUserData.friends;case vt:return t.friendData.friends;case ft:return Object(ut.union)([],e,t.friend);case mt:var s=Object(ut.union)([],e);return s.filter((function(e){return e!==t.friendId}));default:return e}},Is=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case j:return t.currentUserData.voice_channels||{};case Xe:return Se()({},e,t.voiceChannels);case Ke:return Se()({},e,Object(n.a)({},t.voiceChannel.id,t.voiceChannel));case Qe:var s=Se()({},e);return delete s[t.voiceChannelId],s;default:return e}},Ms=Object(Ns.c)({users:ys,servers:Ss,channels:ks,friendRequests:Es,friends:ws,voiceChannels:Is}),Ls=Object(Ns.c)({loading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case Bt:return!0;case Jt:return!1;default:return e}}}),Rs=Object.freeze({id:null}),_s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rs,t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case j:return{id:t.currentUserData.currentUserId};case p:return{id:t.currentUser.id};case m:return Rs;default:return e}},Us=Object(Ns.c)({session:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case v:return t.errors;case p:case f:return[];default:return e}},server:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case re:return t.errors;case ne:case ae:return[];default:return e}},channel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case Ae:return t.errors;case De:case Ke:case ze:return[];default:return e}}}),Ds=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(t),s.type){case Tt:return t[s.notification.channelId]?((e=Se()({},t))[s.notification.channelId].count++,e):Se()({},t,Object(n.a)({},s.notification.channelId,Se()(s.notification,{count:1})));case At:return delete(e=Se()({},t))[s.channelId],e;default:return t}},Ts=Object(Ns.c)({dm:Ds}),As=Object(Ns.c)({entities:Ms,session:_s,errors:Us,ui:Ls,notifications:Ts}),zs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(xs.a)({reducer:As,preloadedState:e,middleware:function(e){return e().concat(Cs.a)}})};document.addEventListener("DOMContentLoaded",(function(){var e;if(window.currentUser){var t={session:{id:window.currentUser.id},entities:{users:Object(n.a)({},window.currentUser.id,window.currentUser)}};e=zs(t),delete window.currentUser}else e=zs();var s=document.getElementById("root");c.a.render(Object(R.jsx)(Os,{store:e}),s)}))}},[[190,1,2]]]);
//# sourceMappingURL=main.cea38125.chunk.js.map